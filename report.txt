
                   6502 Macro Assembler   -   Version 4.00f 
                Copyright (C) 1985 by 2500 A.D. Software, Inc.


                         ***** Active Commands *****

                           Ctrl S = Stop Output
                           Ctrl Q = Start Output
                           Esc  C = Stop Assembly
                           Esc  T = Terminal Output
                           Esc  P = Printer Output
                           Esc  D = Disk Output
                           Esc  M = Multiple Output
                           Esc  N = No Output


  Tue Dec 29 2015 15:42                                                                                                  Page    1







               2500 A.D. 6502 Macro Assembler  -  Version 4.00f
               ------------------------------------------------

                       Input  Filename : harry.asm
                       Output Filename : harry.obj


    1                           
    2                           
    3          3000             codebase     equ $3000
    4                           
    5   2FEA                                   org codebase-22
    6                           
    7                           ;****************************************
    8                           ; Header for Atom emulator Wouter Ras
    9   2FEA   48 41 52 52 59                    .db "HARRY           "
        2FEF   20 20 20 20 20 
        2FF4   20 20 20 20 20 
        2FF9   20 
   10   2FFA   0030                              .dw codebase
   11   2FFC   0030                              .dw codebase
   12   2FFE   4F27                              .dw eind_asm-start_asm
   13                           ;****************************************
   14   3000                    start_asm    
   15   3000                                   include harry.inc
   16                           ;--------------------------------
   17                           ;Constants
   18                           ;--------------------------------
   19                           
   20          00D0             SCRGRAPH      equ $d0 ; Clear4 color, $f0 = clear4 mono
   21          00D0             SCRTEXT       equ $d0
   22          8100             TOPSCR        equ $8100
   23          0014             SCR_W         equ 20
   24          000F             SCR_H         equ 15
   25   3000                        
   26          0000             green         equ $00
   27          0040             yellow        equ $40
   28          0080             blue          equ $80
   29          00C0             red           equ $c0
   30                           
   31                           ;--------------------------------
   32                           ;Zeropage addresses
   33                           ;--------------------------------
   34                           
   35          0060             TMP           equ $60
   36          0080             ADDR          equ $80
   37          0082             SPR           equ $82
   38          0084             TILE          equ $84
   39          0086             LEV           equ $86
   40          0088             SPRADR        equ $88
   41                           
   42                           ;--------------------------------
   43                           ;Game variables ($240-$3bf is free in assembler)
   44                           ;--------------------------------
   45                           
   46          0240             COLTIME       equ $240
   47          0241             COLCOUNT      equ $241
   48          0242             KEY           equ $242
   49                           ;JOY           equ $243
   50          0244             SCORE         equ $244 ; 4 bytes
   51          0248             NUM           equ $248 ; 4 bytes
   52          024C             LIVES         equ $24c
   53          024D             LEVN          equ $24d
   54          024E             LUNCH         equ $24e
   55          024F             SPRTMP        equ $24f ; 4 bytes
   56          0253             TIME          equ $253
   57          0254             PX            equ $254
   58          0255             OPX           equ $255
   59          0256             PDY           equ $256
   60          0257             PF            equ $257
   61          0258             OPF           equ $258
   62          0259             PDX           equ $259
   63          025A             PJ            equ $25a
   64          025B             PDIR          equ $25b
   65          025C             OPDIR         equ $25c
   66          025D             PLAD          equ $25d
   67          025E             OPLAD         equ $25e
   68          025F             PFALL         equ $25f
   69          0260             DEAD          equ $260
   70          0261             LADSOLID      equ $261
   71          0262             PY            equ $262
   72          0263             OPY           equ $263
   73          0026             CONVMV        equ $26
   74          0265             BKFRAME       equ $265
   75          0266             BKTIME        equ $266
   76          0267             HAYLPTIME     equ $267
   77          0268             BARRELT       equ $268
   78          0269             BARRELX       equ $269
   79          026A             TX            equ $26a
   80          026B             TY            equ $26b
   81          026C             BARRELY       equ $26c
   82          026D             BARRELDX      equ $26d
   83          026E             BARRELDY      equ $26e
   84          026F             BARRELD       equ $26f
   85          0270             BARRELE       equ $270
   86                           
   87                           ;--------------------------------
   88                           ;System calls
   89                           ;--------------------------------
   90                           
   91          FE71             OSRDKEY       equ $fe71
   92          FE94             OSRDCH        equ $fe94
   93          FE66             WAITSYNC      equ $fe66
   94                           
   95                           ;--------------------------------
   96                           ;Memory declaration
   97                           ;--------------------------------
   98                           
   99          0300             hiname1       equ $300 ;(10)
  100          030A             hiname2       equ $30A ;(10)
  101          0314             hiname3       equ $314 ;(10)
  102          0320             hibyte1       equ $320 ;(10)
  103          032A             hibyte2       equ $32A ;(10)
  104          0334             hibyte3       equ $334 ;(10)
  105          0340             hibyte4       equ $340 ;(10)
  106                           
  107          0400             level         equ $400 ;(300) 20 x 15 bytes
  108          0670             SPRX          equ $670 ;(16) X (255=off)
  109          0680             SPRY          equ $680 ;(16) Y
  110          0690             SPRF          equ $690 ;(16) Frame
  111          06A0             SPRT          equ $6A0 ;(16) Type (even numbers)
  112          06B0             SPRD          equ $6B0 ;(16) Direction
  113          06C0             SPRD1         equ $6C0 ;(16) Data 1
  114          06D0             SPRD2         equ $6D0 ;(16) Data 2
  115          06E0             SPRD3         equ $6E0 ;(16) Data 2
  116          06F0             SPR1          equ $6F0 ;(16) First run (255=first run, 0=not first run) 
  117                           
  118                           ;--------------------------------
  119                           ;Init highscore list
  120                           ;--------------------------------
  121                           ;       Fill list with:
  122                           ;         1) HHH 00100000
  123                           ;         2) HHH 00090000
  124                           ;                ...
  125                           ;        10) HHH 00010000
  126                           ;--------------------------------
  127                           
  128   3000                    inithiscore:
  129   3000   A2 09                    ldx #9
  130   3002   A0 01                    ldy #1
  131   3004                    rl1:
  132   3004   A9 48                    lda #'H'
  133   3006   9D 00 03                 sta hiname1,x
  134   3009   9D 0A 03                 sta hiname2,x
  135   300C   9D 14 03                 sta hiname3,x
  136   300F   A9 00                    lda #0
  137   3011   9D 20 03                 sta hibyte1,x
  138   3014   9D 2A 03                 sta hibyte2,x
  139   3017   9D 40 03                 sta hibyte4,x
  140   301A   98                       tya
  141   301B   9D 34 03                 sta hibyte3,x
  142   301E   C8                       iny
  143   301F   CA                       dex
  144   3020   10 E2                    bpl rl1
  145   3022                            
  146   3022   A9 10                    lda #$10
  147   3024   8D 34 03                 sta hibyte3
  148                           
  149                           ;--------------------------------
  150                           ;Game entry main loop
  151                           ;--------------------------------
  152                           
  153   3027                    start:
  154   3027   A9 06                    lda #6
  155   3029   8D 40 02                 sta COLTIME
  156                           
  157   302C   A9 D0                    lda #SCRTEXT   ; Init screenmode
  158   302E   20 96 37                 jsr setmode
  159   3031                                    
  160   3031   20 D9 30                 jsr title      ; Print header
  161                           
  162   3034   A2 32                    ldx #<rs       ; Print footer
  163   3036   A0 47                    ldy #>rs
  164   3038   20 93 56                 jsr PUTSTRING        
  165   303B   A2 4A                    ldx #<prsspc
  166   303D   A0 47                    ldy #>prsspc
  167   303F   20 93 56                 jsr PUTSTRING
  168   3042                    st1:
  169   3042   A2 05                    ldx #5         ; Wait for SPACE
  170   3044   20 FB 37                 jsr getkey
  171   3047   D0 F9                    bne st1
  172                           
  173   3049   AD 42 02                 lda KEY
  174   304C   20 10 31                 jsr startgame  ; Play game
  175   304F                            
  176   304F   20 10 38                 jsr findhi     ; Check for new highscore
  177   3052   E0 0A                    cpx #10
  178   3054   F0 D1                    beq start
  179   3056                            
  180   3056   86 67                    stx TMP+7
  181   3058   20 68 38                 jsr movehi     ; Make room for new entry
  182   305B   A6 67                    ldx TMP+7
  183   305D                            
  184   305D   AD 44 02                 lda SCORE      ; Fill in new highscore
  185   3060   9D 20 03                 sta hibyte1,x
  186   3063   AD 45 02                 lda SCORE+1
  187   3066   9D 2A 03                 sta hibyte2,x
  188   3069   AD 46 02                 lda SCORE+2
  189   306C   9D 34 03                 sta hibyte3,x
  190   306F   AD 47 02                 lda SCORE+3
  191   3072   9D 40 03                 sta hibyte4,x
  192   3075   A9 20                    lda #32
  193   3077   9D 00 03                 sta hiname1,x  ; Fill in new name with 3 spaces
  194   307A   9D 0A 03                 sta hiname2,x
  195   307D   9D 14 03                 sta hiname3,x
  196   3080                            
  197   3080   A9 D0                    lda #SCRTEXT   ; Clear screen
  198   3082   20 96 37                 jsr setmode
  199   3085                           
  200   3085   20 D9 30                 jsr title      ; Print header
  201                           
  202   3088   A2 B0                    ldx #<typename ; Print congratulations text
  203   308A   A0 47                    ldy #>typename
  204   308C   20 93 56                 jsr PUTSTRING
  205                           
  206   308F   A9 FF                    lda #(red/4+red/16+red/64+red)
  207   3091   8D 72 00                 sta COLOR
  208   3094                    st2:
  209   3094   20 A3 38                 jsr getchr     ; Wait for keypress
  210   3097   F0 A9                    beq st1        ; If DEL start again
  211                           
  212   3099   A2 0C                    ldx #12        ; Print and store 1st letter of new name
  213   309B   48                       pha
  214   309C   A5 67                    lda TMP+7
  215   309E   69 06                    adc #6
  216   30A0   A8                       tay
  217   30A1   68                       pla
  218   30A2   20 DE 56                 jsr PUTCHAR
  219   30A5   A6 67                    ldx TMP+7
  220   30A7   9D 00 03                 sta hiname1,x       
  221   30AA                    st3:
  222   30AA   20 A3 38                 jsr getchr     ; Print and store 2nd letter of new name
  223   30AD   F0 E5                    beq st2        ; If DEL go back to 1st letter
  224   30AF   A2 0D                    ldx #13
  225   30B1   48                       pha
  226   30B2   A5 67                    lda TMP+7
  227   30B4   69 06                    adc #6
  228   30B6   A8                       tay
  229   30B7   68                       pla
  230   30B8   20 DE 56                 jsr PUTCHAR
  231   30BB   A6 67                    ldx TMP+7
  232   30BD   9D 0A 03                 sta hiname2,x
  233   30C0                                    
  234   30C0   20 A3 38                 jsr getchr     ; Print and store 3rd letter of new name
  235   30C3   F0 E5                    beq st3        ; If DEL go back to 2nd letter
  236   30C5   A2 0E                    ldx #14
  237   30C7   48                       pha
  238   30C8   A5 67                    lda TMP+7
  239   30CA   69 06                    adc #6
  240   30CC   A8                       tay
  241   30CD   68                       pla
  242   30CE   20 DE 56                 jsr PUTCHAR
  243   30D1   A6 67                    ldx TMP+7
  244   30D3   9D 14 03                 sta hiname3,x                     
  245   30D6                            
  246   30D6   4C 27 30                 jmp start      ; Start again
  247                           
  248                           ;--------------------------------
  249                           ;Print title screen
  250                           ;--------------------------------
  251                           ;       Print game title
  252                           ;       Print high scores text
  253                           ;       Print high scorelist
  254                           ;--------------------------------
  255                           
  256   30D9                    title:
  257   30D9   A2 F3                    ldx #<banner  ; Print game title
  258   30DB   A0 46                    ldy #>banner
  259   30DD   20 93 56                 jsr PUTSTRING
  260   30E0                            
  261   30E0   A2 0D                    ldx #<hiscr   ; Print high score text
  262   30E2   A0 47                    ldy #>hiscr
  263   30E4   20 93 56                 jsr PUTSTRING
  264                           
  265   30E7   20 07 37                 jsr hiscores  ; Print high scorelist
  266   30EA                            
  267   30EA   60                       rts
  268                           
  269                           ;--------------------------------
  270                           ;Print score
  271                           ;--------------------------------
  272                           ;       Print score text + number on screen
  273                           ;--------------------------------
  274                           
  275   30EB                    printscr:
  276   30EB   A0 00                    ldy #0
  277   30ED   A2 03                    ldx #3
  278   30EF                    prs1:
  279   30EF   BD 44 02                 lda SCORE,x    ; Fill in scorenumber
  280   30F2   20 8E 37                 jsr getnum1
  281   30F5   99 75 47                 sta prtnum+2,y
  282   30F8   C8                       iny     
  283   30F9   BD 44 02                 lda SCORE,x
  284   30FC   29 0F                    and #15
  285   30FE   18                       clc
  286   30FF   69 30                    adc #48
  287   3101   99 75 47                 sta prtnum+2,y
  288   3104   C8                       iny
  289   3105   CA                       dex
  290   3106   10 E7                    bpl prs1
  291                           
  292   3108   A2 73                    ldx #<prtscore ; Print score text + number
  293   310A   A0 47                    ldy #>prtscore
  294   310C   20 93 56                 jsr PUTSTRING
  295                           
  296   310F   60                       rts
  297                           
  298                           ;--------------------------------
  299                           ;Start the game
  300                           ;--------------------------------
  301                           ;       Play until dead
  302                           ;--------------------------------
  303                           
  304   3110                    startgame:
  305   3110   A9 03                    lda #3         ; Init gamevars
  306   3112   8D 4C 02                 sta LIVES
  307   3115                            
  308   3115   A9 00                    lda #0
  309   3117   8D 44 02                 sta SCORE
  310   311A   8D 45 02                 sta SCORE+1
  311   311D   8D 46 02                 sta SCORE+2
  312   3120   8D 47 02                 sta SCORE+3
  313   3123                            
  314   3123   A9 00                    lda #0
  315   3125   8D 4D 02                 sta LEVN              
  316   3128                    gamelp:
  317   3128   A9 D0                    lda #SCRTEXT   ; Init screenmode
  318   312A   20 96 37                 jsr setmode
  319                           
  320   312D   A2 6A                    ldx #<levelstr ; Print LEVEL in middle of screen  
  321   312F   A0 47                    ldy #>levelstr
  322   3131   20 93 56                 jsr PUTSTRING
  323   3134                            
  324   3134   A9 12                    lda #18       ; Print levelnumber
  325   3136   8D 70 00                 sta XPOS
  326   3139   A9 0C                    lda #12
  327   313B   8D 71 00                 sta YPOS
  328   313E   20 36 38                 jsr levnum
  329                           
  330   3141   20 AD 38                 jsr delay     ; Wait 2 sec
  331                           
  332   3144   A9 D0                    lda #SCRGRAPH  ; Init screenmode
  333   3146   20 96 37                 jsr setmode
  334                           
  335   3149   20 A4 37                 jsr clrscr    ; Clear playfield
  336   314C   20 A5 3B                 jsr loadlevel ; Decode level into tmp levelbuffer
  337   314F   20 49 3B                 jsr drawlevel ; Draw level with tiles
  338                           
  339   3152   20 0C 3C                 jsr initsprites ; Initialize sprite data ??????
  340                           
  341   3155   20 EB 30                 jsr printscr  ; Print scoreline
  342   3158                                 
  343   3158   A2 7F                    ldx #<livesstr ; Print lives
  344   315A   A0 47                    ldy #>livesstr
  345   315C   20 93 56                 jsr PUTSTRING
  346   315F   AD 4C 02                 lda LIVES
  347   3162   18                       clc
  348   3163   69 30                    adc #48
  349   3165   A2 1F                    ldx #31
  350   3167   A0 00                    ldy #0
  351   3169   20 DE 56                 jsr PUTCHAR
  352                           
  353   316C   A9 03                    lda #3        ; Print timer
  354   316E   8D 53 02                 sta TIME
  355   3171   A9 39                    lda #'9'
  356   3173   8D 93 47                 sta timenum+2
  357   3176   8D 94 47                 sta timenum+3
  358   3179   8D 95 47                 sta timenum+4
  359   317C   AD 4D 02                 lda LEVN
  360   317F   4A                       lsr a
  361   3180   4A                       lsr a
  362   3181   4A                       lsr a
  363   3182   4A                       lsr a
  364   3183   F0 10                    beq sg2
  365   3185   C9 06                    cmp #6
  366   3187   90 02                    bcc sg1
  367   3189   A9 06                    lda #6
  368   318B                    sg1:
  369   318B   85 60                    sta TMP        
  370   318D   A9 39                    lda #9+48
  371   318F   38                       sec
  372   3190   E5 60                    sbc TMP
  373   3192   8D 93 47                 sta timenum+2
  374   3195                    sg2:
  375   3195   A2 89                    ldx #<timestr
  376   3197   A0 47                    ldy #>timestr
  377   3199   20 93 56                 jsr PUTSTRING
  378                           
  379   319C   A2 98                    ldx #<level2str ; Print levelnumber
  380   319E   A0 47                    ldy #>level2str
  381   31A0   20 93 56                 jsr PUTSTRING
  382   31A3   A9 06                    lda #6
  383   31A5   8D 70 00                 sta XPOS
  384   31A8   A9 17                    lda #23
  385   31AA   8D 71 00                 sta YPOS
  386   31AD   20 36 38                 jsr levnum
  387                           
  388   31B0   A9 80                    lda #128     ; Init game level vars
  389   31B2   8D 62 02                 sta PY
  390   31B5   8D 63 02                 sta OPY
  391                           
  392   31B8   A9 00                    lda #0
  393   31BA   8D 54 02                 sta PX
  394   31BD   8D 55 02                 sta OPX
  395   31C0   8D 56 02                 sta PDY
  396   31C3   8D 57 02                 sta PF
  397   31C6   8D 58 02                 sta OPF
  398   31C9   8D 59 02                 sta PDX
  399   31CC   8D 5A 02                 sta PJ
  400   31CF   8D 5B 02                 sta PDIR
  401   31D2   8D 5C 02                 sta OPDIR
  402   31D5   8D 5D 02                 sta PLAD
  403   31D8   8D 5E 02                 sta OPLAD
  404   31DB   8D 5F 02                 sta PFALL
  405   31DE   8D 60 02                 sta DEAD
  406   31E1   8D 61 02                 sta LADSOLID
  407   31E4                            
  408   31E4   A2 00                    ldx #0      ; Draw Harry facing right
  409   31E6   A0 68                    ldy #128-24     ;!!!!!!!!!!!!!!!!!!!
  410   31E8   85 26                    sta CONVMV
  411   31EA   8D 65 02                 sta BKFRAME
  412   31ED   20 89 3A                 jsr drawsprite
  413                           
  414   31F0   A9 10                    lda #16     ; Init game level vars
  415   31F2   8D 66 02                 sta BKTIME
  416   31F5   A9 32                    lda #50
  417   31F7   8D 67 02                 sta HAYLPTIME
  418   31FA   A9 FF                    lda #255
  419   31FC   8D 69 02                 sta BARRELX
  420   31FF   4A                       lsr a
  421   3200   8D 68 02                 sta BARRELT
  422   3203                    mainl:
  423                           ;       jsr WAITSYNC ; Wait for vert sync
  424                           
  425   3203   AD 4D 02                 lda LEVN
  426   3206   C9 07                    cmp #7
  427   3208   D0 03                    bne nowait
  428   320A   20 66 FE                 jsr WAITSYNC
  429   320D                    nowait:
  430                           
  431   320D                            
  432   320D   AD 58 02                 lda OPF
  433   3210   4A                       lsr a
  434   3211   4A                       lsr a
  435   3212   29 03                    and #3
  436   3214   AA                       tax
  437   3215   BD E4 46                 lda frames,x
  438   3218   18                       clc
  439   3219   AE 5E 02                 ldx OPLAD
  440   321C   D0 07                    bne sg3
  441   321E                                    
  442   321E   6D 5C 02                 adc OPDIR
  443   3221   48                       pha
  444   3222   4C 28 32                 jmp sg4
  445   3225                    sg3:
  446   3225   69 06                    adc #6
  447   3227   48                       pha
  448   3228                    sg4:
  449   3228   AE 55 02                 ldx OPX
  450   322B   AD 63 02                 lda OPY
  451   322E   38                       sec
  452   322F   E9 18                    sbc #24
  453   3231   A8                       tay
  454   3232                           
  455   3232   20 66 FE                 jsr WAITSYNC ; Wait for vert sync
  456   3235   68                       pla
  457   3236   20 89 3A                 jsr drawsprite 
  458                           
  459   3239   AD 57 02                 lda PF
  460   323C   4A                       lsr a
  461   323D   4A                       lsr a
  462   323E   29 03                    and #3
  463   3240   AA                       tax
  464   3241   BD E4 46                 lda frames,x
  465   3244   18                       clc        
  466   3245   AE 5D 02                 ldx PLAD
  467   3248   D0 07                    bne sg5
  468   324A                                    
  469   324A   6D 5B 02                 adc PDIR
  470   324D   48                       pha
  471   324E   4C 54 32                 jmp sg6
  472   3251                    sg5:
  473   3251   69 06                    adc #6
  474   3253   48                       pha
  475   3254                    sg6:
  476   3254   AE 54 02                 ldx PX
  477   3257   AD 62 02                 lda PY
  478   325A   38                       sec
  479   325B   E9 18                    sbc #24
  480   325D   A8                       tay
  481   325E   AD 57 02                 lda PF
  482   3261                            
  483   3261   68                       pla
  484   3262   20 89 3A                 jsr drawsprite 
  485   3265   20 20 39                 jsr runsprites
  486   3268   20 E8 3F                 jsr eventr
  487   326B                    sg7:
  488   326B   AD 54 02                 lda PX   
  489   326E   8D 55 02                 sta OPX
  490   3271   AD 62 02                 lda PY
  491   3274   8D 63 02                 sta OPY
  492   3277   AD 57 02                 lda PF
  493   327A   8D 58 02                 sta OPF
  494   327D   AD 5B 02                 lda PDIR
  495   3280   8D 5C 02                 sta OPDIR
  496   3283   AD 5D 02                 lda PLAD
  497   3286   8D 5E 02                 sta OPLAD
  498   3289                            
  499   3289   AD 62 02                 lda PY
  500   328C   18                       clc
  501   328D   6D 56 02                 adc PDY
  502   3290   8D 62 02                 sta PY
  503   3293   AD 5A 02                 lda PJ
  504   3296   F0 30                    beq sg8
  505   3298                            
  506   3298   AD 54 02                 lda PX
  507   329B   8D 6A 02                 sta TX
  508   329E   EE 6A 02                 inc TX
  509   32A1   EE 6A 02                 inc TX        
  510   32A4   AD 62 02                 lda PY
  511   32A7   38                       sec
  512   32A8   E9 10                    sbc #16
  513   32AA   8D 6B 02                 sta TY
  514   32AD   20 6D 36                 jsr testmap
  515   32B0   F0 16                    beq sg8
  516   32B2                            
  517   32B2   AD 62 02                 lda PY
  518   32B5   38                       sec
  519   32B6   ED 56 02                 sbc PDY
  520   32B9   8D 62 02                 sta PY
  521   32BC   A9 00                    lda #0
  522   32BE   8D 5A 02                 sta PJ
  523   32C1   38                       sec
  524   32C2   ED 56 02                 sbc PDY
  525   32C5   8D 56 02                 sta PDY
  526   32C8                    sg8:
  527   32C8   AD 5D 02                 lda PLAD
  528   32CB   D0 67                    bne nofall
  529                           
  530   32CD   AD 56 02                 lda PDY
  531   32D0   30 62                    bmi nofall
  532                           
  533   32D2   AD 62 02                 lda PY
  534   32D5   8D 6B 02                 sta TY
  535                           
  536   32D8   AE 54 02                 ldx PX
  537   32DB   E8                       inx
  538   32DC   8E 6A 02                 stx TX
  539   32DF                            
  540   32DF   EE 61 02                 inc LADSOLID        
  541   32E2                    dotest:
  542   32E2   20 6D 36                 jsr testmap               
  543   32E5   D0 2A                    bne sg9
  544                           
  545   32E7   AD 62 02                 lda PY
  546   32EA   8D 6B 02                 sta TY
  547                           
  548   32ED   AE 54 02                 ldx PX
  549   32F0   E8                       inx
  550   32F1   E8                       inx
  551   32F2   8E 6A 02                 stx TX
  552   32F5                            
  553   32F5   20 6D 36                 jsr testmap
  554   32F8   D0 17                    bne sg9        
  555                           
  556   32FA   AD 5A 02                 lda PJ
  557   32FD   D0 35                    bne nofall
  558   32FF                            
  559   32FF   AD 56 02                 lda PDY
  560   3302   D0 03                    bne fallon
  561   3304   8D 59 02                 sta PDX
  562   3307                    fallon:
  563   3307   A9 08                    lda #8
  564   3309   8D 56 02                 sta PDY
  565   330C   8D 5F 02                 sta PFALL
  566   330F   D0 23                    bne nofall
  567   3311                    sg9:
  568   3311   AD 62 02                 lda PY
  569   3314   29 F0                    and #$F0
  570   3316   85 67                    sta TMP+7
  571   3318   AD 63 02                 lda OPY
  572   331B   29 F0                    and #$F0
  573   331D   C5 67                    cmp TMP+7
  574   331F   B0 13                    bcs nofall
  575                           
  576   3321   A9 00                    lda #0
  577   3323   8D 56 02                 sta PDY
  578   3326   8D 5A 02                 sta PJ
  579   3329   8D 5F 02                 sta PFALL
  580   332C                            
  581   332C   AD 62 02                 lda PY
  582   332F   29 F0                    and #$F0
  583   3331   8D 62 02                 sta PY
  584   3334                    nofall:
  585   3334   A9 00                    lda #0
  586   3336   8D 61 02                 sta LADSOLID
  587                           
  588   3339   AD 54 02                 lda PX
  589   333C   18                       clc
  590   333D   6D 59 02                 adc PDX
  591   3340   8D 54 02                 sta PX
  592   3343                            
  593   3343   C9 3E                    cmp #62    ; Check border right  !!!!!!!!!!!!!!!!!!!
  594   3345   B0 38                    bcs revx
  595                           
  596   3347   AD 59 02                 lda PDX
  597   334A   10 04                    bpl chkrht
  598   334C   A9 FF                    lda #$FF
  599   334E   D0 02                    bne dochk
  600   3350                    chkrht:
  601   3350   A9 02                    lda #2
  602   3352                    dochk:
  603   3352   18                       clc
  604   3353   6D 54 02                 adc PX
  605   3356   85 65                    sta TMP+5
  606   3358                            
  607   3358   A5 65                    lda TMP+5
  608   335A   8D 6A 02                 sta TX
  609   335D   AE 62 02                 ldx PY
  610   3360   CA                       dex
  611   3361   8E 6B 02                 stx TY
  612   3364   20 6D 36                 jsr testmap
  613   3367   D0 16                    bne revx
  614                           
  615   3369   A5 65                    lda TMP+5
  616   336B   8D 6A 02                 sta TX
  617   336E   AD 62 02                 lda PY
  618   3371   38                       sec
  619   3372   E9 0F                    sbc #15
  620   3374   8D 6B 02                 sta TY
  621   3377   20 6D 36                 jsr testmap
  622   337A   D0 03                    bne revx
  623   337C                                    
  624   337C   4C 82 33                 jmp sg10
  625   337F                    revx:
  626   337F   20 BD 37                 jsr reversex
  627   3382                    sg10:
  628   3382   AD 59 02                 lda PDX
  629   3385   F0 06                    beq sg11
  630   3387                            
  631   3387   EE 57 02                 inc PF
  632   338A   EE 57 02                 inc PF
  633   338D                    sg11:
  634   338D   AD 5A 02                 lda PJ
  635   3390   F0 19                    beq nojump
  636   3392                            
  637   3392   EE 56 02                 inc PDY    ;Update jump position
  638   3395   D0 03                    bne sg12
  639   3397   EE 56 02                 inc PDY
  640   339A                    sg12:
  641   339A   AD 56 02                 lda PDY
  642   339D   C9 08                    cmp #8
  643   339F   D0 0A                    bne nojump
  644   33A1   A9 00                    lda #0
  645   33A3   8D 5A 02                 sta PJ
  646   33A6   A9 01                    lda #1
  647   33A8   8D 5F 02                 sta PFALL
  648   33AB                    nojump:
  649   33AB   AD 5F 02                 lda PFALL
  650   33AE   0D 5A 02                 ora PJ
  651   33B1   D0 26                    bne sg13
  652   33B3                            
  653   33B3   A9 00                    lda #0
  654   33B5   8D 56 02                 sta PDY
  655                           
  656   33B8   AD 01 B0                 lda $b001  ;Wait for 'SHIFT'
  657   33BB   29 80                    and #$80
  658   33BD   D0 1A                    bne sg13
  659   33BF                            
  660   33BF   20 D1 37                 jsr getx
  661   33C2                            
  662   33C2   A9 01                    lda #1
  663   33C4   8D 5A 02                 sta PJ
  664   33C7   A9 FA                    lda #250
  665   33C9   8D 56 02                 sta PDY
  666   33CC   A9 00                    lda #0
  667   33CE   8D 5D 02                 sta PLAD
  668                           
  669   33D1   A2 01                    ldx #1
  670   33D3   20 65 45                 jsr sound
  671   33D6                            
  672   33D6   4C EB 34                 jmp doneflr     
  673   33D9                    sg13:
  674   33D9   A2 02                    ldx #2     ; Up-key
  675   33DB   20 FB 37                 jsr getkey
  676   33DE   D0 2E                    bne sg14
  677   33E0   20 4C 36                 jsr onladder
  678   33E3   F0 03                    beq sg13a
  679   33E5   4C 69 34                 jmp noladd
  680   33E8                    sg13a:
  681   33E8   EE 54 02                 inc PX
  682   33EB   AD 54 02                 lda PX
  683   33EE   29 FC                    and #$FC
  684   33F0   8D 54 02                 sta PX
  685   33F3                                    
  686   33F3   A9 01                    lda #1
  687   33F5   8D 5D 02                 sta PLAD
  688   33F8                                    
  689   33F8   A9 FE                    lda #$FE
  690   33FA   8D 56 02                 sta PDY
  691   33FD   A9 00                    lda #0
  692   33FF   8D 59 02                 sta PDX
  693   3402   8D 5A 02                 sta PJ
  694   3405   8D 5F 02                 sta PFALL
  695   3408   EE 57 02                 inc PF
  696   340B   4C B0 34                 jmp nomovex
  697   340E                    sg14:
  698   340E   A2 03                    ldx #3      ;Down-key
  699   3410   20 FB 37                 jsr getkey
  700   3413   D0 49                    bne sg16
  701                           
  702   3415   EE 62 02                 inc PY
  703   3418   EE 62 02                 inc PY
  704   341B   20 4C 36                 jsr onladder
  705   341E   08                       php
  706   341F   CE 62 02                 dec PY  
  707   3422   CE 62 02                 dec PY  
  708   3425   28                       plp
  709   3426   D0 41                    bne noladd
  710   3428                            
  711   3428   AD 54 02                 lda PX
  712   342B   18                       clc
  713   342C   69 01                    adc #1
  714   342E   29 FC                    and #$FC
  715   3430   8D 54 02                 sta PX
  716                           
  717   3433   A9 01                    lda #1
  718   3435   8D 5D 02                 sta PLAD
  719   3438                            
  720   3438   A9 02                    lda #2
  721   343A   8D 56 02                 sta PDY
  722   343D   A9 00                    lda #0
  723   343F   8D 59 02                 sta PDX
  724   3442   8D 5A 02                 sta PJ
  725   3445   8D 5F 02                 sta PFALL
  726   3448   CE 57 02                 dec PF
  727                           
  728   344B   20 67 36                 jsr checkfloor
  729   344E   D0 03                    bne sg15
  730   3450   4C B0 34                 jmp nomovex
  731   3453                    sg15:
  732   3453   A9 00                    lda #0
  733   3455   8D 56 02                 sta PDY
  734   3458   8D 5D 02                 sta PLAD
  735   345B   4C B0 34                 jmp nomovex
  736   345E                    sg16:
  737   345E   AD 5D 02                 lda PLAD
  738   3461   0D 5A 02                 ora PJ
  739   3464   0D 5F 02                 ora PFALL
  740   3467   D0 47                    bne keydone
  741   3469                    noladd:
  742   3469   A9 00                    lda #0
  743   346B   8D 5D 02                 sta PLAD
  744   346E                            
  745   346E   AD 56 02                 lda PDY        ;Don't test Z/X if moving vertically
  746   3471   D0 3D                    bne nomovex
  747                           
  748   3473   A2 00                    ldx #0         ; Left-key
  749   3475   20 FB 37                 jsr getkey
  750   3478   D0 14                    bne sg17
  751                           
  752   347A   AD 54 02                 lda PX
  753   347D   C9 00                    cmp #0         ; Left border 0/4=0
  754   347F   F0 27                    beq sg18
  755   3481                            
  756   3481   A9 FF                    lda #255
  757   3483   8D 59 02                 sta PDX
  758   3486   A9 03                    lda #3
  759   3488   8D 5B 02                 sta PDIR        
  760   348B                            
  761   348B   4C B0 34                 jmp keydone
  762   348E                    sg17:
  763   348E   A2 01                    ldx #1         ; Right-key
  764   3490   20 FB 37                 jsr getkey
  765   3493   D0 13                    bne sg18
  766   3495                            
  767   3495   AD 54 02                 lda PX
  768   3498   C9 3C                    cmp #60        ; Right border 60/4=15
  769   349A   F0 0C                    beq sg18
  770   349C                            
  771   349C   A2 01                    ldx #1
  772   349E   8E 59 02                 stx PDX
  773   34A1   CA                       dex
  774   34A2   8E 5B 02                 stx PDIR
  775   34A5                            
  776   34A5   4C B0 34                 jmp keydone
  777   34A8                    sg18:
  778   34A8   A9 00                    lda #0
  779   34AA   8D 57 02                 sta PF
  780   34AD   8D 59 02                 sta PDX
  781   34B0                    keydone:
  782   34B0                            
  783   34B0                    nomovex:
  784   34B0   AD 5A 02                 lda PJ      ;Skip conveyor if jumping or falling
  785   34B3   0D 5F 02                 ora PFALL
  786   34B6   D0 33                    bne doneflr
  787   34B8                            
  788   34B8   20 5C 36                 jsr getfloor
  789   34BB                            
  790   34BB   C9 04                    cmp #4      ; Conveyor right
  791   34BD   F0 08                    beq sg20
  792   34BF   C9 05                    cmp #5      ; Conveyor right
  793   34C1   F0 04                    beq sg20
  794   34C3   C9 06                    cmp #6      ; Conveyor right
  795   34C5   D0 0C                    bne sg21
  796   34C7                    sg20:
  797   34C7   A5 26                    lda CONVMV
  798   34C9   C9 02                    cmp #2
  799   34CB   90 1E                    bcc doneflr
  800   34CD   EE 59 02                 inc PDX
  801   34D0   4C EB 34                 jmp doneflr
  802   34D3                    sg21:
  803   34D3   C9 07                    cmp #7      ; Conveyor left
  804   34D5   F0 08                    beq sg22
  805   34D7   C9 08                    cmp #8      ; Conveyor left
  806   34D9   F0 04                    beq sg22
  807   34DB   C9 09                    cmp #9      ; Conveyor left
  808   34DD   D0 0C                    bne sg23
  809   34DF                    sg22:
  810   34DF   A5 26                    lda CONVMV
  811   34E1   C9 02                    cmp #2
  812   34E3   90 06                    bcc doneflr
  813   34E5   CE 59 02                 dec PDX
  814   34E8   4C EB 34                 jmp doneflr                 
  815   34EB                    doneflr:        
  816   34EB                    sg23:
  817   34EB   78                       sei
  818   34EC   A5 26                    lda CONVMV
  819   34EE   C9 02                    cmp #2
  820   34F0   90 04                    bcc sg24
  821   34F2   C6 26                    dec CONVMV
  822   34F4   C6 26                    dec CONVMV        
  823   34F6                    sg24:
  824   34F6   58                       cli
  825                           
  826   34F7   AD 62 02                 lda PY
  827   34FA   C9 B0                    cmp #176    ; Check lower then bottomline !!!!!!!!!!!!!!!
  828   34FC   90 08                    bcc sg25
  829   34FE                            
  830   34FE   EE 60 02                 inc DEAD
  831                           
  832   3501   A2 04                    ldx #4
  833   3503   20 65 45                 jsr sound
  834   3506                    sg25:
  835   3506   CE 53 02                 dec TIME    ; Decrement timer
  836   3509   D0 36                    bne sg26
  837   350B   A9 03                    lda #3
  838   350D   8D 53 02                 sta TIME        
  839   3510   AD 95 47                 lda timenum+4
  840   3513   38                       sec
  841   3514   E9 01                    sbc #1
  842   3516   8D 95 47                 sta timenum+4
  843   3519   C9 2F                    cmp #47
  844   351B   D0 24                    bne sg26
  845   351D   A9 39                    lda #'9'
  846   351F   8D 95 47                 sta timenum+4
  847   3522   AD 94 47                 lda timenum+3
  848   3525   38                       sec
  849   3526   E9 01                    sbc #1
  850   3528   8D 94 47                 sta timenum+3
  851   352B   C9 2F                    cmp #47
  852   352D   D0 12                    bne sg26
  853   352F   A9 39                    lda #'9'
  854   3531   8D 94 47                 sta timenum+3
  855   3534   AD 93 47                 lda timenum+2
  856   3537   38                       sec
  857   3538   E9 01                    sbc #1
  858   353A   8D 93 47                 sta timenum+2
  859   353D   C9 2F                    cmp #47
  860   353F   F0 28                    beq die
  861   3541                    sg26:
  862   3541   A2 89                    ldx #<timestr
  863   3543   A0 47                    ldy #>timestr
  864   3545   20 93 56                 jsr PUTSTRING
  865                           
  866   3548   20 EB 30                 jsr printscr ; Print score
  867                           
  868   354B   AD 4E 02                 lda LUNCH    ; Check if got all lunchboxes
  869   354E   F0 31                    beq finlev
  870   3550                                   
  871   3550   AE 62 02                 ldx PY
  872   3553   CA                       dex
  873   3554   8E 6B 02                 stx TY
  874   3557                            
  875   3557   AE 54 02                 ldx PX
  876   355A   E8                       inx
  877   355B   8E 6A 02                 stx TX
  878   355E                            
  879   355E   20 6D 36                 jsr testmap
  880                           
  881   3561   AD 60 02                 lda DEAD     ; Last live spent
  882   3564   D0 03                    bne die
  883   3566                    sg27:
  884   3566   4C 03 32                 jmp mainl
  885   3569                    die:
  886   3569   CE 4C 02                 dec LIVES      ; Decrement lives
  887   356C   F0 03                    beq sg28       ; If last, end
  888                           
  889   356E   4C 28 31                 jmp gamelp
  890   3571                    sg28:
  891   3571   A9 D0                    lda #SCRTEXT   ; Init screenmode
  892   3573   20 96 37                 jsr setmode
  893                           
  894   3576   A2 A2                    ldx #<gameovr  ; Gameover, restart
  895   3578   A0 47                    ldy #>gameovr
  896   357A   20 93 56                 jsr PUTSTRING
  897   357D   20 AD 38                 jsr delay
  898   3580                            
  899   3580   60                       rts
  900                           
  901                           ;--------------------------------
  902                           ;Level finished, go to next level
  903                           ;--------------------------------
  904                           
  905   3581                    finlev:
  906   3581   A2 28                    ldx #40
  907   3583   20 AF 38                 jsr delay2
  908                           
  909   3586                    finlevl:
  910   3586   20 66 FE                 jsr WAITSYNC
  911                           
  912   3589   A2 06                    ldx #6
  913   358B   20 65 45                 jsr sound
  914   358E                    finlp:
  915   358E   A9 08                    lda #8
  916   3590   85 61                    sta TMP+1
  917   3592                    finlp2:
  918   3592   AD 93 47                 lda timenum+2
  919   3595   38                       sec
  920   3596   E9 30                    sbc #48
  921   3598   85 60                    sta TMP
  922   359A   AD 94 47                 lda timenum+3
  923   359D   38                       sec
  924   359E   E9 30                    sbc #48
  925   35A0   05 60                    ora TMP
  926   35A2   85 60                    sta TMP
  927   35A4   AD 95 47                 lda timenum+4
  928   35A7   38                       sec
  929   35A8   E9 30                    sbc #48
  930   35AA   05 60                    ora TMP
  931   35AC   F0 61                    beq timeovr
  932   35AE                            
  933   35AE   AD 95 47                 lda timenum+4
  934   35B1   38                       sec
  935   35B2   E9 01                    sbc #1
  936   35B4   8D 95 47                 sta timenum+4
  937   35B7   C9 2F                    cmp #47
  938   35B9   D0 20                    bne fl1
  939   35BB   A9 39                    lda #'9'
  940   35BD   8D 95 47                 sta timenum+4
  941   35C0   AD 94 47                 lda timenum+3
  942   35C3   38                       sec
  943   35C4   E9 01                    sbc #1
  944   35C6   8D 94 47                 sta timenum+3
  945   35C9   C9 2F                    cmp #47
  946   35CB   D0 0E                    bne fl1
  947   35CD   A9 39                    lda #'9'
  948   35CF   8D 94 47                 sta timenum+3
  949   35D2   AD 93 47                 lda timenum+2
  950   35D5   38                       sec
  951   35D6   E9 01                    sbc #1
  952   35D8   8D 93 47                 sta timenum+2
  953   35DB                    fl1:
  954   35DB   F8                       sed
  955   35DC   AD 44 02                 lda SCORE
  956   35DF   18                       clc
  957   35E0   69 10                    adc #$10
  958   35E2   8D 44 02                 sta SCORE
  959   35E5   AD 45 02                 lda SCORE+1
  960   35E8   69 00                    adc #0
  961   35EA   8D 45 02                 sta SCORE+1
  962   35ED   AD 46 02                 lda SCORE+2
  963   35F0   69 00                    adc #0
  964   35F2   8D 46 02                 sta SCORE+2
  965   35F5   AD 47 02                 lda SCORE+3
  966   35F8   69 00                    adc #0
  967   35FA   8D 47 02                 sta SCORE+3
  968   35FD   D8                       cld
  969                           
  970   35FE   C6 61                    dec TMP+1
  971   3600   D0 90                    bne finlp2       
  972   3602                            
  973   3602   A2 89                    ldx #<timestr
  974   3604   A0 47                    ldy #>timestr
  975   3606   20 93 56                 jsr PUTSTRING        
  976   3609                            
  977   3609   20 EB 30                 jsr printscr
  978                           
  979   360C   4C 86 35                 jmp finlevl         
  980                           
  981   360F                    timeovr:
  982   360F   A2 89                    ldx #<timestr
  983   3611   A0 47                    ldy #>timestr
  984   3613   20 93 56                 jsr PUTSTRING        
  985                           
  986   3616   20 EB 30                 jsr printscr        
  987                           
  988   3619   20 AD 38                 jsr delay
  989   361C                            
  990   361C   EE 4D 02                 inc LEVN
  991   361F                            
  992   361F   4C 28 31                 jmp gamelp
  993                           
  994                           ;--------------------------------
  995                           ;Get tile at player position
  996                           ;--------------------------------
  997                           
  998   3622                    getpy:
  999                           ; !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 1000   3622   4A                       lsr a       ; PY/16 is tile pos
 1001   3623   4A                       lsr a
 1002   3624   4A                       lsr a
 1003   3625   4A                       lsr a
 1004                           
 1005   3626   0A                       asl a       ; leveldatarow = PY*16 + PY*4 = PY*20
 1006   3627   0A                       asl a
 1007   3628   85 60                    sta TMP
 1008   362A                            
 1009   362A   0A                       asl a
 1010   362B   0A                       asl a
 1011   362C   26 81                    rol ADDR+1
 1012   362E   18                       clc
 1013   362F   65 60                    adc TMP
 1014   3631   90 02                    bcc gp1
 1015   3633   E6 81                    inc ADDR+1
 1016   3635                    gp1:
 1017   3635   18                       clc
 1018   3636   69 00                    adc #<level        
 1019   3638   85 80                    sta ADDR
 1020   363A   A5 81                    lda ADDR+1
 1021   363C   69 04                    adc #>level
 1022   363E   85 81                    sta ADDR+1
 1023   3640                           
 1024   3640   AD 54 02                 lda PX      ; leveldatacol = PX/4
 1025   3643   18                       clc
 1026   3644   69 01                    adc #1
 1027   3646   4A                       lsr a
 1028   3647   4A                       lsr a
 1029   3648   A8                       tay
 1030                           ; !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 1031   3649                            
 1032   3649   B1 80                    lda (ADDR),y
 1033   364B   60                       rts
 1034                           
 1035                           ;--------------------------------
 1036                           ;If Harry is on ladder
 1037                           ;--------------------------------
 1038                           
 1039   364C                    onladder:
 1040   364C   A9 00                    lda #0
 1041   364E   85 81                    sta ADDR+1
 1042   3650   AD 62 02                 lda PY
 1043   3653   38                       sec
 1044   3654   E9 01                    sbc #1
 1045   3656   20 22 36                 jsr getpy
 1046   3659   C9 03                    cmp #3
 1047   365B   60                       rts
 1048   365C                            
 1049                           ;--------------------------------
 1050                           ;Floor routines
 1051                           ;--------------------------------
 1052                           
 1053   365C                    getfloor:
 1054   365C   A9 00                    lda #0
 1055   365E   85 81                    sta ADDR+1
 1056   3660   AD 62 02                 lda PY
 1057   3663   20 22 36                 jsr getpy        
 1058   3666   60                       rts
 1059                           
 1060   3667                    checkfloor:
 1061   3667   20 5C 36                 jsr getfloor
 1062   366A   C9 03                    cmp #3
 1063   366C   60                       rts
 1064                           
 1065                           ;--------------------------------
 1066                           ;Test floor under Harry
 1067                           ;--------------------------------
 1068                           
 1069   366D                    testmap:
 1070   366D   A9 00                    lda #0
 1071   366F   85 80                    sta ADDR
 1072   3671   85 81                    sta ADDR+1
 1073   3673                            
 1074                           ; !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 1075   3673   AD 6B 02                 lda TY         ; TY/16 is tilepos
 1076   3676   4A                       lsr a
 1077   3677   4A                       lsr a
 1078   3678   4A                       lsr a
 1079   3679   4A                       lsr a
 1080   367A   8D 6B 02                 sta TY         ; leveldatarow = TY*16 + TY*4 = TY*20
 1081   367D   0A                       asl a
 1082   367E   0A                       asl a
 1083   367F   85 60                    sta TMP
 1084   3681                            
 1085   3681   0A                       asl a
 1086   3682   0A                       asl a
 1087   3683   26 81                    rol ADDR+1
 1088   3685   18                       clc
 1089   3686   65 60                    adc TMP
 1090   3688   90 02                    bcc tm1
 1091   368A   E6 81                    inc ADDR+1
 1092   368C                    tm1:
 1093   368C   18                       clc
 1094   368D   69 00                    adc #<level        
 1095   368F   85 80                    sta ADDR
 1096   3691   A5 81                    lda ADDR+1
 1097   3693   69 04                    adc #>level
 1098   3695   85 81                    sta ADDR+1      
 1099                           
 1100   3697   AD 6A 02                 lda TX         ; levelcolumn = TX/4
 1101   369A   4A                       lsr a
 1102   369B   4A                       lsr a
 1103   369C   8D 6A 02                 sta TX
 1104   369F   A8                       tay        
 1105                           ; !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 1106                           
 1107   36A0                    testsolid:
 1108   36A0   B1 80                    lda (ADDR),y
 1109   36A2   C9 03                    cmp #3        
 1110   36A4   F0 09                    beq tm2
 1111   36A6   C9 0A                    cmp #10
 1112   36A8   F0 1F                    beq getlunch                            
 1113   36AA   A8                       tay
 1114   36AB   B9 E8 46                 lda solid,y
 1115                           
 1116   36AE   60                       rts
 1117   36AF                    tm2:
 1118   36AF   AD 61 02                 lda LADSOLID
 1119   36B2   F0 0F                    beq itszero
 1120   36B4   A5 80                    lda ADDR
 1121   36B6   38                       sec
 1122   36B7   E9 14                    sbc #SCR_W
 1123   36B9   85 80                    sta ADDR
 1124   36BB   B0 02                    bcs tm3
 1125   36BD   C6 81                    dec ADDR+1
 1126   36BF                    tm3:
 1127   36BF   B1 80                    lda (ADDR),y
 1128   36C1   F0 03                    beq tm4
 1129   36C3                    itszero:
 1130   36C3   A9 00                    lda #0
 1131   36C5   60                       rts
 1132   36C6                    tm4:
 1133   36C6   A9 01                    lda #1 
 1134   36C8   60                       rts
 1135                           
 1136                           ;--------------------------------
 1137                           ;Remove lunchbox and increment score
 1138                           ;--------------------------------
 1139                           
 1140   36C9                    getlunch:
 1141   36C9   A9 00                    lda #0
 1142   36CB   91 80                    sta (ADDR),y
 1143                           
 1144   36CD   AD 6A 02                 lda TX
 1145   36D0   0A                       asl a
 1146   36D1   85 80                    sta ADDR
 1147   36D3   AD 6B 02                 lda TY
 1148   36D6   0A                       asl a
 1149   36D7   18                       clc
 1150   36D8   69 81                    adc #>TOPSCR
 1151   36DA   85 81                    sta ADDR+1
 1152                           
 1153   36DC   A9 0A                    lda #10
 1154   36DE   20 B6 38                 jsr drawtile
 1155   36E1                            
 1156   36E1   F8                       sed
 1157   36E2   AD 45 02                 lda SCORE+1
 1158   36E5   18                       clc
 1159   36E6   69 02                    adc #2
 1160   36E8   8D 45 02                 sta SCORE+1
 1161   36EB   AD 46 02                 lda SCORE+2
 1162   36EE   69 00                    adc #0
 1163   36F0   8D 46 02                 sta SCORE+2
 1164   36F3   AD 47 02                 lda SCORE+3
 1165   36F6   69 00                    adc #0
 1166   36F8   8D 47 02                 sta SCORE+3
 1167   36FB   D8                       cld        
 1168                           
 1169   36FC   CE 4E 02                 dec LUNCH
 1170   36FF                            
 1171   36FF   A2 05                    ldx #5
 1172   3701   20 65 45                 jsr sound
 1173                           
 1174   3704   A9 00                    lda #0
 1175   3706                                            
 1176   3706   60                       rts
 1177                           
 1178                           ;--------------------------------
 1179                           ;Print highscore list
 1180                           ;--------------------------------
 1181                           
 1182   3707                    hiscores:
 1183   3707   A9 00                    lda #0
 1184   3709   85 60                    sta TMP
 1185   370B                    scrlp:
 1186   370B   A5 60                    lda TMP
 1187   370D   18                       clc
 1188   370E   69 06                    adc #6
 1189   3710   8D 1D 47                 sta hiline+1
 1190   3713                            
 1191   3713   C9 0F                    cmp #15
 1192   3715   D0 0D                    bne not10
 1193   3717                            
 1194   3717   A9 31                    lda #49
 1195   3719   8D 1E 47                 sta hiline+2
 1196   371C   A9 30                    lda #48
 1197   371E   8D 1F 47                 sta hiline+3
 1198   3721   4C 31 37                 jmp scr1
 1199   3724                            
 1200   3724   A9 20            not10:  lda #32
 1201   3726   8D 1E 47                 sta hiline+2
 1202   3729   A5 60                    lda TMP
 1203   372B   18                       clc
 1204   372C   69 31                    adc #49
 1205   372E   8D 1F 47                 sta hiline+3
 1206   3731                    scr1:
 1207   3731   A6 60                    ldx TMP
 1208   3733   BD 00 03                 lda hiname1,x
 1209   3736   8D 23 47                 sta hiline+7
 1210   3739   BD 0A 03                 lda hiname2,x
 1211   373C   8D 24 47                 sta hiline+8
 1212   373F   BD 14 03                 lda hiname3,x
 1213   3742   8D 25 47                 sta hiline+9
 1214                           
 1215   3745   BD 20 03                 lda hibyte1,x
 1216   3748   8D 48 02                 sta NUM
 1217   374B   BD 2A 03                 lda hibyte2,x        
 1218   374E   8D 49 02                 sta NUM+1
 1219   3751   BD 34 03                 lda hibyte3,x       
 1220   3754   8D 4A 02                 sta NUM+2
 1221   3757   BD 40 03                 lda hibyte4,x       
 1222   375A   8D 4B 02                 sta NUM+3
 1223                           
 1224   375D   20 70 37                 jsr printnum       
 1225                           
 1226   3760   A2 1C                    ldx #<hiline
 1227   3762   A0 47                    ldy #>hiline
 1228   3764   20 93 56                 jsr PUTSTRING
 1229                           
 1230   3767   E6 60                    inc TMP
 1231   3769   A5 60                    lda TMP
 1232   376B   C9 0A                    cmp #10
 1233   376D   D0 9C                    bne scrlp
 1234   376F   60                       rts
 1235                           
 1236   3770                    printnum:
 1237   3770   A0 00                    ldy #0
 1238   3772   A2 03                    ldx #3
 1239   3774                    prn1:
 1240   3774   BD 48 02                 lda NUM,x
 1241   3777   20 8E 37                 jsr getnum1
 1242   377A   99 28 47                 sta hiline+12,y
 1243   377D   C8                       iny     
 1244   377E   BD 48 02                 lda NUM,x
 1245   3781   29 0F                    and #15
 1246   3783   18                       clc
 1247   3784   69 30                    adc #48
 1248   3786   99 28 47                 sta hiline+12,y
 1249   3789   C8                       iny
 1250   378A   CA                       dex
 1251   378B   10 E7                    bpl prn1
 1252   378D   60                       rts
 1253                           
 1254   378E                    getnum1:         
 1255   378E   4A                       lsr a
 1256   378F   4A                       lsr a
 1257   3790   4A                       lsr a
 1258   3791   4A                       lsr a
 1259   3792   18                       clc
 1260   3793   69 30                    adc #48
 1261   3795   60                       rts
 1262                           
 1263                           ;--------------------------------
 1264                           ;Set mode and clear screen
 1265                           ;--------------------------------
 1266                           
 1267   3796                    setmode:
 1268   3796   8D 00 B0                 sta $b000
 1269   3799   A9 00                    lda #<$8000
 1270   379B   85 60                    sta TMP
 1271   379D   A9 80                    lda #>$8000
 1272   379F   85 61                    sta TMP+1
 1273   37A1   4C AC 37                 jmp sm1
 1274   37A4                    clrscr:
 1275   37A4   A9 00                    lda #<TOPSCR
 1276   37A6   85 60                    sta TMP
 1277   37A8   A9 81                    lda #>TOPSCR
 1278   37AA   85 61                    sta TMP+1
 1279   37AC                    sm1:
 1280   37AC   A9 00                    lda #0
 1281   37AE   A8                       tay
 1282   37AF                    sm2:
 1283   37AF   91 60                    sta (TMP),y
 1284   37B1   C8                       iny
 1285   37B2   D0 FB                    bne sm2
 1286   37B4   E6 61                    inc TMP+1
 1287   37B6   A5 61                    lda TMP+1
 1288   37B8   C9 98                    cmp #$98
 1289   37BA   D0 F0                    bne sm1
 1290   37BC   60                       rts
 1291                           
 1292                           ;--------------------------------
 1293                           ;Reverse X-dir
 1294                           ;--------------------------------
 1295                           
 1296   37BD                    reversex:
 1297   37BD   AD 54 02                 lda PX 
 1298   37C0   38                       sec
 1299   37C1   ED 59 02                 sbc PDX
 1300   37C4   8D 54 02                 sta PX
 1301   37C7                            
 1302   37C7   A9 00                    lda #0
 1303   37C9   38                       sec
 1304   37CA   ED 59 02                 sbc PDX
 1305   37CD   8D 59 02                 sta PDX
 1306   37D0   60                       rts         
 1307                           
 1308                           ;--------------------------------
 1309                           ;Get Z- or X-key
 1310                           ;--------------------------------
 1311                           
 1312   37D1                    getx:
 1313   37D1   A2 00                    ldx #0 ;'Z'
 1314   37D3   20 FB 37                 jsr getkey
 1315   37D6   D0 0B                    bne gkx1
 1316   37D8                            
 1317   37D8   A9 FF                    lda #255
 1318   37DA   8D 59 02                 sta PDX
 1319   37DD   A9 03                    lda #3
 1320   37DF   8D 5B 02                 sta PDIR
 1321   37E2   60                       rts
 1322   37E3                    gkx1:
 1323   37E3   A2 01                    ldx #1 ;'X'
 1324   37E5   20 FB 37                 jsr getkey
 1325   37E8   D0 0B                    bne gkx2
 1326   37EA                            
 1327   37EA   A9 01                    lda #1
 1328   37EC   8D 59 02                 sta PDX
 1329   37EF   A9 00                    lda #0
 1330   37F1   8D 5B 02                 sta PDIR
 1331   37F4   60                       rts
 1332   37F5                    gkx2:
 1333   37F5   A9 00                    lda #0
 1334   37F7   8D 59 02                 sta PDX
 1335   37FA   60                       rts             
 1336                           
 1337                           ;--------------------------------
 1338                           ;Getkey and store result in KEY
 1339                           ;--------------------------------
 1340                           
 1341   37FB                    getkey:
 1342   37FB   86 60                    stx TMP
 1343   37FD   20 71 FE                 jsr OSRDKEY
 1344   3800   8C 42 02                 sty KEY
 1345   3803   98                       tya
 1346   3804   A6 60                    ldx TMP
 1347   3806   DD 0A 38                 cmp keys,x
 1348   3809   60                       rts
 1349                           
 1350                           ;            Z   X   ;;  >. RET SPC
 1351   380A   3A 38 1B 1E 0D   keys: .BYTE $3a,$38,$1b,$1e,$0d,$00
        380F   00 
 1352                           
 1353                           ;--------------------------------
 1354                           ;Find highscore
 1355                           ;--------------------------------
 1356                           
 1357   3810   A2 09            findhi: ldx #9
 1358   3812   F8                       sed
 1359   3813                    fh1:
 1360   3813   BD 20 03                 lda hibyte1,x
 1361   3816   38                       sec
 1362   3817   ED 44 02                 sbc SCORE
 1363   381A   BD 2A 03                 lda hibyte2,x
 1364   381D   ED 45 02                 sbc SCORE+1
 1365   3820   BD 34 03                 lda hibyte3,x
 1366   3823   ED 46 02                 sbc SCORE+2
 1367   3826   BD 40 03                 lda hibyte4,x
 1368   3829   ED 47 02                 sbc SCORE+3
 1369   382C   10 05                    bpl fh2
 1370   382E                            
 1371   382E   CA                       dex
 1372   382F   10 E2                    bpl fh1
 1373   3831                            
 1374   3831   A2 FF                    ldx #$FF
 1375   3833                    fh2:
 1376   3833   E8                       inx
 1377   3834   D8                       cld
 1378   3835   60                       rts
 1379                           
 1380                           ;--------------------------------
 1381                           ;Print levelnumber
 1382                           ;--------------------------------
 1383                           
 1384   3836                    levnum:
 1385   3836   AD 4D 02                 lda LEVN
 1386   3839   18                       clc
 1387   383A   69 01                    adc #1
 1388   383C   A2 00                    ldx #0
 1389   383E                    ln1:
 1390   383E   C9 0A                    cmp #10
 1391   3840   90 07                    bcc ln2
 1392   3842   E8                       inx
 1393   3843   38                       sec
 1394   3844   E9 0A                    sbc #10
 1395   3846   4C 3E 38                 jmp ln1
 1396                           
 1397   3849                    ln2:
 1398   3849   48                       pha
 1399   384A   8A                       txa
 1400   384B   F0 0C                    beq ln3
 1401   384D   18                       clc
 1402   384E   69 30                    adc #48
 1403   3850   AE 70 00                 ldx XPOS
 1404   3853   AC 71 00                 ldy YPOS
 1405   3856   20 DE 56                 jsr PUTCHAR
 1406   3859                            
 1407   3859                    ln3:
 1408   3859   68                       pla
 1409   385A   18                       clc
 1410   385B   69 30                    adc #48
 1411   385D   AE 70 00                 ldx XPOS
 1412   3860   E8                       inx
 1413   3861   AC 71 00                 ldy YPOS
 1414   3864   20 DE 56                 jsr PUTCHAR
 1415   3867                            
 1416   3867   60                       rts
 1417                           
 1418                           ;--------------------------------
 1419                           ;Move score from X down        
 1420                           ;--------------------------------
 1421                           
 1422   3868                    movehi:
 1423   3868   E0 09                    cpx #9
 1424   386A   D0 01                    bne mh1
 1425   386C   60                       rts
 1426   386D                    mh1:
 1427   386D   86 60                    stx TMP
 1428   386F   A0 08                    ldy #8
 1429   3871                    mh2:
 1430   3871   B9 00 03                 lda hiname1,y
 1431   3874   99 01 03                 sta hiname1+1,y
 1432   3877   B9 0A 03                 lda hiname2,y
 1433   387A   99 0B 03                 sta hiname2+1,y
 1434   387D   B9 14 03                 lda hiname3,y
 1435   3880   99 15 03                 sta hiname3+1,y
 1436   3883   B9 20 03                 lda hibyte1,y
 1437   3886   99 21 03                 sta hibyte1+1,y
 1438   3889   B9 2A 03                 lda hibyte2,y
 1439   388C   99 2B 03                 sta hibyte2+1,y
 1440   388F   B9 34 03                 lda hibyte3,y
 1441   3892   99 35 03                 sta hibyte3+1,y
 1442   3895   B9 40 03                 lda hibyte4,y
 1443   3898   99 41 03                 sta hibyte4+1,y
 1444   389B                            
 1445   389B   88                       dey
 1446   389C   30 04                    bmi mh3
 1447   389E                            
 1448   389E   C4 60                    cpy TMP
 1449   38A0   B0 CF                    bcs mh2
 1450   38A2                    mh3:
 1451   38A2   60                       rts
 1452                           
 1453                           ;--------------------------------
 1454                           ;Get character
 1455                           ;--------------------------------
 1456                           
 1457   38A3                    getchr:
 1458   38A3   20 94 FE                 jsr OSRDCH
 1459   38A6   C9 20                    cmp #32    ; SPACE
 1460   38A8   90 F9                    bcc getchr
 1461   38AA   C9 7F                    cmp #$7f   ; DELETE
 1462   38AC   60                       rts
 1463                           
 1464                           ;--------------------------------
 1465                           ;Delay 2 sec
 1466                           ;--------------------------------
 1467   38AD                    delay:
 1468   38AD   A2 78                    ldx #120
 1469   38AF                    delay2:
 1470   38AF   20 66 FE                 jsr WAITSYNC
 1471   38B2   CA                       dex
 1472   38B3   D0 FA                    bne delay2
 1473   38B5   60                       rts
 1474                           
 1475                           ;--------------------------------
 1476                           ;Init sprites
 1477                           ;--------------------------------
 1478                           
 1479                           
 1480                           ;--------------------------------
 1481                           ;Draw tile 2 x 16 bytes
 1482                           ;--------------------------------
 1483                           ;       Address in ADDR
 1484                           ;       Tile number in A
 1485                           ;--------------------------------
 1486                           
 1487   38B6                    drawtile:
 1488   38B6   8E 70 00                 stx XPOS
 1489                           
 1490   38B9   A0 00                    ldy #0
 1491   38BB   84 84                    sty TILE
 1492   38BD   4A                       lsr a
 1493   38BE   66 84                    ror TILE
 1494   38C0   4A                       lsr a
 1495   38C1   66 84                    ror TILE
 1496   38C3   4A                       lsr a
 1497   38C4   66 84                    ror TILE
 1498   38C6   85 85                    sta TILE+1
 1499   38C8                            
 1500   38C8   A5 84                    lda TILE
 1501   38CA   18                       clc
 1502   38CB   69 33                    adc #<tiles
 1503   38CD   85 84                    sta TILE
 1504   38CF   A5 85                    lda TILE+1
 1505   38D1   69 51                    adc #>tiles
 1506   38D3   85 85                    sta TILE+1
 1507                           
 1508   38D5   A5 80                    lda ADDR
 1509   38D7   48                       pha
 1510   38D8   A5 81                    lda ADDR+1
 1511   38DA   48                       pha
 1512   38DB                            
 1513   38DB   A2 0F                    ldx #15
 1514   38DD                    dt1:
 1515   38DD   A0 00                    ldy #0
 1516   38DF   B1 84                    lda (TILE),y
 1517   38E1   51 80                    eor (ADDR),y
 1518   38E3   91 80                    sta (ADDR),y
 1519   38E5   A0 08                    ldy #8
 1520   38E7   B1 84                    lda (TILE),y
 1521   38E9   A0 01                    ldy #1
 1522   38EB   51 80                    eor (ADDR),y
 1523   38ED   91 80                    sta (ADDR),y
 1524   38EF   E6 84                    inc TILE
 1525   38F1   D0 02                    bne dt4
 1526   38F3   E6 85                    inc TILE+1
 1527   38F5                    dt4:
 1528   38F5   18                       clc
 1529   38F6   A5 80                    lda ADDR
 1530   38F8   69 20                    adc #$20
 1531   38FA   85 80                    sta ADDR
 1532   38FC   A5 81                    lda ADDR+1
 1533   38FE   69 00                    adc #0
 1534   3900   85 81                    sta ADDR+1
 1535                           
 1536   3902   E0 08                    cpx #8
 1537   3904   D0 0D                    bne dt5
 1538   3906   A5 84                    lda TILE
 1539   3908   18                       clc
 1540   3909   69 08                    adc #8
 1541   390B   85 84                    sta TILE
 1542   390D   A5 85                    lda TILE+1
 1543   390F   69 00                    adc #0
 1544   3911   85 85                    sta TILE+1
 1545   3913                    dt5:
 1546   3913   CA                       dex
 1547   3914   10 C7                    bpl dt1
 1548   3916                            
 1549   3916   AE 70 00                 ldx XPOS
 1550   3919   68                       pla
 1551   391A   85 81                    sta ADDR+1
 1552   391C   68                       pla
 1553   391D   85 80                    sta ADDR
 1554   391F   60                       rts
 1555                           
 1556                           ;--------------------------------
 1557                           ;Run sprites
 1558                           ;--------------------------------
 1559                           
 1560   3920                    runsprites:
 1561   3920   A9 0F                    lda #15
 1562   3922   85 60                    sta TMP
 1563   3924                    sprloop:
 1564   3924   A6 60                    ldx TMP
 1565   3926   BD 70 06                 lda SPRX,x
 1566   3929   30 2F                    bmi nospr
 1567   392B                            
 1568   392B   BD 70 06                 lda SPRX,x
 1569   392E   8D 50 02                 sta SPRTMP+1
 1570   3931   BD 80 06                 lda SPRY,x
 1571   3934   8D 51 02                 sta SPRTMP+2
 1572   3937                            
 1573   3937   BC A0 06                 ldy SPRT,x
 1574   393A   B9 BA 46                 lda sprrouts,y
 1575   393D   8D 47 39                 sta jsrmod+1
 1576   3940   B9 BB 46                 lda sprrouts+1,y
 1577   3943   8D 48 39                 sta jsrmod+2
 1578   3946                    jsrmod:
 1579   3946   20 FF FF                 jsr $ffff
 1580                           
 1581   3949   A6 60                    ldx TMP
 1582   394B   BD A0 06                 lda SPRT,x
 1583   394E   48                       pha
 1584   394F   BC 80 06                 ldy SPRY,x
 1585   3952   BD 70 06                 lda SPRX,x
 1586   3955   AA                       tax
 1587   3956   68                       pla
 1588   3957   20 5F 39                 jsr coldetect        
 1589   395A                    nospr:
 1590   395A   C6 60                    dec TMP
 1591   395C   10 C6                    bpl sprloop
 1592   395E                            
 1593   395E   60                       rts
 1594                           
 1595                           ;--------------------------------
 1596                           ;Detect collision
 1597                           ;--------------------------------
 1598                           
 1599   395F                    coldetect:
 1600   395F   86 61                    stx TMP+1
 1601   3961   48                       pha
 1602   3962   A6 60                    ldx TMP
 1603   3964   BD A0 06                 lda SPRT,x
 1604   3967   AA                       tax
 1605   3968   BD B7 39                 lda colsizes,x
 1606   396B   4A                       lsr a
 1607   396C   65 61                    adc TMP+1
 1608   396E   38                       sec
 1609   396F   ED 54 02                 sbc PX
 1610   3972   38                       sec
 1611   3973   E9 01                    sbc #1
 1612   3975   10 05                    bpl cd1
 1613   3977   49 FF                    eor #$FF
 1614   3979   18                       clc
 1615   397A   69 01                    adc #1
 1616   397C                    cd1:
 1617   397C   85 61                    sta TMP+1
 1618                           
 1619   397E   84 62                    sty TMP+2
 1620   3980   BD B8 39                 lda colsizes+1,x
 1621   3983   4A                       lsr a
 1622   3984   65 62                    adc TMP+2
 1623                           
 1624   3986   38                       sec
 1625   3987   ED 62 02                 sbc PY
 1626   398A   18                       clc
 1627   398B   69 0C                    adc #12
 1628   398D   10 05                    bpl cd2
 1629   398F   49 FF                    eor #$FF
 1630   3991   18                       clc
 1631   3992   69 01                    adc #1
 1632   3994                    cd2:
 1633   3994   85 62                    sta TMP+2
 1634                           
 1635   3996   68                       pla
 1636   3997   AA                       tax
 1637   3998   BD BF 39                 lda coldiffs,x
 1638   399B   C5 61                    cmp TMP+1
 1639   399D   90 17                    bcc cd3
 1640   399F   BD C0 39                 lda coldiffs+1,x
 1641   39A2   0A                       asl a
 1642   39A3   C5 62                    cmp TMP+2
 1643   39A5   90 0F                    bcc cd3
 1644   39A7                            
 1645   39A7   A9 01                    lda #1
 1646   39A9   8D 60 02                 sta DEAD
 1647                           
 1648   39AC   A2 03                    ldx #3
 1649   39AE   20 65 45                 jsr sound
 1650   39B1   A2 28                    ldx #40
 1651   39B3   20 AF 38                 jsr delay2
 1652   39B6                    cd3:
 1653   39B6   60                       rts
 1654                           
 1655   39B7   06 10 06 08 02   colsizes: .BYTE 6,16,6,8,2,16,6,16
        39BC   10 06 10 
 1656   39BF   06 10 02 08 02   coldiffs: .BYTE 6,16,2,8,2,8, 4,16
        39C4   08 04 10 
 1657                           
 1658                           ;--------------------------------
 1659                           ;Drawsprite24 - A=sprite num, X=xpos, Y=ypos
 1660                           ;       Sprite 3 x 32
 1661                           ;--------------------------------
 1662                           
 1663   39C7                    drawsprite24:
 1664   39C7   20 ED 3A                 jsr spraddr 
 1665   39CA   A2 20                    ldx #32
 1666   39CC                    sprlp24:
 1667   39CC   A0 00                    ldy #0
 1668   39CE   B1 82                    lda (SPR),y
 1669   39D0   51 80                    eor (ADDR),y
 1670   39D2   91 80                    sta (ADDR),y
 1671   39D4                            
 1672   39D4   A0 20                    ldy #32        
 1673   39D6   B1 82                    lda (SPR),y
 1674   39D8   A0 01                    ldy #1
 1675   39DA   51 80                    eor (ADDR),y
 1676   39DC   91 80                    sta (ADDR),y
 1677   39DE                            
 1678   39DE   A0 40                    ldy #64        
 1679   39E0   B1 82                    lda (SPR),y
 1680   39E2   A0 02                    ldy #2
 1681   39E4   51 80                    eor (ADDR),y
 1682   39E6   91 80                    sta (ADDR),y
 1683                           
 1684   39E8   20 34 3B                 jsr sprcmn
 1685   39EB   D0 DF                    bne sprlp24
 1686   39ED                            
 1687   39ED   60                       rts
 1688                           
 1689                           ;--------------------------------
 1690                           ;Drawsprite24 - A=sprite num, X=xpos, Y=ypos
 1691                           ;       Sprite 3 x 32
 1692                           ;--------------------------------
 1693                           
 1694   39EE                    drawsprite24_16:
 1695   39EE   20 ED 3A                 jsr spraddr
 1696   39F1   A2 10                    ldx #16
 1697   39F3                            
 1698   39F3   A0 00            sprlp24_16:ldy #0
 1699   39F5   B1 82                    lda (SPR),y
 1700   39F7   51 80                    eor (ADDR),y
 1701   39F9   91 80                    sta (ADDR),y
 1702   39FB                            
 1703   39FB   A0 10                    ldy #16        
 1704   39FD   B1 82                    lda (SPR),y
 1705   39FF   A0 01                    ldy #1
 1706   3A01   51 80                    eor (ADDR),y
 1707   3A03   91 80                    sta (ADDR),y
 1708   3A05                            
 1709   3A05   A0 20                    ldy #32        
 1710   3A07   B1 82                    lda (SPR),y
 1711   3A09   A0 02                    ldy #2
 1712   3A0B   51 80                    eor (ADDR),y
 1713   3A0D   91 80                    sta (ADDR),y
 1714                           
 1715   3A0F   20 34 3B                 jsr sprcmn
 1716   3A12   D0 DF                    bne sprlp24_16
 1717   3A14                            
 1718   3A14   60                       rts
 1719                           
 1720                           ;--------------------------------
 1721                           ;Drawsprite24 - A=sprite num, X=xpos, Y=ypos
 1722                           ;       Sprite 3 x 12 bytes
 1723                           ;--------------------------------
 1724                           
 1725   3A15                    drawsprite24_12:
 1726   3A15   20 ED 3A                 jsr spraddr         
 1727                           
 1728   3A18   A2 0C                    ldx #12
 1729   3A1A                    sprlp24_12:
 1730   3A1A   20 23 3A                 jsr spr12in
 1731   3A1D   20 34 3B                 jsr sprcmn
 1732   3A20   D0 F8                    bne sprlp24_12
 1733                           
 1734   3A22   60                       rts
 1735   3A23                    spr12in:
 1736   3A23   A0 00                    ldy #0
 1737   3A25   B1 82                    lda (SPR),y
 1738   3A27   51 80                    eor (ADDR),y
 1739   3A29   91 80                    sta (ADDR),y
 1740   3A2B                            
 1741   3A2B   A0 0C                    ldy #12        
 1742   3A2D   B1 82                    lda (SPR),y
 1743   3A2F   A0 01                    ldy #1
 1744   3A31   51 80                    eor (ADDR),y
 1745   3A33   91 80                    sta (ADDR),y
 1746   3A35                            
 1747   3A35   A0 18                    ldy #24        
 1748   3A37   B1 82                    lda (SPR),y
 1749   3A39   A0 02                    ldy #2
 1750   3A3B   51 80                    eor (ADDR),y
 1751   3A3D   91 80                    sta (ADDR),y
 1752   3A3F                                    
 1753   3A3F   60                       rts
 1754   3A40                            
 1755                           ;--------------------------------
 1756                           ;Drawsprite32 - A=sprite num, X=xpos, Y=ypos
 1757                           ;       Sprite 3 x 12
 1758                           ;--------------------------------
 1759                           
 1760   3A40                    drawsprite32:
 1761   3A40   20 ED 3A                 jsr spraddr        
 1762   3A43   A2 0C                    ldx #12
 1763   3A45                    sprlp32:
 1764   3A45   20 23 3A                 jsr spr12in
 1765   3A48   A0 24                    ldy #36        
 1766   3A4A   B1 82                    lda (SPR),y
 1767   3A4C   A0 03                    ldy #3
 1768   3A4E   51 80                    eor (ADDR),y
 1769   3A50   91 80                    sta (ADDR),y
 1770                           
 1771   3A52   A0 30                    ldy #48        
 1772   3A54   B1 82                    lda (SPR),y
 1773   3A56   A0 04                    ldy #4
 1774   3A58   51 80                    eor (ADDR),y
 1775   3A5A   91 80                    sta (ADDR),y
 1776                           
 1777   3A5C   A0 3C                    ldy #60        
 1778   3A5E   B1 82                    lda (SPR),y
 1779   3A60   A0 05                    ldy #5
 1780   3A62   51 80                    eor (ADDR),y
 1781   3A64   91 80                    sta (ADDR),y
 1782                           
 1783   3A66   20 34 3B                 jsr sprcmn
 1784   3A69                                    
 1785   3A69   D0 DA                    bne sprlp32
 1786   3A6B                            
 1787   3A6B   60                      rts
 1788                           
 1789                           ;--------------------------------
 1790                           ;Drawsprite16 - A=sprite num, X=xpos, Y=ypos
 1791                           ;       Sprite 2 x 16 bytes
 1792                           ;--------------------------------
 1793                           
 1794   3A6C                    drawsprite16:
 1795   3A6C   20 ED 3A                 jsr spraddr        
 1796   3A6F   A2 10                    ldx #16
 1797   3A71                    sprlp16:
 1798   3A71   A0 00                    ldy #0
 1799   3A73   B1 82                    lda (SPR),y
 1800   3A75   51 80                    eor (ADDR),y
 1801   3A77   91 80                    sta (ADDR),y
 1802   3A79                            
 1803   3A79   A0 10                    ldy #16        
 1804   3A7B   B1 82                    lda (SPR),y
 1805   3A7D   A0 01                    ldy #1
 1806   3A7F   51 80                    eor (ADDR),y
 1807   3A81   91 80                    sta (ADDR),y
 1808   3A83                            
 1809   3A83   20 34 3B                 jsr sprcmn
 1810   3A86                                   
 1811   3A86   D0 E9                    bne sprlp16
 1812   3A88                            
 1813   3A88   60                       rts
 1814                           
 1815                           ;--------------------------------
 1816                           ;Drawsprite- A=sprite num, X=xpos, Y=ypos
 1817                           ;       Sprite 3 x 24 bytes
 1818                           ;--------------------------------
 1819                           
 1820   3A89                    drawsprite:
 1821   3A89   48                       pha
 1822   3A8A   A9 00                    lda #0
 1823   3A8C   85 66                    sta TMP+6
 1824   3A8E   85 67                    sta TMP+7
 1825   3A90   85 83                    sta SPR+1
 1826   3A92   8A                       txa
 1827   3A93   29 01                    and #1
 1828   3A95   85 65                    sta TMP+5 ; Spriteframe 0 (x=even) or 1 (x=odd)
 1829   3A97                            
 1830   3A97   68                       pla
 1831   3A98   0A                       asl a
 1832   3A99   05 65                    ora TMP+5
 1833   3A9B   48                       pha
 1834                                   ;Now need *72 - *8 + *64
 1835   3A9C   4A                       lsr a
 1836   3A9D   66 66                    ror TMP+6
 1837   3A9F   4A                       lsr a
 1838   3AA0   66 66                    ror TMP+6
 1839   3AA2   85 67                    sta TMP+7 ;*64
 1840   3AA4                            
 1841   3AA4   68                       pla
 1842   3AA5   0A                       asl a
 1843   3AA6   26 83                    rol SPR+1
 1844   3AA8   0A                       asl a
 1845   3AA9   26 83                    rol SPR+1
 1846   3AAB   0A                       asl a
 1847   3AAC   26 83                    rol SPR+1 ;*8
 1848   3AAE   18                       clc
 1849   3AAF   65 66                    adc TMP+6
 1850   3AB1   85 82                    sta SPR
 1851   3AB3   A5 83                    lda SPR+1
 1852   3AB5   65 67                    adc TMP+7
 1853   3AB7   85 83                    sta SPR+1
 1854   3AB9                            
 1855   3AB9   20 FD 3A                 jsr spraddr2
 1856                           
 1857   3ABC   A9 63                    lda #<sprites
 1858   3ABE   18                       clc
 1859   3ABF   65 82                    adc SPR
 1860   3AC1   85 82                    sta SPR
 1861   3AC3   A9 48                    lda #>sprites
 1862   3AC5   65 83                    adc SPR+1
 1863   3AC7   85 83                    sta SPR+1
 1864   3AC9                            
 1865   3AC9   A2 18                    ldx #24
 1866   3ACB                    sprlp:
 1867   3ACB   A0 00                    ldy #0
 1868   3ACD   B1 82                    lda (SPR),y
 1869   3ACF   51 80                    eor (ADDR),y
 1870   3AD1   91 80                    sta (ADDR),y
 1871   3AD3                            
 1872   3AD3   A0 18                    ldy #24        
 1873   3AD5   B1 82                    lda (SPR),y
 1874   3AD7   A0 01                    ldy #1
 1875   3AD9   51 80                    eor (ADDR),y
 1876   3ADB   91 80                    sta (ADDR),y
 1877   3ADD                            
 1878   3ADD   A0 30                    ldy #48        
 1879   3ADF   B1 82                    lda (SPR),y
 1880   3AE1   A0 02                    ldy #2
 1881   3AE3   51 80                    eor (ADDR),y
 1882   3AE5   91 80                    sta (ADDR),y
 1883   3AE7                            
 1884   3AE7   20 34 3B                 jsr sprcmn
 1885                           
 1886   3AEA   D0 DF                    bne sprlp
 1887   3AEC                            
 1888   3AEC   60                       rts
 1889                           
 1890                           ;--------------------------------
 1891                           ;Calculate Sprite-/screenaddresses
 1892                           ;X is a multiple of 2 in bytes
 1893                           ;Y is line from #8100
 1894                           ;--------------------------------
 1895                           
 1896   3AED                    spraddr:
 1897   3AED   86 66                    stx TMP+6
 1898                           
 1899   3AEF   0A                       asl a
 1900   3AF0   AA                       tax
 1901   3AF1   BD C2 46                 lda spr24,x
 1902   3AF4   85 82                    sta SPR
 1903   3AF6   BD C3 46                 lda spr24+1,x
 1904   3AF9   85 83                    sta SPR+1
 1905   3AFB                            
 1906   3AFB   A6 66                    ldx TMP+6
 1907                           
 1908   3AFD                    spraddr2:
 1909   3AFD   A9 00                    lda #0
 1910   3AFF   85 80                    sta ADDR
 1911   3B01   85 81                    sta ADDR+1
 1912   3B03   85 67                    sta TMP+7
 1913   3B05                            
 1914   3B05   84 80                    sty ADDR
 1915   3B07   06 80                    asl ADDR
 1916   3B09   26 81                    rol ADDR+1
 1917   3B0B   06 80                    asl ADDR
 1918   3B0D   26 81                    rol ADDR+1
 1919   3B0F   06 80                    asl ADDR
 1920   3B11   26 81                    rol ADDR+1
 1921   3B13   06 80                    asl ADDR
 1922   3B15   26 81                    rol ADDR+1
 1923   3B17   06 80                    asl ADDR
 1924   3B19   26 81                    rol ADDR+1
 1925   3B1B   A5 81                    lda ADDR+1
 1926   3B1D   18                       clc
 1927   3B1E   69 81                    adc #>(TOPSCR)
 1928   3B20   85 81                    sta ADDR+1
 1929                           
 1930   3B22   A9 00                    lda #0
 1931   3B24   85 67                    sta TMP+7        
 1932   3B26   8A                       txa
 1933   3B27   4A                       lsr a
 1934   3B28   18                       clc
 1935   3B29   65 80                    adc ADDR
 1936   3B2B   85 80                    sta ADDR
 1937   3B2D   A5 81                    lda ADDR+1
 1938   3B2F   69 00                    adc #0
 1939   3B31   85 81                    sta ADDR+1
 1940                           
 1941   3B33   60                       rts
 1942                           
 1943                           ;--------------------------------
 1944                           ;Increment SPR and ADDR pointers
 1945                           ;       SPR+1
 1946                           ;       ADDR+$20
 1947                           ;--------------------------------
 1948                           
 1949   3B34                    sprcmn:
 1950   3B34   E6 82                    inc SPR        
 1951   3B36   D0 02                    bne sprc1
 1952   3B38   E6 83                    inc SPR+1
 1953   3B3A                    sprc1:
 1954   3B3A   A5 80                    lda ADDR
 1955   3B3C   18                       clc
 1956   3B3D   69 20                    adc #$20
 1957   3B3F   85 80                    sta ADDR
 1958   3B41   A9 00                    lda #0
 1959   3B43   65 81                    adc ADDR+1
 1960   3B45   85 81                    sta ADDR+1
 1961   3B47   CA                       dex
 1962   3B48   60                       rts
 1963                           
 1964                           ;--------------------------------
 1965                           ;Draw level
 1966                           ;--------------------------------
 1967                           
 1968   3B49                    drawlevel:
 1969   3B49   A9 0B                    lda #SCR_H-4     ;Screen height
 1970   3B4B   85 63                    sta TMP+3
 1971   3B4D                            
 1972   3B4D   A2 00                    ldx #0
 1973   3B4F   8E 4E 02                 stx LUNCH
 1974   3B52                            
 1975   3B52   A9 00                    lda #<TOPSCR
 1976   3B54   85 80                    sta ADDR
 1977   3B56   48                       pha
 1978   3B57   A9 81                    lda #>TOPSCR
 1979   3B59   85 81                    sta ADDR+1
 1980   3B5B   48                       pha
 1981   3B5C   A9 00                    lda #<level
 1982   3B5E   85 86                    sta LEV
 1983   3B60   A9 04                    lda #>level
 1984   3B62   85 87                    sta LEV+1
 1985   3B64                    drawlp:
 1986   3B64   8A                       txa
 1987   3B65   A8                       tay
 1988   3B66   B1 86                    lda (LEV),y
 1989   3B68   C9 0A                    cmp #10
 1990   3B6A   D0 03                    bne dl1
 1991   3B6C   EE 4E 02                 inc LUNCH        
 1992   3B6F                    dl1:
 1993   3B6F   20 B6 38                 jsr drawtile
 1994                           
 1995   3B72   A5 80                    lda ADDR
 1996   3B74   18                       clc
 1997   3B75   69 02                    adc #2      ;Next tile
 1998   3B77   85 80                    sta ADDR
 1999   3B79   90 02                    bcc dl2
 2000   3B7B   E6 81                    inc ADDR+1
 2001   3B7D                    dl2:
 2002   3B7D   E8                       inx
 2003   3B7E   E0 10                    cpx #SCR_W-4     ;Screen width
 2004   3B80   D0 E2                    bne drawlp
 2005                           
 2006   3B82   A5 86                    lda LEV
 2007   3B84   18                       clc
 2008   3B85   69 14                    adc #SCR_W
 2009   3B87   85 86                    sta LEV
 2010   3B89   90 02                    bcc dl3
 2011   3B8B   E6 87                    inc LEV+1
 2012   3B8D                    dl3: 
 2013   3B8D   68                       pla
 2014   3B8E   18                       clc
 2015   3B8F   69 02                    adc #2
 2016   3B91   85 81                    sta ADDR+1
 2017   3B93   68                       pla
 2018   3B94   85 80                    sta ADDR
 2019   3B96                            
 2020   3B96   A5 80                    lda ADDR
 2021   3B98   48                       pha
 2022   3B99   A5 81                    lda ADDR+1
 2023   3B9B   48                       pha        
 2024                           
 2025   3B9C   A2 00                    ldx #0
 2026   3B9E   C6 63                    dec TMP+3
 2027   3BA0   D0 C2                    bne drawlp
 2028   3BA2                            
 2029   3BA2   68                       pla
 2030   3BA3   68                       pla
 2031   3BA4                            
 2032   3BA4   60                       rts
 2033   3BA5                     
 2034                           ;--------------------------------
 2035                           ;load level into buffer
 2036                           ;--------------------------------
 2037                           
 2038   3BA5                    loadlevel:
 2039   3BA5   AD 4D 02                 lda LEVN
 2040   3BA8   29 0F                    and #15
 2041   3BAA                            
 2042   3BAA   0A                       asl a
 2043   3BAB   AA                       tax
 2044   3BAC   BD 7A 46                 lda levs,x
 2045   3BAF   8D CF 3B                 sta loadmod+1
 2046   3BB2   BD 7B 46                 lda levs+1,x
 2047   3BB5   8D D0 3B                 sta loadmod+2
 2048   3BB8                            
 2049   3BB8   BD 9A 46                 lda sprs,x
 2050   3BBB   85 88                    sta SPRADR
 2051   3BBD   BD 9B 46                 lda sprs+1,x
 2052   3BC0   85 89                    sta SPRADR+1
 2053   3BC2                            
 2054   3BC2   A9 00                    lda #<level
 2055   3BC4   85 60                    sta TMP
 2056   3BC6   A9 04                    lda #>level
 2057   3BC8   85 61                    sta TMP+1
 2058   3BCA                            
 2059   3BCA   A2 00                    ldx #0
 2060   3BCC   A0 00                    ldy #0
 2061   3BCE                    loadmod:
 2062   3BCE   BD FF FF                 lda $ffff,x
 2063   3BD1   F0 19                    beq ldend
 2064   3BD3   48                       pha
 2065   3BD4   4A                       lsr a
 2066   3BD5   4A                       lsr a
 2067   3BD6   4A                       lsr a
 2068   3BD7   4A                       lsr a
 2069   3BD8   85 62                    sta TMP+2
 2070   3BDA   68                       pla
 2071   3BDB   29 0F                    and #$F
 2072   3BDD                    ll1:
 2073   3BDD   91 60                    sta (TMP),y
 2074   3BDF   E6 60                    inc TMP
 2075   3BE1   D0 02                    bne ll2
 2076   3BE3   E6 61                    inc TMP+1
 2077   3BE5                    ll2:
 2078   3BE5   C6 62                    dec TMP+2
 2079   3BE7   D0 F4                    bne ll1
 2080                           
 2081   3BE9   E8                       inx
 2082   3BEA                            
 2083   3BEA   D0 E2                    bne loadmod
 2084   3BEC                                    
 2085   3BEC   AD 4D 02         ldend:  lda LEVN
 2086   3BEF   29 0F                    and #15
 2087   3BF1   C9 09                    cmp #9
 2088   3BF3   D0 16                    bne ll3
 2089   3BF5                            
 2090   3BF5   A9 00                    lda #0
 2091   3BF7   8D 1A 04                 sta level+$1a
 2092   3BFA   8D 1B 04                 sta level+$1b
 2093   3BFD   8D 1C 04                 sta level+$1c
 2094   3C00   8D 1D 04                 sta level+$1d
 2095   3C03                            
 2096   3C03   A9 01                    lda #1
 2097   3C05   8D 2E 04                 sta level+$2e
 2098   3C08   8D 31 04                 sta level+$31
 2099   3C0B                    ll3:
 2100   3C0B   60                       rts
 2101                           
 2102                           ;--------------------------------
 2103                           ;Place initial sprites at startup
 2104                           ;--------------------------------
 2105                           
 2106   3C0C                    initsprites:
 2107   3C0C   A2 0F                    ldx #15
 2108   3C0E   A9 FF                    lda #255
 2109   3C10                    is1:
 2110   3C10   9D 70 06                 sta SPRX,x       ; Sprites not visible
 2111   3C13   9D F0 06                 sta SPR1,x
 2112   3C16   CA                       dex
 2113   3C17   10 F7                    bpl is1
 2114                           
 2115   3C19   A0 00                    ldy #0
 2116   3C1B   A2 00                    ldx #0
 2117   3C1D                    insprlp:
 2118   3C1D   B1 88                    lda (SPRADR),y   ; Read X-pos and D1
 2119   3C1F   8D 4F 02                 sta SPRTMP
 2120   3C22   C8                       iny
 2121   3C23   B1 88                    lda (SPRADR),y   ; Read Y-pos + spritenr
 2122   3C25   8D 50 02                 sta SPRTMP+1
 2123   3C28   C8                       iny
 2124   3C29   B1 88                    lda (SPRADR),y   ; Read direction and D2
 2125   3C2B   8D 51 02                 sta SPRTMP+2
 2126   3C2E   C8                       iny
 2127   3C2F                                        
 2128   3C2F   AD 4F 02                 lda SPRTMP
 2129   3C32   10 10                    bpl sprc
 2130   3C34   C9 FF                    cmp #$ff         ; $ff is end of list
 2131   3C36   F0 3C                    beq sprfin
 2132   3C38   AD 4D 02                 lda LEVN         ; Check if level>15
 2133   3C3B   29 F0                    and #$F0
 2134   3C3D   F0 31                    beq sprskp
 2135   3C3F   AD 4F 02                 lda SPRTMP
 2136   3C42   29 7F                    and #$7f
 2137   3C44                    sprc:
 2138   3C44   9D 70 06                 sta SPRX,x
 2139   3C47   9D C0 06                 sta SPRD1,x
 2140   3C4A   AD 50 02                 lda SPRTMP+1     ; Filter Y-pos
 2141   3C4D   29 F8                    and #$F8
 2142   3C4F   9D 80 06                 sta SPRY,x
 2143   3C52   AD 50 02                 lda SPRTMP+1     ; Filter Type
 2144   3C55   29 07                    and #7
 2145   3C57   0A                       asl a
 2146   3C58   9D A0 06                 sta SPRT,x       ; Type x 2
 2147   3C5B   A9 01                    lda #1           ; Set Dir = 1
 2148   3C5D   9D B0 06                 sta SPRD,x
 2149   3C60                              
 2150   3C60   AD 51 02                 lda SPRTMP+2
 2151   3C63   10 06                    bpl is2          ; If Direction bit set Dir = 255
 2152   3C65   DE B0 06                 dec SPRD,x
 2153   3C68   DE B0 06                 dec SPRD,x
 2154   3C6B                    is2:
 2155   3C6B   29 7F                    and #$7F
 2156   3C6D   9D D0 06                 sta SPRD2,x
 2157   3C70                    sprskp:
 2158   3C70   E8                       inx
 2159   3C71   4C 1D 3C                 jmp insprlp
 2160   3C74                    sprfin:
 2161   3C74   60                       rts
 2162                           
 2163                           ;--------------------------------
 2164                           ;Panda routine
 2165                           ;--------------------------------
 2166                           
 2167   3C75                    pandarout:
 2168   3C75   BD F0 06                 lda SPR1,x
 2169   3C78   F0 10                    beq pr1
 2170   3C7A                            
 2171   3C7A   A9 00                    lda #0
 2172   3C7C   9D F0 06                 sta SPR1,x
 2173   3C7F                            
 2174   3C7F   A9 10                    lda #16
 2175   3C81   AE 50 02                 ldx SPRTMP+1
 2176   3C84   AC 51 02                 ldy SPRTMP+2
 2177   3C87   20 C7 39                 jsr drawsprite24
 2178   3C8A                    pr1:
 2179   3C8A   60                       rts        
 2180                           
 2181                           ;--------------------------------
 2182                           ;Big Kong routines
 2183                           ;--------------------------------
 2184                           
 2185   3C8B                    bkrout:
 2186   3C8B   BD F0 06                 lda SPR1,x
 2187   3C8E   F0 13                    beq bk1
 2188                           
 2189   3C90   AD 50 02                 lda SPRTMP+1
 2190   3C93   18                       clc
 2191   3C94   69 08                    adc #8
 2192   3C96   AA                       tax
 2193   3C97   AD 51 02                 lda SPRTMP+2
 2194   3C9A   18                       clc
 2195   3C9B   69 08                    adc #8
 2196   3C9D   A8                       tay
 2197   3C9E   A9 09                    lda #9          ; Barrel
 2198   3CA0   20 89 3A                 jsr drawsprite
 2199   3CA3                    bk1:
 2200   3CA3   A6 60                    ldx TMP
 2201   3CA5   BD F0 06                 lda SPR1,x
 2202   3CA8   D0 1B                    bne bkfirst
 2203   3CAA                            
 2204   3CAA   CE 66 02                 dec BKTIME
 2205   3CAD   D0 2B                    bne bk2
 2206                           
 2207   3CAF   A9 10                    lda #16
 2208   3CB1   8D 66 02                 sta BKTIME
 2209   3CB4                                    
 2210   3CB4   AD 65 02                 lda BKFRAME
 2211   3CB7   29 01                    and #1
 2212   3CB9   AE 50 02                 ldx SPRTMP+1
 2213   3CBC   AC 51 02                 ldy SPRTMP+2
 2214   3CBF   20 C7 39                 jsr drawsprite24
 2215                           
 2216   3CC2   EE 65 02                 inc BKFRAME
 2217   3CC5                    bkfirst:
 2218   3CC5   A6 60                    ldx TMP
 2219   3CC7   A9 00                    lda #0
 2220   3CC9   9D F0 06                 sta SPR1,x
 2221   3CCC                            
 2222   3CCC   AD 65 02                 lda BKFRAME
 2223   3CCF   29 01                    and #1
 2224   3CD1   AE 50 02                 ldx SPRTMP+1
 2225   3CD4   AC 51 02                 ldy SPRTMP+2
 2226   3CD7   20 C7 39                 jsr drawsprite24
 2227   3CDA                    bk2:       
 2228   3CDA   AD 69 02                 lda BARRELX
 2229   3CDD   30 70                    bmi nobarrel
 2230                           
 2231   3CDF   A9 03                    lda #3
 2232   3CE1   AE 69 02                 ldx BARRELX
 2233   3CE4   AC 6C 02                 ldy BARRELY
 2234   3CE7   20 EE 39                 jsr drawsprite24_16
 2235                           
 2236   3CEA   20 9B 3D                 jsr barrel_move
 2237   3CED                                    
 2238   3CED   AD 6C 02                 lda BARRELY
 2239   3CF0   C9 10                    cmp #16
 2240   3CF2   90 56                    bcc killbarrel
 2241   3CF4   C9 A8                    cmp #168          ;!!!!!!!!!!!!!!!! was 232 !!!!!!!!!!!!!!
 2242   3CF6   B0 52                    bcs killbarrel
 2243   3CF8                            
 2244   3CF8   AD 69 02                 lda BARRELX
 2245   3CFB   C9 44                    cmp #68
 2246   3CFD   B0 4B                    bcs killbarrel
 2247   3CFF                            
 2248   3CFF   AD 69 02                 lda BARRELX
 2249   3D02   18                       clc
 2250   3D03   69 03                    adc #3
 2251   3D05   38                       sec
 2252   3D06   ED 54 02                 sbc PX
 2253   3D09   38                       sec
 2254   3D0A   E9 01                    sbc #1
 2255   3D0C   10 05                    bpl bk3
 2256   3D0E   49 FF                    eor #$FF
 2257   3D10   18                       clc
 2258   3D11   69 01                    adc #1
 2259   3D13                    bk3:
 2260   3D13   85 61                    sta TMP+1
 2261                           
 2262   3D15   AD 6C 02                 lda BARRELY
 2263   3D18   18                       clc
 2264   3D19   69 02                    adc #2
 2265   3D1B   38                       sec
 2266   3D1C   ED 62 02                 sbc PY
 2267   3D1F   18                       clc
 2268   3D20   69 0C                    adc #12
 2269   3D22   10 05                    bpl bk4
 2270   3D24   49 FF                    eor #$FF
 2271   3D26   18                       clc
 2272   3D27   69 01                    adc #1
 2273   3D29                    bk4:
 2274   3D29   85 62                    sta TMP+2
 2275                           
 2276   3D2B   A9 06                    lda #6
 2277   3D2D   C5 61                    cmp TMP+1
 2278   3D2F   90 0B                    bcc bk5
 2279   3D31   A9 06                    lda #6
 2280   3D33   C5 62                    cmp TMP+2
 2281   3D35   90 05                    bcc bk5
 2282   3D37                            
 2283   3D37   A9 01                    lda #1
 2284   3D39   8D 60 02                 sta DEAD
 2285   3D3C                    bk5:
 2286   3D3C   A9 03                    lda #3
 2287   3D3E   AE 69 02                 ldx BARRELX
 2288   3D41   AC 6C 02                 ldy BARRELY
 2289   3D44   20 EE 39                 jsr drawsprite24_16
 2290   3D47   4C 4F 3D                 jmp bk6
 2291                           
 2292   3D4A                    killbarrel:
 2293   3D4A   A9 FF                    lda #255
 2294   3D4C   8D 69 02                 sta BARRELX        
 2295   3D4F                    bk6:
 2296   3D4F                    nobarrel:        
 2297   3D4F   CE 68 02                 dec BARRELT
 2298   3D52   D0 2E                    bne bk8        
 2299                           
 2300   3D54   A9 A0                    lda #160
 2301   3D56   8D 68 02                 sta BARRELT
 2302   3D59   AD 4D 02                 lda LEVN
 2303   3D5C   C9 20                    cmp #32
 2304   3D5E   90 05                    bcc bk7
 2305   3D60   A9 60                    lda #96
 2306   3D62   8D 68 02                 sta BARRELT
 2307   3D65                    bk7:
 2308   3D65   AE 70 06                 ldx SPRX
 2309   3D68   8E 69 02                 stx BARRELX
 2310   3D6B   A0 20                    ldy #32
 2311   3D6D   8C 6C 02                 sty BARRELY
 2312   3D70   A9 03                    lda #3
 2313   3D72   20 EE 39                 jsr drawsprite24_16
 2314   3D75   20 13 3E                 jsr barrel_dir
 2315                           
 2316   3D78   A2 03                    ldx #3
 2317   3D7A   20 65 45                 jsr sound
 2318   3D7D   A2 28                    ldx #40
 2319   3D7F   20 AF 38                 jsr delay2
 2320   3D82                    bk8:
 2321   3D82   CE 67 02                 dec HAYLPTIME
 2322   3D85   D0 13                    bne bk9
 2323   3D87                            
 2324   3D87   A9 32                    lda #50
 2325   3D89   8D 67 02                 sta HAYLPTIME
 2326                           
 2327   3D8C   AD 70 06                 lda SPRX
 2328   3D8F   18                       clc
 2329   3D90   69 0C                    adc #12
 2330   3D92   AA                       tax        
 2331   3D93   A9 02                    lda #2
 2332   3D95   A0 00                    ldy #0
 2333   3D97   20 40 3A                 jsr drawsprite32
 2334   3D9A                    bk9:
 2335   3D9A   60                       rts
 2336                           
 2337   3D9B                    barrel_move:
 2338   3D9B   AD 6F 02                 lda BARRELD
 2339   3D9E   F0 10                    beq barrel_xl
 2340   3DA0   C9 01                    cmp #1
 2341   3DA2   F0 31                    beq barrel_yl
 2342   3DA4   C9 02                    cmp #2
 2343   3DA6   F0 42                    beq barrel_yr
 2344                           
 2345   3DA8   EE 69 02                 inc BARRELX
 2346   3DAB   EE 69 02                 inc BARRELX
 2347   3DAE   D0 06                    bne bm1
 2348   3DB0                    barrel_xl:
 2349   3DB0   CE 69 02                 dec BARRELX
 2350   3DB3   CE 69 02                 dec BARRELX
 2351   3DB6                    bm1:
 2352   3DB6   AD 70 02                 lda BARRELE
 2353   3DB9   38                       sec
 2354   3DBA   ED 6E 02                 sbc BARRELDY
 2355   3DBD   8D 70 02                 sta BARRELE
 2356   3DC0   B0 12                    bcs bm2        
 2357   3DC2                            
 2358   3DC2   AD 70 02                 lda BARRELE
 2359   3DC5   6D 6D 02                 adc BARRELDX
 2360   3DC8   8D 70 02                 sta BARRELE
 2361   3DCB                                    
 2362   3DCB   AD 6C 02                 lda BARRELY
 2363   3DCE   18                       clc
 2364   3DCF   69 08                    adc #8
 2365   3DD1   8D 6C 02                 sta BARRELY
 2366   3DD4                    bm2:
 2367   3DD4   60                       rts
 2368   3DD5                            
 2369   3DD5                    barrel_yl:
 2370   3DD5   20 FF 3D                 jsr barrelc1
 2371                           
 2372   3DD8   B0 0F                    bcs byl1
 2373   3DDA                            
 2374   3DDA   AD 70 02                 lda BARRELE
 2375   3DDD   6D 6E 02                 adc BARRELDY
 2376   3DE0   8D 70 02                 sta BARRELE        
 2377   3DE3                            
 2378   3DE3   CE 69 02                 dec BARRELX
 2379   3DE6   CE 69 02                 dec BARRELX
 2380   3DE9                    byl1:
 2381   3DE9   60                       rts
 2382   3DEA                            
 2383   3DEA                    barrel_yr:
 2384   3DEA   20 FF 3D                 jsr barrelc1
 2385                           
 2386   3DED   B0 0F                    bcs byr1
 2387   3DEF                            
 2388   3DEF   AD 70 02                 lda BARRELE
 2389   3DF2   6D 6E 02                 adc BARRELDY
 2390   3DF5   8D 70 02                 sta BARRELE        
 2391                           
 2392   3DF8   EE 69 02                 inc BARRELX
 2393   3DFB   EE 69 02                 inc BARRELX        
 2394   3DFE                    byr1:
 2395   3DFE   60                       rts
 2396                           
 2397   3DFF                    barrelc1:
 2398   3DFF   AD 6C 02                 lda BARRELY
 2399   3E02   18                       clc
 2400   3E03   69 08                    adc #8
 2401   3E05   8D 6C 02                 sta BARRELY
 2402   3E08                            
 2403   3E08   AD 70 02                 lda BARRELE
 2404   3E0B   38                       sec
 2405   3E0C   ED 6D 02                 sbc BARRELDX
 2406   3E0F   8D 70 02                 sta BARRELE
 2407                           
 2408   3E12   60                       rts
 2409   3E13                            
 2410   3E13                    barrel_dir:
 2411   3E13   A9 00                    lda #0
 2412   3E15   8D 70 02                 sta BARRELE
 2413   3E18                            
 2414   3E18   AD 69 02                 lda BARRELX
 2415   3E1B   38                       sec
 2416   3E1C   ED 54 02                 sbc PX
 2417   3E1F   B0 05                    bcs bd1
 2418   3E21   49 FF                    eor #$ff
 2419   3E23   18                       clc
 2420   3E24   69 01                    adc #1
 2421   3E26                    bd1:
 2422   3E26   8D 6D 02                 sta BARRELDX
 2423                           
 2424   3E29   AD 6C 02                 lda BARRELY
 2425   3E2C   38                       sec
 2426   3E2D   ED 62 02                 sbc PY
 2427   3E30   B0 05                    bcs bd2
 2428   3E32   49 FF                    eor #$ff
 2429   3E34   18                       clc
 2430   3E35   69 01                    adc #1
 2431   3E37                    bd2:
 2432   3E37   4A                       lsr a
 2433   3E38   4A                       lsr a
 2434   3E39   8D 6E 02                 sta BARRELDY
 2435                           
 2436   3E3C   AD 6D 02                 lda BARRELDX
 2437   3E3F   CD 6E 02                 cmp BARRELDY
 2438   3E42   B0 0F                    bcs barrel_x
 2439   3E44                            
 2440   3E44   A2 01                    ldx #1
 2441   3E46   AD 69 02                 lda BARRELX
 2442   3E49   CD 54 02                 cmp PX
 2443   3E4C   B0 01                    bcs bd3
 2444   3E4E   E8                       inx
 2445   3E4F                    bd3:
 2446   3E4F   8E 6F 02                 stx BARRELD
 2447   3E52   60                       rts                
 2448   3E53                            
 2449   3E53                    barrel_x:
 2450   3E53   A2 00                    ldx #0
 2451   3E55   AD 69 02                 lda BARRELX
 2452   3E58   CD 54 02                 cmp PX
 2453   3E5B   B0 02                    bcs bx1
 2454   3E5D   A2 03                    ldx #3
 2455   3E5F                    bx1:
 2456   3E5F   8E 6F 02                 stx BARRELD
 2457   3E62   60                       rts
 2458                           
 2459                           ;--------------------------------
 2460                           ;Bird routine
 2461                           ;--------------------------------
 2462                           
 2463   3E63                    birdrout:
 2464   3E63   BD F0 06                 lda SPR1,x
 2465   3E66   D0 11                    bne bro1
 2466                           
 2467   3E68   20 B4 3E                 jsr sprgetfr
 2468   3E6B   69 04                    adc #4
 2469                           
 2470   3E6D   20 C5 3E                 jsr getdirfr
 2471   3E70   AE 50 02                 ldx SPRTMP+1
 2472   3E73   AC 51 02                 ldy SPRTMP+2
 2473   3E76   20 15 3A                 jsr drawsprite24_12
 2474   3E79                    bro1:
 2475   3E79   A6 60                    ldx TMP
 2476   3E7B   A9 00                    lda #0
 2477   3E7D   9D F0 06                 sta SPR1,x
 2478   3E80                            
 2479   3E80   FE 90 06                 inc SPRF,x
 2480   3E83                            
 2481   3E83   BD 70 06                 lda SPRX,x
 2482   3E86   18                       clc
 2483   3E87   7D B0 06                 adc SPRD,x
 2484   3E8A   9D 70 06                 sta SPRX,x
 2485   3E8D   DD C0 06                 cmp SPRD1,x
 2486   3E90   F0 05                    beq birdrev
 2487   3E92   DD D0 06                 cmp SPRD2,x
 2488   3E95   D0 09                    bne birdcnt
 2489                           
 2490   3E97   A9 00            birdrev:lda #0
 2491   3E99   38                       sec
 2492   3E9A   FD B0 06                 sbc SPRD,x
 2493   3E9D   9D B0 06                 sta SPRD,x
 2494                           
 2495   3EA0   20 B4 3E         birdcnt:jsr sprgetfr
 2496   3EA3   69 04                    adc #4
 2497                           
 2498   3EA5   20 C5 3E                 jsr getdirfr
 2499   3EA8   A4 60                    ldy TMP
 2500   3EAA   BE 70 06                 ldx SPRX,y
 2501   3EAD                            
 2502   3EAD   AC 51 02                 ldy SPRTMP+2        
 2503   3EB0   20 15 3A                 jsr drawsprite24_12
 2504                           
 2505   3EB3   60                       rts
 2506                           
 2507   3EB4                    sprgetfr:
 2508   3EB4   A6 60                    ldx TMP
 2509   3EB6   BD 90 06                 lda SPRF,x
 2510   3EB9   4A                       lsr a
 2511   3EBA   29 03                    and #3
 2512   3EBC   A8                       tay
 2513   3EBD   B9 CE 3E                 lda frlook,y
 2514   3EC0   8D 52 02                 sta SPRTMP+3
 2515   3EC3   18                       clc
 2516                           
 2517   3EC4   60                       rts
 2518                           
 2519   3EC5                    getdirfr:
 2520   3EC5   BC B0 06                 ldy SPRD,x
 2521   3EC8   30 03                    bmi gdf1
 2522   3ECA   18                       clc
 2523   3ECB   69 03                    adc #3
 2524   3ECD                    gdf1:
 2525   3ECD   60                       rts
 2526                           
 2527   3ECE                    frlook:
 2528   3ECE   00 01 00 02              .db 0,1,0,2
 2529                           
 2530                           ;--------------------------------
 2531                           ;Monkey routine
 2532                           ;--------------------------------
 2533                           
 2534   3ED2                    monkeyrout:
 2535   3ED2   20 C4 3F                 jsr monkeygetfr 
 2536   3ED5                            
 2537   3ED5   BD F0 06                 lda SPR1,x
 2538   3ED8   F0 38                    beq mr2
 2539   3EDA                            
 2540   3EDA   A9 00                    lda #0            ;If first run then draw monkey
 2541   3EDC   9D F0 06                 sta SPR1,x        ;Monkey doesn't move or animate
 2542   3EDF   20 CF 3F                 jsr rand
 2543   3EE2   29 3F                    and #63
 2544   3EE4   69 40                    adc #64
 2545   3EE6   9D E0 06                 sta SPRD3,x
 2546   3EE9   AD 4D 02                 lda LEVN
 2547   3EEC   C9 10                    cmp #16
 2548   3EEE   90 09                    bcc mr1
 2549   3EF0                           
 2550   3EF0   BD E0 06                 lda SPRD3,x
 2551   3EF3   38                       sec
 2552   3EF4   E9 18                    sbc #24       
 2553   3EF6   9D E0 06                 sta SPRD3,x
 2554   3EF9                    mr1:
 2555   3EF9   A9 FF                    lda #255
 2556   3EFB   9D C0 06                 sta SPRD1,x
 2557   3EFE                            
 2558   3EFE   BD B0 06                 lda SPRD,x
 2559   3F01   29 02                    and #2
 2560   3F03   4A                       lsr a
 2561   3F04   09 0A                    ora #10
 2562   3F06   AE 50 02                 ldx SPRTMP+1
 2563   3F09   AC 51 02                 ldy SPRTMP+2
 2564   3F0C   20 6C 3A                 jsr drawsprite16
 2565   3F0F   4C BD 3F                 jmp nospan
 2566   3F12                    mr2:
 2567   3F12   DE E0 06                 dec SPRD3,x       ;Decrement spanner counter
 2568   3F15   D0 2A                    bne mr3
 2569   3F17                            
 2570   3F17   20 CF 3F                 jsr rand          ;Reset counter and generate spanner
 2571   3F1A   29 3F                    and #63
 2572   3F1C   69 40                    adc #64        
 2573                           
 2574   3F1E   9D E0 06                 sta SPRD3,x
 2575   3F21                            
 2576   3F21   BD 80 06                 lda SPRY,x
 2577   3F24   9D D0 06                 sta SPRD2,x
 2578   3F27   A8                       tay
 2579   3F28   BD B0 06                 lda SPRD,x
 2580   3F2B   0A                       asl a
 2581   3F2C   18                       clc
 2582   3F2D   7D 70 06                 adc SPRX,x
 2583   3F30   9D C0 06                 sta SPRD1,x
 2584   3F33   AA                       tax
 2585   3F34   A5 61                    lda TMP+1
 2586   3F36   20 6C 3A                 jsr drawsprite16
 2587   3F39                            
 2588   3F39   A2 02                    ldx #2
 2589   3F3B   20 65 45                 jsr sound
 2590                           
 2591   3F3E   4C BD 3F                 jmp nospan
 2592   3F41                    mr3:
 2593   3F41   BD C0 06                 lda SPRD1,x      ;Is spanner on screen?
 2594   3F44   30 77                    bmi nospan
 2595                           
 2596   3F46   BC D0 06                 ldy SPRD2,x
 2597   3F49   BD C0 06                 lda SPRD1,x
 2598   3F4C   AA                       tax
 2599   3F4D   A5 61                    lda TMP+1
 2600   3F4F   20 6C 3A                 jsr drawsprite16
 2601   3F52   A6 60                    ldx TMP
 2602   3F54   FE 90 06                 inc SPRF,x
 2603   3F57   20 C4 3F                 jsr monkeygetfr
 2604   3F5A   BC D0 06                 ldy SPRD2,x        
 2605   3F5D   BD B0 06                 lda SPRD,x
 2606   3F60   0A                       asl a
 2607   3F61   18                       clc
 2608   3F62   7D C0 06                 adc SPRD1,x
 2609   3F65   9D C0 06                 sta SPRD1,x
 2610   3F68   30 54                    bmi spanover
 2611   3F6A   C9 3C                    cmp  #60     ; Check border right !!!!!!!!!!!!!
 2612   3F6C   B0 50                    bcs spanover        
 2613   3F6E                            
 2614   3F6E   AA                       tax
 2615   3F6F   A5 61                    lda TMP+1
 2616   3F71   20 6C 3A                 jsr drawsprite16
 2617                           
 2618   3F74   A6 60                    ldx TMP
 2619   3F76   BD C0 06                 lda SPRD1,x
 2620   3F79   18                       clc
 2621   3F7A   69 02                    adc #2
 2622   3F7C   38                       sec
 2623   3F7D   ED 54 02                 sbc PX
 2624   3F80   38                       sec
 2625   3F81   E9 01                    sbc #1
 2626   3F83   10 05                    bpl mr4
 2627   3F85   49 FF                    eor #$FF
 2628   3F87   18                       clc
 2629   3F88   69 01                    adc #1
 2630   3F8A                    mr4:
 2631   3F8A   85 61                    sta TMP+1
 2632                           
 2633   3F8C   BD D0 06                 lda SPRD2,x
 2634   3F8F   18                       clc
 2635   3F90   69 08                    adc #8
 2636   3F92   38                       sec
 2637   3F93   ED 62 02                 sbc PY
 2638   3F96   18                       clc
 2639   3F97   69 0C                    adc #12
 2640   3F99   10 05                    bpl mr5
 2641   3F9B   49 FF                    eor #$FF
 2642   3F9D   18                       clc
 2643   3F9E   69 01                    adc #1
 2644   3FA0                    mr5:
 2645   3FA0   85 62                    sta TMP+2
 2646                           
 2647   3FA2   A9 04                    lda #4
 2648   3FA4   C5 61                    cmp TMP+1
 2649   3FA6   90 15                    bcc nospan
 2650   3FA8   A9 10                    lda #16
 2651   3FAA   C5 62                    cmp TMP+2
 2652   3FAC   90 0F                    bcc nospan
 2653   3FAE                            
 2654   3FAE   A9 01                    lda #1
 2655   3FB0   8D 60 02                 sta DEAD
 2656                           
 2657   3FB3   A2 03                    ldx #3
 2658   3FB5   20 65 45                 jsr sound
 2659   3FB8   A2 28                    ldx #40
 2660   3FBA   20 AF 38                 jsr delay2
 2661                           
 2662   3FBD                    nospan:        
 2663   3FBD   60                       rts
 2664                           
 2665   3FBE                    spanover:
 2666   3FBE   A9 FF                    lda #255
 2667   3FC0   9D C0 06                 sta SPRD1,x
 2668   3FC3   60                       rts
 2669                           
 2670   3FC4                    monkeygetfr:
 2671   3FC4   BD 90 06                 lda SPRF,x
 2672   3FC7   4A                       lsr a
 2673   3FC8   29 03                    and #3
 2674   3FCA   09 0C                    ora #12
 2675   3FCC   85 61                    sta TMP+1
 2676   3FCE   60                       rts
 2677   3FCF                                    
 2678                           ;--------------------------------
 2679                           ;Random???
 2680                           ;--------------------------------
 2681                           
 2682   3FCF                    rand:
 2683   3FCF   AD E5 3F                 lda SEED
 2684   3FD2   29 48                    and #$48
 2685   3FD4   69 38                    adc #$38
 2686   3FD6   0A                       asl a
 2687   3FD7   0A                       asl a
 2688   3FD8   2E E7 3F                 rol SEED+2
 2689   3FDB   2E E6 3F                 rol SEED+1
 2690   3FDE   2E E5 3F                 rol SEED
 2691   3FE1   AD E5 3F                 lda SEED
 2692   3FE4   60                       rts
 2693   3FE5                            
 2694   3FE5   A6 73 9F         SEED: .BYTE $A6,$73,$9F
 2695                           
 2696                           ;--------------------------------
 2697                           ;Routine is executed every frame
 2698                           ;--------------------------------
 2699                           
 2700   3FE8                    eventr:
 2701   3FE8   CE 40 02                 dec COLTIME
 2702   3FEB   D0 17                    bne ev1
 2703   3FED                            
 2704   3FED   98                       tya
 2705   3FEE   48                       pha
 2706   3FEF                            
 2707   3FEF   A9 02                    lda #2
 2708   3FF1   8D 40 02                 sta COLTIME
 2709   3FF4                            
 2710   3FF4   E6 26                    inc CONVMV
 2711   3FF6                            
 2712   3FF6   EE 41 02                 inc COLCOUNT
 2713   3FF9   AD 41 02                 lda COLCOUNT
 2714   3FFC   29 03                    and #3
 2715   3FFE   8D 41 02                 sta COLCOUNT
 2716   4001   A8                       tay
 2717   4002                            
 2718   4002   68                       pla
 2719   4003   A8                       tay
 2720   4004                    ev1:
 2721   4004   60                       rts
 2722                           
 2723                           ;--------------------------------
 2724                           ;Level 18      
 2725                           ;--------------------------------
 2726                           
 2727   4005   90 13 60 40      level1: .BYTE $90,$13,$60,$40
 2728   4009   90 13 60 40              .BYTE $90,$13,$60,$40
 2729   400D   20 1A 20 1A 30           .BYTE $20,$1A,$20,$1A,$30,$41,$30,$40
        4012   41 30 40 
 2730   4015   10 13 41 13 90           .BYTE $10,$13,$41,$13,$90,$40
        401A   40 
 2731   401B   10 13 40 13 1A           .BYTE $10,$13,$40,$13,$1A,$70,$1A,$40
        4020   70 1A 40 
 2732   4023   10 13 40 21 13           .BYTE $10,$13,$40,$21,$13,$20,$13,$51,$30
        4028   20 13 51 30 
 2733   402C   10 13 60 13 20           .BYTE $10,$13,$60,$13,$20,$13,$40,$40
        4031   13 40 40 
 2734   4034   10 13 10 1A 10           .BYTE $10,$13,$10,$1a,$10,$1a,$20,$13,$20,$13,$40,$40
        4039   1A 20 13 20 13 
        403E   40 40 
 2735   4040   21 10 11 13 11           .BYTE $21,$10,$11,$13,$11,$10,$13,$51,$13,$20,$40
        4045   10 13 51 13 20 
        404A   40 
 2736   404B   40 13 20 13 40           .BYTE $40,$13,$20,$13,$40,$1A,$13,$10,$1A,$40
        4050   1A 13 10 1A 40 
 2737   4055   20 61 40 41 40           .BYTE $20,$61,$40,$41,$40
 2738   405A   B0 61 30                 .BYTE $B0,$61,$30
 2739   405D   F0 50                    .BYTE $F0,$50
 2740   405F   40 13 20 13 50           .BYTE $40,$13,$20,$13,$50,$13,$20,$40
        4064   13 20 40 
 2741   4067   30 1A 10 1A 20           .BYTE $30,$1A,$10,$1A,$20,$13,$20,$13,$40,$40
        406C   13 20 13 40 40 
 2742                           
 2743                                   ;Level 1
 2744   4071   F0 50            level2: .BYTE $f0,$50
 2745   4073   30 1A 40 1A 40           .BYTE $30,$1A,$40,$1A,$40,$1A,$20,$40
        4078   1A 20 40 
 2746   407B   30 41 13 11 30           .BYTE $30,$41,$13,$11,$30,$31,$13,$40
        4080   31 13 40 
 2747   4083   70 13 70 13 40           .BYTE $70,$13,$70,$13,$40
 2748   4088   60 1A 13 1A 40           .BYTE $60,$1A,$13,$1A,$40,$1A,$10,$13,$40
        408D   1A 10 13 40 
 2749   4091   50 13 31 30 21           .BYTE $50,$13,$31,$30,$21,$13,$11,$40
        4096   13 11 40 
 2750   4099   50 13 80 13 10           .BYTE $50,$13,$80,$13,$10,$40
        409E   40 
 2751   409F   50 13 80 13 10           .BYTE $50,$13,$80,$13,$10,$40
        40A4   40 
 2752   40A5   11 13 30 13 70           .BYTE $11,$13,$30,$13,$70,$21,$13,$40
        40AA   21 13 40 
 2753   40AD   1A 13 20 1A 13           .BYTE $1A,$13,$20,$1A,$13,$20,$1A,$60,$13,$40
        40B2   20 1A 60 13 40 
 2754   40B7   31 10 51 20 51           .BYTE $31,$10,$51,$20,$51,$40
        40BC   40 
 2755   40BD   F0 50                    .BYTE $f0,$50
 2756   40BF   F0 50                    .BYTE $f0,$50
 2757   40C1   F0 50                    .BYTE $f0,$50
 2758   40C3   F0 50                    .BYTE $f0,$50
 2759                           
 2760   40C5   F0 10 40         level3: .BYTE $F0,$10,$40
 2761   40C8   30 1A 10 1A 80           .BYTE $30,$1A,$10,$1A,$80,$1A,$10,$40
        40CD   1A 10 40 
 2762   40D0   10 13 51 13 40           .BYTE $10,$13,$51,$13,$40,$13,$31,$40
        40D5   13 31 40 
 2763   40D8   10 13 50 13 40           .BYTE $10,$13,$50,$13,$40,$13,$30,$40
        40DD   13 30 40 
 2764   40E0   10 13 40 1A 13           .BYTE $10,$13,$40,$1A,$13,$40,$13,$1A,$20,$40
        40E5   40 13 1A 20 40 
 2765   40EA   10 13 40 21 30           .BYTE $10,$13,$40,$21,$30,$31,$13,$10,$40
        40EF   31 13 10 40 
 2766   40F3   10 13 C0 13 10           .BYTE $10,$13,$C0,$13,$10,$40
        40F8   40 
 2767   40F9   10 13 30 1A 40           .BYTE $10,$13,$30,$1A,$40,$1a,$10,$1A,$10,$13,$10,$40
        40FE   1A 10 1A 10 13 
        4103   10 40 
 2768   4105   21 30 11 13 20           .BYTE $21,$30,$11,$13,$20,$13,$51,$10,$40
        410A   13 51 10 40 
 2769   410E   20 1A 30 13 1A           .BYTE $20,$1a,$30,$13,$1A,$10,$13,$60,$40
        4113   10 13 60 40 
 2770   4117   31 30 41 60 40           .BYTE $31,$30,$41,$60,$40
 2771   411C   F0 50 40                 .BYTE $F0,$50,$40
 2772   411F   F0 50 40                 .BYTE $F0,$50,$40
 2773   4122   F0 50 40                 .BYTE $F0,$50,$40
 2774   4125   F0 50 40                 .BYTE $F0,$50,$40
 2775   4128                            
 2776   4128   F0 50            level4: .BYTE $F0,$50
 2777   412A   1A 90 1A 40 1A           .BYTE $1A,$90,$1A,$40,$1A,$40
        412F   40 
 2778   4130   11 13 10 1A 60           .BYTE $11,$13,$10,$1A,$60,$11,$13,$20,$13,$11,$40
        4135   11 13 20 13 11 
        413A   40 
 2779   413B   10 11 13 11 10           .BYTE $10,$11,$13,$11,$10,$17,$18,$19,$30,$13,$10,$1A,$13,$10,$40
        4140   17 18 19 30 13 
        4145   10 1A 13 10 40 
 2780   414A   20 13 80 11 13           .BYTE $20,$13,$80,$11,$13,$21,$10,$40
        414F   21 10 40 
 2781   4152   11 13 11 14 45           .BYTE $11,$13,$11,$14,$45,$16,$30,$13,$30,$40
        4157   16 30 13 30 40 
 2782   415C   10 13 A0 13 30           .BYTE $10,$13,$a0,$13,$30,$40
        4161   40 
 2783   4162   10 13 1A 20 1A           .BYTE $10,$13,$1A,$20,$1A,$60,$13,$30,$40
        4167   60 13 30 40 
 2784   416B   13 21 10 31 10           .BYTE $13,$21,$10,$31,$10,$17,$18,$19,$13,$21,$20,$40
        4170   17 18 19 13 21 
        4175   20 40 
 2785   4177   13 20 1A 10 1A           .BYTE $13,$20,$1A,$10,$1A,$50,$13,$10,$1A,$20,$40
        417C   50 13 10 1A 20 
        4181   40 
 2786   4182   71 30 41 20 40           .BYTE $71,$30,$41,$20,$40
 2787   4187   F0 50                    .BYTE $F0,$50
 2788   4189   F0 50                    .BYTE $F0,$50
 2789   418B   F0 50                    .BYTE $F0,$50
 2790   418D   F0 50                    .BYTE $F0,$50
 2791   418F                            
 2792   418F   F0 50            level5: .BYTE $F0,$50
 2793   4191   2A 10 70 30 1A           .BYTE $2A,$10,$70,$30,$1A,$10,$1A,$40
        4196   10 1A 40 
 2794   4199   21 13 30 31 40           .BYTE $21,$13,$30,$31,$40,$11,$13,$11,$40
        419E   11 13 11 40 
 2795   41A2   20 13 70 1A 20           .BYTE $20,$13,$70,$1A,$20,$1a,$13,$1A,$40
        41A7   1A 13 1A 40 
 2796   41AB   20 13 20 2A 20           .BYTE $20,$13,$20,$2A,$20,$13,$11,$20,$21,$13,$40
        41B0   13 11 20 21 13 
        41B5   40 
 2797   41B6   20 13 20 13 11           .BYTE $20,$13,$20,$13,$11,$20,$13,$10,$1a,$30,$13,$40
        41BB   20 13 10 1A 30 
        41C0   13 40 
 2798   41C2   50 13 30 31 13           .BYTE $50,$13,$30,$31,$13,$10,$1a,$13,$40
        41C7   10 1A 13 40 
 2799   41CB   30 13 21 60 13           .BYTE $30,$13,$21,$60,$13,$10,$21,$40
        41D0   10 21 40 
 2800   41D3   11 13 10 13 80           .BYTE $11,$13,$10,$13,$80,$13,$30,$40
        41D8   13 30 40 
 2801   41DB   1A 13 10 13 10           .BYTE $1A,$13,$10,$13,$10,$1A,$10,$1A,$10,$1a,$10,$1A,$13,$10,$1A,$10,$40
        41E0   1A 10 1A 10 1A 
        41E5   10 1A 13 10 1A 
        41EA   10 40 
 2802   41EC   41 10 11 10 31           .BYTE $41,$10,$11,$10,$31,$10,$41,$10,$40
        41F1   10 41 10 40 
 2803   41F5   F0 50                    .BYTE $F0,$50
 2804   41F7   F0 50                    .BYTE $F0,$50
 2805   41F9   F0 50                    .BYTE $F0,$50
 2806   41FB   F0 50                    .BYTE $F0,$50
 2807   41FD                            
 2808   41FD   F0 50            level6: .BYTE $F0,$50
 2809   41FF   70 2A 70 40              .BYTE $70,$2A,$70,$40
 2810   4203   60 13 21 13 60           .BYTE $60,$13,$21,$13,$60,$40
        4208   40 
 2811   4209   60 13 20 13 60           .BYTE $60,$13,$20,$13,$60,$40
        420E   40 
 2812   420F   30 13 11 1A 41           .BYTE $30,$13,$11,$1A,$41,$1A,$11,$13,$30,$40
        4214   1A 11 13 30 40 
 2813   4219   30 13 80 13 30           .BYTE $30,$13,$80,$13,$30,$40
        421E   40 
 2814   421F   30 13 1A 60 1A           .BYTE $30,$13,$1A,$60,$1A,$13,$30,$40
        4224   13 30 40 
 2815   4227   20 13 31 1A 21           .BYTE $20,$13,$31,$1A,$21,$1A,$31,$13,$20,$40
        422C   1A 31 13 20 40 
 2816   4231   11 10 13 A0 13           .BYTE $11,$10,$13,$A0,$13,$20,$40
        4236   20 40 
 2817   4238   20 13 1A 20 1A           .BYTE $20,$13,$1A,$20,$1A,$20,$1A,$20,$1A,$13,$20,$40
        423D   20 1A 20 1A 13 
        4242   20 40 
 2818   4244   10 31 20 41 20           .BYTE $10,$31,$20,$41,$20,$31,$10,$40
        4249   31 10 40 
 2819   424C   F0 50                    .BYTE $F0,$50
 2820   424E   F0 50                    .BYTE $F0,$50
 2821   4250   F0 50                    .BYTE $F0,$50
 2822   4252   F0 50                    .BYTE $F0,$50
 2823   4254                     
 2824   4254   F0 50            level7: .BYTE $F0,$50
 2825   4256   F0 50                    .BYTE $F0,$50
 2826   4258   11 1A 13 10 14           .BYTE $11,$1A,$13,$10,$14,$15,$16,$1A,$17,$19,$10,$1A,$11,$20,$13,$40
        425D   15 16 1A 17 19 
        4262   10 1A 11 20 13 
        4267   40 
 2827   4268   20 13 C0 13 40           .BYTE $20,$13,$C0,$13,$40
 2828   426D   20 13 C0 13 40           .BYTE $20,$13,$C0,$13,$40
 2829   4272   1A 31 14 16 1A           .BYTE $1A,$31,$14,$16,$1A,$17,$18,$19,$1A,$21,$20,$13,$40
        4277   17 18 19 1A 21 
        427C   20 13 40 
 2830   427F   F0 13 40                 .BYTE $F0,$13,$40
 2831   4282   F0 13 40                 .BYTE $F0,$13,$40
 2832   4285   11 17 18 19 1A           .BYTE $11,$17,$18,$19,$1A,$11,$1A,$14,$15,$16,$10,$17,$19,$20,$13,$40
        428A   11 1A 14 15 16 
        428F   10 17 19 20 13 
        4294   40 
 2833   4295   F0 13 40                 .BYTE $F0,$13,$40
 2834   4298   14 C5 15 16 11           .BYTE $14,$C5,$15,$16,$11,$40
        429D   40 
 2835   429E   F0 50                    .BYTE $F0,$50
 2836   42A0   F0 50                    .BYTE $F0,$50
 2837   42A2   F0 50                    .BYTE $F0,$50
 2838   42A4   F0 50                    .BYTE $F0,$50
 2839                           
 2840   42A6   F0 50            level8: .BYTE $F0,$50
 2841   42A8   1A 80 1A 50 11           .BYTE $1A,$80,$1A,$50,$11,$40
        42AD   40 
 2842   42AE   11 40 11 1A 10           .BYTE $11,$40,$11,$1A,$10,$21,$20,$1a,$30,$40
        42B3   21 20 1A 30 40 
 2843   42B8   20 21 20 21 40           .BYTE $20,$21,$20,$21,$40,$21,$10,$1a,$40
        42BD   21 10 1A 40 
 2844   42C1   A0 1A 30 11 13           .BYTE $a0,$1a,$30,$11,$13,$40
        42C6   40 
 2845   42C7   11 30 21 40 21           .BYTE $11,$30,$21,$40,$21,$30,$13,$40
        42CC   30 13 40 
 2846   42CF   60 1A 80 13 40           .BYTE $60,$1a,$80,$13,$40
 2847   42D4   60 11 80 13 40           .BYTE $60,$11,$80,$13,$40
 2848   42D9   11 C0 1A 10 13           .BYTE $11,$C0,$1A,$10,$13,$40
        42DE   40 
 2849   42DF   1A 20 21 10 1A           .BYTE $1A,$20,$21,$10,$1A,$10,$21,$50,$13,$40
        42E4   10 21 50 13 40 
 2850   42E9   21 30 21 40 21           .BYTE $21,$30,$21,$40,$21,$10,$21,$40
        42EE   10 21 40 
 2851   42F1   F0 50                    .BYTE $F0,$50
 2852   42F3   F0 50                    .BYTE $F0,$50
 2853   42F5   F0 50                    .BYTE $F0,$50
 2854   42F7   F0 50                    .BYTE $F0,$50
 2855   42F9                            
 2856   42F9   F0 50            level9: .BYTE $F0,$50
 2857   42FB   A0 1A 50 40              .BYTE $A0,$1A,$50,$40
 2858   42FF   10 11 13 22 11           .BYTE $10,$11,$13,$22,$11,$20,$11,$22,$14,$15,$16,$1A,$11,$40
        4304   20 11 22 14 15 
        4309   16 1A 11 40 
 2859   430D   20 13 22 20 13           .BYTE $20,$13,$22,$20,$13,$10,$22,$50,$40
        4312   10 22 50 40 
 2860   4316   20 13 22 20 13           .BYTE $20,$13,$22,$20,$13,$10,$22,$20,$1A,$20,$40
        431B   10 22 20 1A 20 
        4320   40 
 2861   4321   30 22 20 13 1A           .BYTE $30,$22,$20,$13,$1A,$22,$20,$31,$40
        4326   22 20 31 40 
 2862   432A   20 13 22 20 21           .BYTE $20,$13,$22,$20,$21,$22,$50,$40
        432F   22 50 40 
 2863   4332   20 13 22 13 30           .BYTE $20,$13,$22,$13,$30,$22,$1A,$30,$1A,$40
        4337   22 1A 30 1A 40 
 2864   433C   11 10 13 22 13           .BYTE $11,$10,$13,$22,$13,$30,$22,$14,$15,$16,$10,$21,$30
        4341   30 22 14 15 16 
        4346   10 21 30 
 2865   4349   1A 10 13 22 13           .BYTE $1A,$10,$13,$22,$13,$2A,$10,$22,$1A,$40,$40
        434E   2A 10 22 1A 40 
        4353   40 
 2866   4354   31 22 31 10 22           .BYTE $31,$22,$31,$10,$22,$51,$40
        4359   51 40 
 2867   435B   F0 50                    .BYTE $F0,$50
 2868   435D   F0 50                    .BYTE $F0,$50
 2869   435F   F0 50                    .BYTE $F0,$50
 2870   4361   F0 50                    .BYTE $F0,$50
 2871                           
 2872   4363   70 22 70 40      level10:.BYTE $70,$22,$70,$40
 2873   4367   70 22 30 1A 30           .BYTE $70,$22,$30,$1A,$30,$40
        436C   40 
 2874   436D   1A 60 22 21 10           .BYTE $1A,$60,$22,$21,$10,$31,$13,$40
        4372   31 13 40 
 2875   4375   11 13 21 20 11           .BYTE $11,$13,$21,$20,$11,$22,$60,$13,$40
        437A   22 60 13 40 
 2876   437E   10 13 50 22 10           .BYTE $10,$13,$50,$22,$10,$1A,$40,$13,$40
        4383   1A 40 13 40 
 2877   4387   10 13 30 1A 10           .BYTE $10,$13,$30,$1A,$10,$22,$31,$30,$13,$40
        438C   22 31 30 13 40 
 2878   4391   10 13 20 31 22           .BYTE $10,$13,$20,$31,$22,$60,$13,$40
        4396   60 13 40 
 2879   4399   10 13 1A 40 22           .BYTE $10,$13,$1A,$40,$22,$20,$1A,$30,$13,$40
        439E   20 1A 30 13 40 
 2880   43A3   31 40 61 20 13           .BYTE $31,$40,$61,$20,$13,$40
        43A8   40 
 2881   43A9   1A E0 13 40              .BYTE $1A,$E0,$13,$40
 2882   43AD   F1 11 40                 .BYTE $F1,$11,$40
 2883   43B0   F0 50                    .BYTE $F0,$50
 2884   43B2   F0 50                    .BYTE $F0,$50
 2885   43B4   F0 50                    .BYTE $F0,$50
 2886   43B6   F0 50                    .BYTE $F0,$50
 2887                           
 2888   43B8   F0 50            level11:.BYTE $F0,$50
 2889   43BA   F0 50                    .BYTE $F0,$50
 2890   43BC   50 41 B0                 .BYTE $50,$41,$b0
 2891   43BF   11 E0 50                 .BYTE $11,$e0,$50
 2892   43C2   20 1A 10 1A 20           .BYTE $20,$1A,$10,$1A,$20,$1A,$10,$1A,$10,$22,$30,$40
        43C7   1A 10 1A 10 22 
        43CC   30 40 
 2893   43CE   20 21 13 20 13           .BYTE $20,$21,$13,$20,$13,$21,$10,$22,$20,$1A,$40
        43D3   21 10 22 20 1A 
        43D8   40 
 2894   43D9   40 13 20 13 20           .BYTE $40,$13,$20,$13,$20,$1a,$22,$10,$21,$40
        43DE   1A 22 10 21 40 
 2895   43E3   40 13 2A 13 20           .BYTE $40,$13,$2A,$13,$20,$11,$22,$1a,$20,$40
        43E8   11 22 1A 20 40 
 2896   43ED   11 30 11 23 11           .BYTE $11,$30,$11,$23,$11,$30,$22,$11,$20,$40
        43F2   30 22 11 20 40 
 2897   43F7   20 1A 20 23 40           .BYTE $20,$1A,$20,$23,$40,$22,$2a,$10,$40
        43FC   22 2A 10 40 
 2898   4400   F1 11 40                 .BYTE $F1,$11,$40
 2899   4403   F0 50                    .BYTE $F0,$50
 2900   4405   F0 50                    .BYTE $F0,$50
 2901   4407   F0 50                    .BYTE $F0,$50
 2902   4409   F0 50                    .BYTE $F0,$50
 2903                           
 2904   440B   F0 50            level12:.BYTE $F0,$50
 2905   440D   10 1A 10 1A 30           .BYTE $10,$1A,$10,$1A,$30,$1A,$10,$1A,$60,$40
        4412   1A 10 1A 60 40 
 2906   4417   21 13 11 30 11           .BYTE $21,$13,$11,$30,$11,$13,$11,$20,$1A,$10,$1A,$10,$40
        441C   13 11 20 1A 10 
        4421   1A 10 40 
 2907   4424   20 13 50 13 30           .BYTE $20,$13,$50,$13,$30,$41,$40
        4429   41 40 
 2908   442B   20 13 40 1A 13           .BYTE $20,$13,$40,$1A,$13,$70,$40
        4430   70 40 
 2909   4432   30 14 25 16 21           .BYTE $30,$14,$25,$16,$21,$70,$40
        4437   70 40 
 2910   4439   20 13 D0 40              .BYTE $20,$13,$D0,$40
 2911   443D   10 13 11 50 11           .BYTE $10,$13,$11,$50,$11,$13,$10,$17,$28,$19,$10,$40
        4442   13 10 17 28 19 
        4447   10 40 
 2912   4449   11 13 70 13 60           .BYTE $11,$13,$70,$13,$60,$40
        444E   40 
 2913   444F   1A 13 1A 50 1A           .BYTE $1A,$13,$1A,$50,$1A,$13,$40,$2A,$40
        4454   13 40 2A 40 
 2914   4458   31 50 81 40              .BYTE $31,$50,$81,$40
 2915   445C   F0 50                    .BYTE $F0,$50
 2916   445E   F0 50                    .BYTE $F0,$50
 2917   4460   F0 50                    .BYTE $F0,$50
 2918   4462   F0 50                    .BYTE $F0,$50
 2919                           
 2920   4464   90 12 60 40      level13:.BYTE $90,$12,$60,$40
 2921   4468   11 10 1A 60 12           .BYTE $11,$10,$1A,$60,$12,$40,$1a,$10,$40
        446D   40 1A 10 40 
 2922   4471   10 21 20 1A 30           .BYTE $10,$21,$20,$1A,$30,$12,$20,$1A,$10,$21,$40
        4476   12 20 1A 10 21 
        447B   40 
 2923   447C   40 41 13 21 13           .BYTE $40,$41,$13,$21,$13,$11,$30,$40
        4481   11 30 40 
 2924   4484   80 13 20 13 40           .BYTE $80,$13,$20,$13,$40,$40
        4489   40 
 2925   448A   80 13 2A 13 40           .BYTE $80,$13,$2A,$13,$40,$40
        448F   40 
 2926   4490   70 13 41 13 30           .BYTE $70,$13,$41,$13,$30,$40
        4495   40 
 2927   4496   10 2A 40 13 40           .BYTE $10,$2A,$40,$13,$40,$13,$30,$40
        449B   13 30 40 
 2928   449E   14 15 16 40 13           .BYTE $14,$15,$16,$40,$13,$40,$13,$20,$11,$40
        44A3   40 13 20 11 40 
 2929   44A8   50 2A 13 40 13           .BYTE $50,$2A,$13,$40,$13,$2A,$10,$40
        44AD   2A 10 40 
 2930   44B0   10 31 10 31 40           .BYTE $10,$31,$10,$31,$40,$41,$40
        44B5   41 40 
 2931   44B7   F0 50                    .BYTE $F0,$50
 2932   44B9   F0 50                    .byte $F0,$50
 2933   44BB   F0 50                    .BYTE $F0,$50
 2934   44BD   F0 50                    .BYTE $F0,$50
 2935                           
 2936   44BF   F0 50            level14:.BYTE $F0,$50
 2937   44C1   90 1A 60 40              .BYTE $90,$1A,$60,$40
 2938   44C5   1A 30 1A 10 1A           .BYTE $1A,$30,$1A,$10,$1A,$20,$11,$13,$30,$1A,$10,$40
        44CA   20 11 13 30 1A 
        44CF   10 40 
 2939   44D1   11 20 21 13 11           .BYTE $11,$20,$21,$13,$11,$30,$13,$20,$31,$40
        44D6   30 13 20 31 40 
 2940   44DB   50 13 40 13 50           .BYTE $50,$13,$40,$13,$50,$40
        44E0   40 
 2941   44E1   40 1A 13 40 1A           .BYTE $40,$1A,$13,$40,$1A,$50,$40
        44E6   50 40 
 2942   44E8   40 21 20 31 10           .BYTE $40,$21,$20,$31,$10,$17,$18,$19,$13,$40
        44ED   17 18 19 13 40 
 2943   44F2   90 13 50 13 40           .BYTE $90,$13,$50,$13,$40
 2944   44F7   11 13 70 13 50           .BYTE $11,$13,$70,$13,$50,$13,$40
        44FC   13 40 
 2945   44FE   10 13 20 1A 20           .BYTE $10,$13,$20,$1A,$20,$1A,$30,$1A,$20,$1A,$13,$40
        4503   1A 30 1A 20 1A 
        4508   13 40 
 2946   450A   10 51 10 31 10           .BYTE $10,$51,$10,$31,$10,$21,$10,$21,$40
        450F   21 10 21 40 
 2947   4513   F0 50                    .BYTE $F0,$50
 2948   4515   F0 50                    .BYTE $F0,$50
 2949   4517   F0 50                    .BYTE $F0,$50
 2950   4519   F0 50                    .BYTE $F0,$50
 2951                           
 2952   451B   F0 50            level15:.BYTE $F0,$50
 2953   451D   A0 1A 50 40              .BYTE $A0,$1A,$50,$40
 2954   4521   1A 30 1A 50 11           .BYTE $1A,$30,$1A,$50,$11,$50,$40
        4526   50 40 
 2955   4528   21 10 21 10 21           .BYTE $21,$10,$21,$10,$21,$13,$70,$40
        452D   13 70 40 
 2956   4530   80 13 70 40              .BYTE $80,$13,$70,$40
 2957   4534   80 13 1A 40 11           .BYTE $80,$13,$1A,$40,$11,$13,$40
        4539   13 40 
 2958   453B   80 21 10 31 10           .BYTE $80,$21,$10,$31,$10,$13,$40
        4540   13 40 
 2959   4542   F0 13 40                 .BYTE $F0,$13,$40
 2960   4545   11 E0 13 40              .BYTE $11,$E0,$13,$40
 2961   4549   1A 60 1A 40 1A           .BYTE $1A,$60,$1A,$40,$1A,$10,$1A,$13,$40
        454E   10 1A 13 40 
 2962   4552   42 20 42 10 52           .BYTE $42,$20,$42,$10,$52,$40
        4557   40 
 2963   4558   F0 50                    .BYTE $F0,$50
 2964   455A   F0 50                    .BYTE $F0,$50
 2965   455C   F0 50                    .BYTE $F0,$50
 2966   455E   21 10 21 50 21           .BYTE $21,$10,$21,$50,$21,$40,$40
        4563   40 40 
 2967                           
 2968                           ;0=nothing
 2969                           ;1=jump                    ok
 2970                           ;2=throw spanner           ok
 2971                           ;3=hit by spanner/bird     ok
 2972                           ;4=death                   ok
 2973                           ;5=eat lunch               ok
 2974                           ;6=levelend Score update   ok
 2975                           
 2976   4565                    sound:
 2977   4565   E0 04                    cpx #4
 2978   4567   D0 1F                    bne chk3
 2979   4569   A9 0A                    lda #10
 2980   456B   85 60                    sta TMP
 2981   456D                    sndloop: 
 2982   456D   A9 02                    lda #2
 2983   456F   A6 60                    ldx TMP
 2984   4571   A0 02                    ldy #2
 2985   4573   20 D8 47                 jsr playsound
 2986   4576   E6 60                    inc TMP
 2987   4578   A5 60                    lda TMP
 2988   457A   C9 50                    cmp #80
 2989   457C   D0 EF                    bne sndloop
 2990   457E   A9 14                    lda #20
 2991   4580   A2 20                    ldx #32
 2992   4582   A0 20                    ldy #32
 2993   4584   20 D8 47                 jsr playsound
 2994   4587   60                       rts     
 2995   4588                    chk3:
 2996                           ;       cpx #3
 2997                           ;       bne makesound
 2998                           ;       lda #10
 2999                           ;       sta TMP
 3000                           ;sndloop2: 
 3001                           ;       lda #2
 3002                           ;       ldx TMP
 3003                           ;       ldy #16
 3004                           ;       jsr playsound
 3005                           ;       inc TMP
 3006                           ;       lda TMP
 3007                           ;       cmp #80
 3008                           ;       bne sndloop2
 3009                           ;       rts     
 3010                           
 3011   4588                    makesound:
 3012                           
 3013   4588   BC 9F 45                 ldy soundoctave,x
 3014   458B   BD A6 45                 lda soundlen,x
 3015   458E   48                       pha
 3016   458F   BD 98 45                 lda soundpitch,x
 3017   4592   AA                       tax
 3018   4593   68                       pla
 3019   4594   20 D8 47                 jsr playsound
 3020   4597   60                       rts
 3021   4598                     
 3022                           ;             100,6,6,200,130,5
 3023   4598                    soundpitch:
 3024   4598   01 10 20 20 01           .db  1,16,32,32, 1,16,16
        459D   10 10 
 3025   459F                    soundoctave:
 3026   459F   01 02 04 20 01           .db  1, 2, 4,32, 1,32, 4
        45A4   20 04 
 3027   45A6                    soundlen:
 3028   45A6   0A 0A 0A 46 0A           .db 10,10,10,70,10,10, 2
        45AB   0A 02 
 3029   45AD                                                             
 3030                           ;--------------------------------
 3031                           ;Sprite types -
 3032                           ;
 3033                           ; 0 - Big Kong
 3034                           ;     Stands still, throws barrels
 3035                           ;     Also plots damsel sprite
 3036                           ;     Size 12 x 32
 3037                           ;     Sprites 0-1 for Kong, 2 for haylp, 3 for barrel. Damsel sprite with players
 3038                           ;     Uses seperate variables, so no more than one per screen!
 3039                           ;
 3040                           ; 1 - Bird
 3041                           ;     Moves between D1 and D2
 3042                           ;     Sprites 4-9
 3043                           ;     Size 12 x 12
 3044                           ;
 3045                           ; 2 - Monkey
 3046                           ;     Sits still and throws stuff
 3047                           ;     Sprites 10 & 11
 3048                           ;     Size 12 x 16
 3049                           ;
 3050                           ; 3 - Peter the Panda
 3051                           ;     Sits still and does nothing
 3052                           ;     Size 12 x 32
 3053                           ;     Sprite 16
 3054                           ;
 3055                           ;Sprite format -
 3056                           ;
 3057                           ; Byte 0 - X and D1, or $FF for end of list
 3058                           ; Byte 1 - bits 7-3 = Y
 3059                           ;          bits 2-0 = type
 3060                           ; Byte 2 - bit 7 - direction
 3061                           ;          bits 6-0 - D2
 3062                           ;--------------------------------
 3063                           
 3064   45AD   28 00 00         sprites1: .BYTE 40,0,0
 3065   45B0   80 29 24                   .BYTE 0+128,40+1,36
 3066   45B3   08 61 18                   .BYTE 8,96+1,24
 3067   45B6   1C 39 38                   .BYTE 28,56+1,56
 3068   45B9   FF                         .BYTE $FF
 3069                           
 3070   45BA   34 72 80         sprites2: .BYTE 52,112+2,$80
 3071   45BD   30 42 80                   .BYTE 48,64+2,$80
 3072   45C0   30 12 80                   .BYTE 48,16+2,$80
 3073   45C3   0C 71 30                   .BYTE 12,112+1,48          
 3074   45C6   FF                         .BYTE $FF          
 3075                           
 3076   45C7   00 09 38         sprites3: .BYTE 0,8+1,56
 3077   45CA   2C 42 80                   .BYTE 44,64+2,$80
 3078   45CD   00 92 00                   .BYTE 0,144+2,0
 3079   45D0   08 61 30                   .BYTE 8,96+1,48
 3080   45D3   FF                         .BYTE $FF
 3081                           
 3082   45D4   28 92 80         sprites4: .BYTE 40,144+2,$80
 3083   45D7   0C 09 32                   .BYTE 12,8+1,50
 3084   45DA   36 61 8C                   .BYTE 54,96+1,12+128
 3085   45DD   18 72 00                   .BYTE 24,112+2,0
 3086   45E0   FF                         .BYTE $FF
 3087   45E1                              
 3088   45E1   18 00 00         sprites5: .BYTE 24,0,0
 3089   45E4   94 31 34                   .BYTE 20+128,48+1,52
 3090   45E7   94 C1 30                   .BYTE 20+128,192+1,48
 3091   45EA   FF                         .BYTE $FF
 3092                           
 3093   45EB   00 09 18         sprites6: .BYTE 0,8+1,24
 3094   45EE   3C 09 A4                   .BYTE 60,8+1,36+128
 3095   45F1   10 51 28                   .BYTE 16,80+1,40
 3096   45F4   0C 79 2C                   .BYTE 12,120+1,44
 3097   45F7   FF                         .BYTE $FF
 3098                           
 3099   45F8   00 09 2C         sprites7: .BYTE 0,8+1,44
 3100   45FB   34 31 8C                   .BYTE 52,48+1,12+128
 3101   45FE   04 61 34                   .BYTE 4,96+1,52
 3102   4601   30 42 80                   .BYTE 48,64+2,$80
 3103   4604   FF                         .BYTE $FF
 3104                           
 3105   4605   00 42 3C         sprites8: .BYTE 0,64+2,60
 3106   4608   3C 02 80                   .BYTE 60,0+2,$80
 3107   460B   00 09 2C                   .BYTE 0,8+1,44
 3108   460E   04 79 34                   .BYTE 4,120+1,52          
 3109   4611   FF                         .BYTE $FF
 3110                           
 3111   4612   00 09 38         sprites9: .BYTE 0,8+1,56
 3112   4615   3C 42 80                   .BYTE 60,64+2,$80
 3113   4618   3C 92 80                   .BYTE 60,144+2,$80
 3114   461B   FF                         .BYTE $FF
 3115   461C                              
 3116   461C   24 12 00         sprites10: .BYTE 36,16+2,0
 3117   461F   24 42 00                    .BYTE 36,64+2,0
 3118   4622   24 72 00                    .BYTE 36,112+2,0
 3119   4625   18 22 80                    .BYTE 24,32+2,$80
 3120   4628   18 52 80                    .BYTE 24,80+2,$80
 3121   462B   08 71 20                    .BYTE 8,112+1,32                    
 3122   462E   FF                          .BYTE $FF
 3123                           
 3124   462F   16 00 00         sprites11: .BYTE 22,0,0
 3125   4632   00 22 00                    .BYTE 0,32+2,0
 3126   4635   3C 92 80                    .BYTE 60,144+2,$80
 3127   4638   40 92 00                    .BYTE 64,144+2,0                
 3128   463B   FF                          .BYTE $FF
 3129                           
 3130   463C   30 83 00         sprites12: .BYTE 48,128+3,0
 3131   463F   00 12 00                    .BYTE 0,16+2,0
 3132   4642   08 81 1C                    .BYTE 8,128+1,28
 3133   4645   24 41 38                    .BYTE 36,64+1,56
 3134   4648   FF                          .BYTE $FF
 3135                           
 3136   4649   00 02 00         sprites13: .BYTE 0,0+2,0
 3137   464C   3C 72 80                    .BYTE 60,112+2,$80
 3138   464F   28 09 3C                    .BYTE 40,8+1,60
 3139   4652   FF                          .BYTE $FF
 3140                           
 3141   4653   00 09 38         sprites14: .BYTE 0,8+1,56
 3142   4656   08 91 34                    .BYTE 8,144+1,52
 3143   4659   20 52 00                    .BYTE 32,80+2,0
 3144   465C   3C 22 80                    .BYTE 60,32+2,$80           
 3145   465F   FF                          .BYTE $FF
 3146                           
 3147   4660   00 91 1C         sprites15: .BYTE 0,144+1,28      ;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 3148   4663   34 91 A0                    .BYTE 52,144+1,32+128
 3149   4666   38 09 80                    .BYTE 56,8+1,$80
 3150   4669   24 31 38                    .BYTE 36,48+1,56
 3151   466C   FF                          .BYTE $FF
 3152                           
 3153   466D   1A 00 00         sprites16: .BYTE 26,0,0
 3154   4670   38 29 A8                    .BYTE 56,40+1,40+128
 3155   4673   10 59 28                    .BYTE 16,88+1,40
 3156   4676   00 29 10                    .BYTE 0,40+1,16
 3157   4679   FF                          .BYTE $FF
 3158                           
 3159                           ;--------------------------------
 3160                           ;Data tables
 3161                           ;--------------------------------
 3162                           
 3163   467A   7140 6444 C540   levs:      .word level2,  level13,  level3,  level4,  level6,  level12,  level14,  level5,  level9, 
                             level6,   level7,  level8,  level11,  level10,  level15,  level1
        4680   2841 FD41 0B44 
        4686   BF44 8F41 F942 
        468C   FD41 5442 A642 
        4692   B843 6343 1B45 
        4698   0540 
 3164   469A   BA45 4946 C745   sprs:      .word sprites2,sprites13,sprites3,sprites4,sprites6,sprites12,sprites14,sprites5,sprites9
                            ,sprites16,sprites7,sprites8,sprites11,sprites10,sprites15,sprites1
        46A0   D445 EB45 3C46 
        46A6   5346 E145 1246 
        46AC   6D46 F845 0546 
        46B2   2F46 1C46 6046 
        46B8   AD45 
 3165   46BA   8B3C 633E D23E   sprrouts:  .word bkrout,birdrout,monkeyrout,pandarout
        46C0   753C 
 3166   46C2   034E 634E C34E   spr24:     .word gr1,gr2,haylp,br1,bd11,bd12,bd13,bd21,bd22,bd23,mn1,mn2,sp1,sp2,sp3,sp4,pn1
        46C8   0B4F 7B4F 9F4F 
        46CE   C34F E74F 0B50 
        46D4   2F50 3B4F 5B4F 
        46DA   5350 7350 9350 
        46E0   B350 D350 
 3167   46E4   00 01 00 02      frames:    .db 0,1,0,2
 3168   46E8   00 01 01 00 01   solid:     .db 0,1,1,0,1,1,1,1,1,1,0
        46ED   01 01 01 01 01 
        46F2   00 
 3169                           
 3170                           ;--------------------------------
 3171                           ;String declarations
 3172                           ;--------------------------------
 3173                           
 3174   46F3   85 01 2A 2A 2A   banner:    .db blue+5, 1,'*** HARD HAT HARRY ***',0,$ff
        46F8   20 48 41 52 44 
        46FD   20 48 41 54 20 
        4702   48 41 52 52 59 
        4707   20 2A 2A 2A 00 
        470C   FF 
 3175   470D   4B 04 48 49 47   hiscr:     .db yellow+11, 4,'HIGH SCORES',0,$ff   
        4712   48 20 53 43 4F 
        4717   52 45 53 00 FF 
 3176   471C   C7 05 20 31 29   hiline:    .db red+7, 5,' 1)  HHH  00100000',0,$ff
        4721   20 20 48 48 48 
        4726   20 20 30 30 31 
        472B   30 30 30 30 30 
        4730   00 FF 
 3177   4732   86 13 52 45 54   rs:        .db blue+6,19,'RETRO SOFTWARE  2011',0,$ff
        4737   52 4F 20 53 4F 
        473C   46 54 57 41 52 
        4741   45 20 20 32 30 
        4746   31 31 00 FF 
 3178   474A   C2 16 50 52 45   prsspc:    .db red+2,22,'PRESS SPACE OR FIRE TO START',0,$ff
        474F   53 53 20 53 50 
        4754   41 43 45 20 4F 
        4759   52 20 46 49 52 
        475E   45 20 54 4F 20 
        4763   53 54 41 52 54 
        4768   00 FF 
 3179   476A   8C 0C 4C 45 56   levelstr:  .db blue+12,12,'LEVEL',0,$FF
        476F   45 4C 00 FF 
 3180   4773                    prtscore:
 3181   4773   80 00 30 30 30   prtnum:    .db blue+0, 0,'00000000',0,$ff
        4778   30 30 30 30 30 
        477D   00 FF 
 3182   477F   99 00 4C 49 56   livesstr:  .db blue+25, 0,'LIVES=',0,$FF        
        4784   45 53 3D 00 FF 
 3183   4789   98 17 54 49 4D   timestr:   .db blue+24,23,'TIME=',0
        478E   45 3D 00 
 3184   4791   9D 17 39 39 39   timenum    .db blue+29,23,'999',0,$FF
        4796   00 FF 
 3185   4798   80 17 4C 45 56   level2str: .db blue+0,23,'LEVEL=',0,$FF
        479D   45 4C 3D 00 FF 
 3186   47A2   8B 0C 47 41 4D   gameovr:   .db blue+11,12,"GAME  OVER",0,$FF
        47A7   45 20 20 4F 56 
        47AC   45 52 00 FF 
 3187   47B0   47 13 43 4F 4E   typename:  .db yellow+7,19,'CONGRATULATIONS!!!',0
        47B5   47 52 41 54 55 
        47BA   4C 41 54 49 4F 
        47BF   4E 53 21 21 21 
        47C4   00 
 3188   47C5   88 16 45 4E 54              .db blue+8,22,'ENTER YOUR NAME',0,$ff
        47CA   45 52 20 59 4F 
        47CF   55 52 20 4E 41 
        47D4   4D 45 00 FF 
 3189                           
 3190   47D8                                   include sound.inc
 3191                           ;---------------------------------------------------
 3192                           ; SOUND A,X,Y, produce tone
 3193                           ;
 3194                           ; A = Duration (1-255) * 0,005 usec
 3195                           ; X = Pitch (9-19)
 3196                           ; Y = Octave (0-7)
 3197                           ;---------------------------------------------------
 3198                           
 3199          0099             dur_val   equ $99
 3200          009A             pit_val   equ $9a
 3201          009B             oct_val   equ $9b
 3202                           
 3203   47D8                    playsound:
 3204   47D8   85 99                    sta dur_val
 3205   47DA   86 9A                    stx pit_val
 3206   47DC   84 9B                    sty oct_val
 3207                           
 3208   47DE   A9 13                    lda #>5000     ; 2
 3209   47E0   8D 09 B8                 sta $b809      ; 4
 3210   47E3   A9 88                    lda #<5000     ; 2
 3211   47E5   8D 08 B8                 sta $b808      ; 4
 3212                           loop3:                       ;  
 3213   47E8   20 03 48                   jsr toggle         ;22 , t3=t2+25
 3214                           
 3215   47EB   A4 9B                      ldy oct_val        ; 3 , t2=Y*(t1+5)+3
 3216   47ED   A6 9A            loop2:     ldx pit_val       ; 3 , t1=X*34+3
 3217   47EF   AD 09 B8         loop1:        lda $b809      ; 4
 3218   47F2   C9 FF                          cmp #$ff       ; 2
 3219   47F4   F0 16                          beq chk_timer  ; 2
 3220   47F6   20 1D 48                       jsr wait       ; 6+15
 3221   47F9   CA               loop5:        dex            ; 2
 3222   47FA   D0 F3                        bne loop1        ; 3
 3223   47FC   88                           dey              ; 2
 3224   47FD   D0 EE                      bne loop2          ; 3
 3225   47FF   4C E8 47                 jmp loop3            ; 3
 3226                           
 3227   4802                    end_sound:
 3228   4802   60                       rts             
 3229                           
 3230                           ;--------------------------------------
 3231                           ; Toggle speaker
 3232                           ;--------------------------------------
 3233   4803                    toggle:
 3234   4803   AD 02 B0                 lda $b002      ; 4
 3235   4806   49 04                    eor #4         ; 2
 3236   4808   8D 02 B0                 sta $b002      ; 4
 3237   480B   60                       rts            ; 6
 3238                           
 3239                           ;--------------------------------------
 3240                           ; Check if time is over (21 usec)
 3241                           ;--------------------------------------
 3242   480C                    chk_timer:
 3243   480C   C6 99                    dec dur_val    ; 3
 3244   480E   F0 F2                    beq end_sound  ; 3
 3245   4810                    settimer:
 3246   4810   A9 13                    lda #>5000     ; 2
 3247   4812   8D 09 B8                 sta $b809      ; 4
 3248   4815   A9 88                    lda #<5000     ; 2
 3249   4817   8D 08 B8                 sta $b808      ; 4
 3250   481A   4C F9 47                 jmp loop5      ; 3
 3251                           
 3252                           ;--------------------------------------
 3253                           ; Wait routine 21-6=15 usec
 3254                           ;--------------------------------------
 3255   481D                    wait:
 3256   481D   45 00                    eor $0         ; 3
 3257   481F   EA                       nop            ; 2
 3258   4820   EA                       nop            ; 2
 3259   4821   EA                       nop            ; 2
 3260   4822   60                       rts            ; 6
 3261                           
 3262   4823                    bleep:
 3263   4823   A9 20                    lda #$20
 3264   4825   8D 5E 48                 sta bleep_data
 3265   4828                    bl1:
 3266   4828   AD 62 48                 lda bleep_data+4
 3267   482B   8D 5F 48                 sta bleep_data+1
 3268   482E                    bl2:
 3269   482E   AD 02 B0                 lda $b002
 3270   4831   49 04                    eor #4
 3271   4833   8D 02 B0                 sta $b002
 3272   4836   AE 5E 48                 ldx bleep_data
 3273   4839                    bl3:
 3274   4839   AC 61 48                 ldy bleep_data+3
 3275   483C                    bl4:
 3276   483C   88                       dey
 3277   483D   D0 FD                    bne bl4
 3278   483F   CA                       dex
 3279   4840   D0 F7                    bne bl3
 3280   4842   49 04                    eor #4
 3281   4844   8D 02 B0                 sta $b002
 3282   4847   AE 5E 48                 ldx bleep_data  
 3283   484A                    bl5:
 3284   484A   AC 61 48                 ldy bleep_data+3
 3285   484D                    bl6:
 3286   484D   88                       dey
 3287   484E   D0 FD                    bne bl6
 3288   4850   E8                       inx
 3289   4851   D0 F7                    bne bl5
 3290   4853   CE 5F 48                 dec bleep_data+1
 3291   4856   D0 D6                    bne bl2
 3292   4858   EE 5E 48                 inc bleep_data
 3293   485B   D0 CB                    bne bl1
 3294   485D   60                       rts
 3295                           
 3296   485E   00 00 00 00 00   bleep_data:     .db 0,0,0,0,0
 3297                           
 3298   4863                                   include sprites.inc
 3299   4863                    sprites:
 3300                           ;sprite 0        Harry facing right stand
 3301   4863   0A 2A AA AA AA   .db $0A,$2A,$AA,$AA,$AA,$54,$54,$55
        4868   54 54 55 
 3302   486B   15 05 2A 2F 2F   .db $15,$05,$2A,$2F,$2F,$2F,$2F,$25
        4870   2F 2F 25 
 3303   4873   3F 0F 0F 0F 0F   .db $3F,$0F,$0F,$0F,$0F,$0F,$0F,$0F
        4878   0F 0F 0F 
 3304   487B   00 80 A0 A0 A8   .db $00,$80,$A0,$A0,$A8,$10,$D4,$50
        4880   10 D4 50 
 3305   4883   40 00 80 80 80   .db $40,$00,$80,$80,$80,$80,$80,$80
        4888   80 80 80 
 3306   488B   C0 00 00 00 00   .db $C0,$00,$00,$00,$00,$00,$00,$C0
        4890   00 00 C0 
 3307   4893   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4898   00 00 00 
 3308   489B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        48A0   00 00 00 
 3309   48A3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        48A8   00 00 00 
 3310                           ;Sprite 1        Harry facing right walk1
 3311   48AB   00 02 0A 0A 0A   .db $00,$02,$0A,$0A,$0A,$05,$05,$05
        48B0   05 05 05 
 3312   48B3   01 00 02 02 02   .db $01,$00,$02,$02,$02,$02,$02,$02
        48B8   02 02 02 
 3313   48BB   03 00 00 00 00   .db $03,$00,$00,$00,$00,$00,$00,$00
        48C0   00 00 00 
 3314   48C3   A0 A8 AA AA AA   .db $A0,$A8,$AA,$AA,$AA,$41,$4D,$55
        48C8   41 4D 55 
 3315   48CB   54 50 A8 F8 F8   .db $54,$50,$A8,$F8,$F8,$F8,$F8,$58
        48D0   F8 F8 58 
 3316   48D3   FC F0 F0 F0 F0   .db $FC,$F0,$F0,$F0,$F0,$F0,$F0,$FC
        48D8   F0 F0 FC 
 3317   48DB   00 00 00 00 80   .db $00,$00,$00,$00,$80,$00,$40,$00
        48E0   00 40 00 
 3318   48E3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        48E8   00 00 00 
 3319   48EB   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        48F0   00 00 00 
 3320                           ;Sprite 2        Harry facing right walk2
 3321   48F3   0A 2A AA AA AA   .db $0A,$2A,$AA,$AA,$AA,$54,$54,$55
        48F8   54 54 55 
 3322   48FB   15 05 2A 2F 2B   .db $15,$05,$2A,$2F,$2B,$2A,$2A,$2A
        4900   2A 2A 2A 
 3323   4903   3F 0F 0F 3F 3F   .db $3F,$0F,$0F,$3F,$3F,$F0,$F0,$FC
        4908   F0 F0 FC 
 3324   490B   00 80 A0 A0 A8   .db $00,$80,$A0,$A0,$A8,$10,$D4,$50
        4910   10 D4 50 
 3325   4913   40 00 80 80 C0   .db $40,$00,$80,$80,$C0,$F0,$50,$80
        4918   F0 50 80 
 3326   491B   C0 00 00 C0 C0   .db $C0,$00,$00,$C0,$C0,$F0,$F0,$FC
        4920   F0 F0 FC 
 3327   4923   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4928   00 00 00 
 3328   492B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4930   00 00 00 
 3329   4933   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4938   00 00 00 
 3330                           ;Sprite 3        Harry facing left stand
 3331   493B   00 02 0A 0A 0A   .db $00,$02,$0A,$0A,$0A,$05,$05,$05
        4940   05 05 05 
 3332   4943   01 00 02 02 02   .db $01,$00,$02,$02,$02,$02,$02,$02
        4948   02 02 02 
 3333   494B   03 00 00 03 03   .db $03,$00,$00,$03,$03,$0F,$0F,$0F
        4950   0F 0F 0F 
 3334   4953   A0 A8 AA AA AA   .db $A0,$A8,$AA,$AA,$AA,$41,$4D,$55
        4958   41 4D 55 
 3335   495B   54 50 A8 F8 BC   .db $54,$50,$A8,$F8,$BC,$AF,$A5,$A8
        4960   AF A5 A8 
 3336   4963   FC F0 F0 FC FC   .db $FC,$F0,$F0,$FC,$FC,$0F,$0F,$CF
        4968   0F 0F CF 
 3337   496B   00 00 00 00 80   .db $00,$00,$00,$00,$80,$00,$40,$00
        4970   00 40 00 
 3338   4973   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4978   00 00 00 
 3339   497B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$C0
        4980   00 00 C0 
 3340                           ;Sprite 4        Harry facing left walk1
 3341   4983   0A 2A AA AA AA   .db $0A,$2A,$AA,$AA,$AA,$54,$54,$55
        4988   54 54 55 
 3342   498B   15 05 2A 2F 3E   .db $15,$05,$2A,$2F,$3E,$FA,$5A,$2A
        4990   FA 5A 2A 
 3343   4993   3F 0F 0F 3F 3F   .db $3F,$0F,$0F,$3F,$3F,$F0,$F0,$FC
        4998   F0 F0 FC 
 3344   499B   00 80 A0 A0 A8   .db $00,$80,$A0,$A0,$A8,$10,$D4,$50
        49A0   10 D4 50 
 3345   49A3   40 00 80 80 80   .db $40,$00,$80,$80,$80,$80,$80,$80
        49A8   80 80 80 
 3346   49AB   C0 00 00 C0 C0   .db $C0,$00,$00,$C0,$C0,$F0,$F0,$FC
        49B0   F0 F0 FC 
 3347   49B3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        49B8   00 00 00 
 3348   49BB   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        49C0   00 00 00 
 3349   49C3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        49C8   00 00 00 
 3350                           ;Sprite 5        Harry facing right walk2
 3351   49CB   00 02 0A 0A 0A   .db $00,$02,$0A,$0A,$0A,$05,$05,$05
        49D0   05 05 05 
 3352   49D3   01 00 02 02 03   .db $01,$00,$02,$02,$03,$0F,$05,$02
        49D8   0F 05 02 
 3353   49DB   03 00 00 03 03   .db $03,$00,$00,$03,$03,$0F,$0F,$0F
        49E0   0F 0F 0F 
 3354   49E3   A0 A8 AA AA AA   .db $A0,$A8,$AA,$AA,$AA,$41,$4D,$55
        49E8   41 4D 55 
 3355   49EB   54 50 A8 F8 E8   .db $54,$50,$A8,$F8,$E8,$A8,$A8,$A8
        49F0   A8 A8 A8 
 3356   49F3   FC F0 F0 FC FC   .db $FC,$F0,$F0,$FC,$FC,$0F,$0F,$CF
        49F8   0F 0F CF 
 3357   49FB   00 00 00 00 80   .db $00,$00,$00,$00,$80,$00,$40,$00
        4A00   00 40 00 
 3358   4A03   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4A08   00 00 00 
 3359   4A0B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$C0
        4A10   00 00 C0 
 3360                           ;Sprite 6        Harry climbing ladder1
 3361   4A13   02 0A 2A 2A AA   .db $02,$0A,$2A,$2A,$AA,$10,$5C,$15
        4A18   10 5C 15 
 3362   4A1B   05 01 0A 0B 0B   .db $05,$01,$0A,$0B,$0B,$0B,$0B,$09
        4A20   0B 0B 09 
 3363   4A23   0F 03 03 03 03   .db $0F,$03,$03,$03,$03,$03,$03,$0F
        4A28   03 03 0F 
 3364   4A2B   80 A0 A8 A8 A8   .db $80,$A0,$A8,$A8,$A8,$54,$54,$54
        4A30   54 54 54 
 3365   4A33   50 40 A0 E0 E0   .db $50,$40,$A0,$E0,$E0,$E0,$E0,$60
        4A38   E0 E0 60 
 3366   4A3B   F0 C0 C0 C0 C0   .db $F0,$C0,$C0,$C0,$C0,$C0,$C0,$C0
        4A40   C0 C0 C0 
 3367   4A43   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4A48   00 00 00 
 3368   4A4B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4A50   00 00 00 
 3369   4A53   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4A58   00 00 00 
 3370                           ;Sprite 7        Harry climbing ladder2
 3371   4A5B   00 00 02 02 0A   .db $00,$00,$02,$02,$0A,$01,$05,$01
        4A60   01 05 01 
 3372   4A63   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4A68   00 00 00 
 3373   4A6B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4A70   00 00 00 
 3374   4A73   28 AA AA AA AA   .db $28,$AA,$AA,$AA,$AA,$05,$C5,$55
        4A78   05 C5 55 
 3375   4A7B   55 14 AA BE BE   .db $55,$14,$AA,$BE,$BE,$BE,$BE,$96
        4A80   BE BE 96 
 3376   4A83   FF 3C 3C 3C 3C   .db $FF,$3C,$3C,$3C,$3C,$3C,$3C,$FC
        4A88   3C 3C FC 
 3377   4A8B   00 00 80 80 80   .db $00,$00,$80,$80,$80,$40,$40,$40
        4A90   40 40 40 
 3378   4A93   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4A98   00 00 00 
 3379   4A9B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4AA0   00 00 00 
 3380                           ;Sprite 8        Harry climbing ladder3
 3381   4AA3   02 0A 2A 2A AA   .db $02,$0A,$2A,$2A,$AA,$10,$5C,$15
        4AA8   10 5C 15 
 3382   4AAB   05 01 0A 0B 0F   .db $05,$01,$0A,$0B,$0F,$3E,$16,$0A
        4AB0   3E 16 0A 
 3383   4AB3   0F 03 03 0F 0F   .db $0F,$03,$03,$0F,$0F,$3C,$3C,$FC
        4AB8   3C 3C FC 
 3384   4ABB   80 A0 A8 A8 A8   .db $80,$A0,$A8,$A8,$A8,$54,$54,$54
        4AC0   54 54 54 
 3385   4AC3   50 40 A0 E0 A0   .db $50,$40,$A0,$E0,$A0,$A0,$A0,$A0
        4AC8   A0 A0 A0 
 3386   4ACB   F0 C0 C0 F0 F0   .db $F0,$C0,$C0,$F0,$F0,$3C,$3C,$FC
        4AD0   3C 3C FC 
 3387   4AD3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4AD8   00 00 00 
 3388   4ADB   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4AE0   00 00 00 
 3389   4AE3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4AE8   00 00 00 
 3390                           ;Sprite 9        Princess facing right stand
 3391   4AEB   00 00 02 02 0A   .db $00,$00,$02,$02,$0A,$01,$05,$01
        4AF0   01 05 01 
 3392   4AF3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$03,$01,$00
        4AF8   03 01 00 
 3393   4AFB   00 00 00 00 00   .db $00,$00,$00,$00,$00,$03,$03,$0F
        4B00   03 03 0F 
 3394   4B03   28 AA AA AA AA   .db $28,$AA,$AA,$AA,$AA,$05,$C5,$55
        4B08   05 C5 55 
 3395   4B0B   55 14 AA BE FA   .db $55,$14,$AA,$BE,$FA,$EA,$6A,$AA
        4B10   EA 6A AA 
 3396   4B13   FF 3C 3C FF FF   .db $FF,$3C,$3C,$FF,$FF,$C3,$C3,$CF
        4B18   C3 C3 CF 
 3397   4B1B   00 00 80 80 80   .db $00,$00,$80,$80,$80,$40,$40,$40
        4B20   40 40 40 
 3398   4B23   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4B28   00 00 00 
 3399   4B2B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$C0,$C0,$C0
        4B30   C0 C0 C0 
 3400                           ;Sprite 10       Harry facing left walk1
 3401   4B33   02 0A 2A 2A AA   .db $02,$0A,$2A,$2A,$AA,$10,$5C,$15
        4B38   10 5C 15 
 3402   4B3B   05 01 0A 0B 0A   .db $05,$01,$0A,$0B,$0A,$0A,$0A,$0A
        4B40   0A 0A 0A 
 3403   4B43   0F 03 03 0F 0F   .db $0F,$03,$03,$0F,$0F,$3C,$3C,$FC
        4B48   3C 3C FC 
 3404   4B4B   80 A0 A8 A8 A8   .db $80,$A0,$A8,$A8,$A8,$54,$54,$54
        4B50   54 54 54 
 3405   4B53   50 40 A0 E0 F0   .db $50,$40,$A0,$E0,$F0,$BC,$94,$A0
        4B58   BC 94 A0 
 3406   4B5B   F0 C0 C0 F0 F0   .db $F0,$C0,$C0,$F0,$F0,$3C,$3C,$FC
        4B60   3C 3C FC 
 3407   4B63   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4B68   00 00 00 
 3408   4B6B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4B70   00 00 00 
 3409   4B73   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4B78   00 00 00 
 3410                           ;Sprite 10       Harry facing left walk2
 3411   4B7B   00 00 02 02 0A   .db $00,$00,$02,$02,$0A,$01,$05,$01
        4B80   01 05 01 
 3412   4B83   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4B88   00 00 00 
 3413   4B8B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$03,$03,$0F
        4B90   03 03 0F 
 3414   4B93   28 AA AA AA AA   .db $28,$AA,$AA,$AA,$AA,$05,$C5,$55
        4B98   05 C5 55 
 3415   4B9B   55 14 AA BE AF   .db $55,$14,$AA,$BE,$AF,$AB,$A9,$AA
        4BA0   AB A9 AA 
 3416   4BA3   FF 3C 3C FF FF   .db $FF,$3C,$3C,$FF,$FF,$C3,$C3,$CF
        4BA8   C3 C3 CF 
 3417   4BAB   00 00 80 80 80   .db $00,$00,$80,$80,$80,$40,$40,$40
        4BB0   40 40 40 
 3418   4BB3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$C0,$40,$00
        4BB8   C0 40 00 
 3419   4BBB   00 00 00 00 00   .db $00,$00,$00,$00,$00,$C0,$C0,$C0
        4BC0   C0 C0 C0 
 3420   4BC3   0A 2A AA AA AA   .db $0A,$2A,$AA,$AA,$AA,$15,$15,$15
        4BC8   15 15 15 
 3421   4BCB   45 C5 EA EA EA   .db $45,$C5,$EA,$EA,$EA,$2A,$2A,$2A
        4BD0   2A 2A 2A 
 3422   4BD3   3F 3C 3C 3C 3C   .db $3F,$3C,$3C,$3C,$3C,$3C,$00,$00
        4BD8   3C 00 00 
 3423   4BDB   A0 A8 AA AA AA   .db $A0,$A8,$AA,$AA,$AA,$54,$54,$54
        4BE0   54 54 54 
 3424   4BE3   51 53 AB AB AB   .db $51,$53,$AB,$AB,$AB,$A8,$A8,$A8
        4BE8   A8 A8 A8 
 3425   4BEB   FC 3C 3C 3C 3C   .db $FC,$3C,$3C,$3C,$3C,$3C,$00,$00
        4BF0   3C 00 00 
 3426                           
 3427   4BF3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4BF8   00 00 00 
 3428   4BFB   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4C00   00 00 00 
 3429   4C03   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4C08   00 00 00 
 3430   4C0B   00 02 0A 0A 0A   .db $00,$02,$0A,$0A,$0A,$01,$01,$01
        4C10   01 01 01 
 3431   4C13   04 0C 0E 0E 0E   .db $04,$0C,$0E,$0E,$0E,$02,$02,$02
        4C18   02 02 02 
 3432   4C1B   03 03 03 03 03   .db $03,$03,$03,$03,$03,$03,$00,$00
        4C20   03 00 00 
 3433   4C23   AA AA AA AA AA   .db $AA,$AA,$AA,$AA,$AA,$55,$55,$55
        4C28   55 55 55 
 3434   4C2B   55 55 AA AA AA   .db $55,$55,$AA,$AA,$AA,$AA,$AA,$AA
        4C30   AA AA AA 
 3435   4C33   FF C3 C3 C3 C3   .db $FF,$C3,$C3,$C3,$C3,$C3,$00,$00
        4C38   C3 00 00 
 3436   4C3B   00 80 A0 A0 A0   .db $00,$80,$A0,$A0,$A0,$40,$40,$40
        4C40   40 40 40 
 3437   4C43   10 30 B0 B0 B0   .db $10,$30,$B0,$B0,$B0,$80,$80,$80
        4C48   80 80 80 
 3438   4C4B   C0 C0 C0 C0 C0   .db $C0,$C0,$C0,$C0,$C0,$C0,$00,$00
        4C50   C0 00 00 
 3439   4C53   0A 2A AA AA AA   .db $0A,$2A,$AA,$AA,$AA,$55,$D5,$D5
        4C58   55 D5 D5 
 3440   4C5B   C5 C5 EA EA EA   .db $C5,$C5,$EA,$EA,$EA,$2A,$2A,$2A
        4C60   2A 2A 2A 
 3441   4C63   3F 3C 3C 3C 00   .db $3F,$3C,$3C,$3C,$00,$00,$00,$00
        4C68   00 00 00 
 3442   4C6B   A0 A8 AA AA AA   .db $A0,$A8,$AA,$AA,$AA,$54,$54,$54
        4C70   54 54 54 
 3443   4C73   50 50 A8 A9 AB   .db $50,$50,$A8,$A9,$AB,$A8,$A8,$A8
        4C78   A8 A8 A8 
 3444   4C7B   FC 3C 3C 3C 3C   .db $FC,$3C,$3C,$3C,$3C,$3C,$3C,$3C
        4C80   3C 3C 3C 
 3445   4C83   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4C88   00 00 00 
 3446   4C8B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4C90   00 00 00 
 3447   4C93   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4C98   00 00 00 
 3448   4C9B   00 02 0A 0A 0A   .db $00,$02,$0A,$0A,$0A,$05,$0D,$0D
        4CA0   05 0D 0D 
 3449   4CA3   0C 0C 0E 0E 0E   .db $0C,$0C,$0E,$0E,$0E,$02,$02,$02
        4CA8   02 02 02 
 3450   4CAB   03 03 03 03 00   .db $03,$03,$03,$03,$00,$00,$00,$00
        4CB0   00 00 00 
 3451                           
 3452   4CB3   AA AA AA AA AA   .db $AA,$AA,$AA,$AA,$AA,$55,$55,$55
        4CB8   55 55 55 
 3453   4CBB   55 55 AA AA AA   .db $55,$55,$AA,$AA,$AA,$AA,$AA,$AA
        4CC0   AA AA AA 
 3454   4CC3   FF C3 C3 C3 03   .db $FF,$C3,$C3,$C3,$03,$03,$03,$03
        4CC8   03 03 03 
 3455   4CCB   00 80 A0 A0 A0   .db $00,$80,$A0,$A0,$A0,$40,$40,$40
        4CD0   40 40 40 
 3456   4CD3   00 00 80 90 B0   .db $00,$00,$80,$90,$B0,$80,$80,$80
        4CD8   80 80 80 
 3457   4CDB   C0 C0 C0 C0 C0   .db $C0,$C0,$C0,$C0,$C0,$C0,$C0,$C0
        4CE0   C0 C0 C0 
 3458   4CE3   0A 2A AA AA AA   .db $0A,$2A,$AA,$AA,$AA,$15,$15,$15
        4CE8   15 15 15 
 3459   4CEB   05 05 2A 6A EA   .db $05,$05,$2A,$6A,$EA,$2A,$2A,$2A
        4CF0   2A 2A 2A 
 3460   4CF3   3F 3C 3C 3C 3C   .db $3F,$3C,$3C,$3C,$3C,$3C,$00,$00
        4CF8   3C 00 00 
 3461   4CFB   A0 A8 AA AA AA   .db $A0,$A8,$AA,$AA,$AA,$55,$57,$57
        4D00   55 57 57 
 3462   4D03   53 53 AB AB AB   .db $53,$53,$AB,$AB,$AB,$A8,$A8,$A8
        4D08   A8 A8 A8 
 3463   4D0B   FC 3C 3C 3C 3C   .db $FC,$3C,$3C,$3C,$3C,$3C,$00,$00
        4D10   3C 00 00 
 3464   4D13   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4D18   00 00 00 
 3465   4D1B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4D20   00 00 00 
 3466   4D23   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4D28   00 00 00 
 3467   4D2B   00 02 0A 0A 0A   .db $00,$02,$0A,$0A,$0A,$01,$01,$01
        4D30   01 01 01 
 3468   4D33   00 00 02 06 0E   .db $00,$00,$02,$06,$0E,$02,$02,$02
        4D38   02 02 02 
 3469   4D3B   03 03 03 03 03   .db $03,$03,$03,$03,$03,$03,$00,$00
        4D40   03 00 00 
 3470   4D43   AA AA AA AA AA   .db $AA,$AA,$AA,$AA,$AA,$55,$55,$55
        4D48   55 55 55 
 3471   4D4B   55 55 AA AA AA   .db $55,$55,$AA,$AA,$AA,$AA,$AA,$AA
        4D50   AA AA AA 
 3472   4D53   FF C3 C3 C3 C3   .db $FF,$C3,$C3,$C3,$C3,$C3,$00,$00
        4D58   C3 00 00 
 3473   4D5B   00 80 A0 A0 A0   .db $00,$80,$A0,$A0,$A0,$50,$70,$70
        4D60   50 70 70 
 3474   4D63   30 30 B0 B0 B0   .db $30,$30,$B0,$B0,$B0,$80,$80,$80
        4D68   80 80 80 
 3475   4D6B   C0 C0 C0 C0 C0   .db $C0,$C0,$C0,$C0,$C0,$C0,$00,$00
        4D70   C0 00 00 
 3476   4D73   00 0A 0A 2A 2A   .db $00,$0A,$0A,$2A,$2A,$2A,$09,$AD
        4D78   2A 09 AD 
 3477   4D7B   AF 0F 3F FF FF   .db $AF,$0F,$3F,$FF,$FF,$FF,$5F,$3F
        4D80   FF 5F 3F 
 3478   4D83   3F FF FF FF 28   .db $3F,$FF,$FF,$FF,$28,$28,$2A,$2A
        4D88   28 2A 2A 
 3479   4D8B   00 A0 A8 A8 54   .db $00,$A0,$A8,$A8,$54,$54,$54,$70
        4D90   54 54 70 
 3480   4D93   F0 F0 FC FC FC   .db $F0,$F0,$FC,$FC,$FC,$FC,$D4,$FC
        4D98   FC D4 FC 
 3481   4D9B   FF FF FC F0 A0   .db $FF,$FF,$FC,$F0,$A0,$A0,$A8,$A8
        4DA0   A0 A8 A8 
 3482   4DA3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4DA8   00 00 00 
 3483   4DAB   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4DB0   00 00 00 
 3484   4DB3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4DB8   00 00 00 
 3485   4DBB   00 00 00 02 02   .db $00,$00,$00,$02,$02,$02,$00,$0A
        4DC0   02 00 0A 
 3486   4DC3   0A 00 03 0F 0F   .db $0A,$00,$03,$0F,$0F,$0F,$05,$03
        4DC8   0F 05 03 
 3487   4DCB   03 0F 0F 0F 02   .db $03,$0F,$0F,$0F,$02,$02,$02,$02
        4DD0   02 02 02 
 3488   4DD3   00 AA AA AA A5   .db $00,$AA,$AA,$AA,$A5,$A5,$95,$D7
        4DD8   A5 95 D7 
 3489   4DDB   FF FF FF FF FF   .db $FF,$FF,$FF,$FF,$FF,$FF,$FD,$FF
        4DE0   FF FD FF 
 3490   4DE3   FF FF FF FF 8A   .db $FF,$FF,$FF,$FF,$8A,$8A,$AA,$AA
        4DE8   8A AA AA 
 3491   4DEB   00 00 80 80 40   .db $00,$00,$80,$80,$40,$40,$40,$00
        4DF0   40 40 00 
 3492   4DF3   00 00 C0 C0 C0   .db $00,$00,$C0,$C0,$C0,$C0,$40,$C0
        4DF8   C0 40 C0 
 3493   4DFB   F0 F0 C0 00 00   .db $F0,$F0,$C0,$00,$00,$00,$80,$80
        4E00   00 80 80 
 3494   4E03                    gr1:
 3495   4E03   00 00 00 A9 A9   .db $00,$00,$00,$A9,$A9,$A4,$54,$55
        4E08   A4 54 55 
 3496   4E0B   51 51 55 56 55   .db $51,$51,$55,$56,$55,$55,$5A,$56
        4E10   55 5A 56 
 3497   4E13   16 06 06 06 05   .db $16,$06,$06,$06,$05,$55,$55,$55
        4E18   55 55 55 
 3498   4E1B   55 54 14 A8 A8   .db $55,$54,$14,$A8,$A8,$00,$00,$00
        4E20   00 00 00 
 3499   4E23   14 14 55 55 AA   .db $14,$14,$55,$55,$AA,$28,$EB,$AA
        4E28   28 EB AA 
 3500   4E2B   AA AA AA AA 55   .db $AA,$AA,$AA,$AA,$55,$55,$AA,$AA
        4E30   55 AA AA 
 3501   4E33   AA AA AA AA AA   .db $AA,$AA,$AA,$AA,$AA,$55,$55,$55
        4E38   55 55 55 
 3502   4E3B   55 00 00 00 00   .db $55,$00,$00,$00,$00,$00,$00,$00
        4E40   00 00 00 
 3503   4E43   00 00 00 40 40   .db $00,$00,$00,$40,$40,$10,$10,$50
        4E48   10 10 50 
 3504   4E4B   40 40 54 95 55   .db $40,$40,$54,$95,$55,$55,$A5,$95
        4E50   55 A5 95 
 3505   4E53   95 9A AA AA 50   .db $95,$9A,$AA,$AA,$50,$55,$55,$55
        4E58   55 55 55 
 3506   4E5B   55 15 15 15 15   .db $55,$15,$15,$15,$15,$14,$2A,$2A
        4E60   14 2A 2A 
 3507   4E63                    gr2:
 3508   4E63   00 00 00 01 01   .db $00,$00,$00,$01,$01,$04,$04,$05
        4E68   04 04 05 
 3509   4E6B   01 01 15 56 55   .db $01,$01,$15,$56,$55,$55,$5A,$56
        4E70   55 5A 56 
 3510   4E73   56 A6 AA AA 05   .db $56,$A6,$AA,$AA,$05,$55,$55,$55
        4E78   55 55 55 
 3511   4E7B   55 54 54 54 54   .db $55,$54,$54,$54,$54,$14,$A8,$A8
        4E80   14 A8 A8 
 3512   4E83   14 14 55 55 AA   .db $14,$14,$55,$55,$AA,$28,$EB,$AA
        4E88   28 EB AA 
 3513   4E8B   AA AA AA AA 55   .db $AA,$AA,$AA,$AA,$55,$55,$AA,$AA
        4E90   55 AA AA 
 3514   4E93   AA AA AA AA AA   .db $AA,$AA,$AA,$AA,$AA,$55,$55,$55
        4E98   55 55 55 
 3515   4E9B   55 00 00 00 00   .db $55,$00,$00,$00,$00,$00,$00,$00
        4EA0   00 00 00 
 3516   4EA3   00 00 00 6A 6A   .db $00,$00,$00,$6A,$6A,$1A,$15,$55
        4EA8   1A 15 55 
 3517   4EAB   45 45 55 95 55   .db $45,$45,$55,$95,$55,$55,$A5,$95
        4EB0   55 A5 95 
 3518   4EB3   94 90 90 90 50   .db $94,$90,$90,$90,$50,$55,$55,$55
        4EB8   55 55 55 
 3519   4EBB   55 15 14 2A 2A   .db $55,$15,$14,$2A,$2A,$00,$00,$00
        4EC0   00 00 00 
 3520   4EC3                    haylp:
 3521   4EC3   00 00 00 08 08   .db $00,$00,$00,$08,$08,$0A,$08,$08
        4EC8   0A 08 08 
 3522   4ECB   08 00 20 80 00   .db $08,$00,$20,$80,$00,$00,$00,$82
        4ED0   00 00 82 
 3523   4ED3   88 8A 88 88 88   .db $88,$8A,$88,$88,$88,$00,$00,$00
        4ED8   00 00 00 
 3524   4EDB   00 00 00 08 88   .db $00,$00,$00,$08,$88,$82,$82,$82
        4EE0   82 82 82 
 3525   4EE3   82 00 00 00 00   .db $82,$00,$00,$00,$00,$00,$00,$88
        4EE8   00 00 88 
 3526   4EEB   88 08 08 08 0A   .db $88,$08,$08,$08,$0A,$00,$00,$00
        4EF0   00 00 00 
 3527   4EF3   00 00 00 0A 08   .db $00,$00,$00,$0A,$08,$0A,$08,$08
        4EF8   0A 08 08 
 3528   4EFB   88 00 00 00 00   .db $88,$00,$00,$00,$00,$00,$00,$08
        4F00   00 00 08 
 3529   4F03   88 08 08 00 08   .db $88,$08,$08,$00,$08,$00,$00,$00
        4F08   00 00 00 
 3530   4F0B                    br1:
 3531   4F0B   0A 25 95 9A A5   .db $0A,$25,$95,$9A,$A5,$95,$95,$AA
        4F10   95 95 AA 
 3532   4F13   95 95 A5 9A 95   .db $95,$95,$A5,$9A,$95,$95,$25,$0A
        4F18   95 25 0A 
 3533   4F1B   AA 55 55 AA 55   .db $AA,$55,$55,$AA,$55,$55,$55,$AA
        4F20   55 55 AA 
 3534   4F23   55 55 55 AA 55   .db $55,$55,$55,$AA,$55,$55,$55,$AA
        4F28   55 55 AA 
 3535   4F2B   A0 58 56 A6 5A   .db $A0,$58,$56,$A6,$5A,$56,$56,$AA
        4F30   56 56 AA 
 3536   4F33   56 56 5A A6 56   .db $56,$56,$5A,$A6,$56,$56,$58,$A0
        4F38   56 58 A0 
 3537   4F3B                    mn1:
 3538   4F3B   00 01 05 05 05   .db $00,$01,$05,$05,$05,$01,$01,$05
        4F40   01 01 05 
 3539   4F43   45 45 45 15 04   .db $45,$45,$45,$15,$04,$01,$04,$05
        4F48   01 04 05 
 3540   4F4B   00 40 00 34 54   .db $00,$40,$00,$34,$54,$54,$40,$50
        4F50   54 40 50 
 3541   4F53   50 55 50 50 10   .db $50,$55,$50,$50,$10,$04,$10,$14
        4F58   04 10 14 
 3542   4F5B                    mn2:
 3543   4F5B   00 01 00 1C 15   .db $00,$01,$00,$1C,$15,$15,$01,$05
        4F60   15 01 05 
 3544   4F63   05 55 05 05 04   .db $05,$55,$05,$05,$04,$10,$04,$14
        4F68   10 04 14 
 3545   4F6B   00 40 50 50 50   .db $00,$40,$50,$50,$50,$40,$40,$50
        4F70   40 40 50 
 3546   4F73   51 51 51 54 10   .db $51,$51,$51,$54,$10,$40,$10,$50
        4F78   40 10 50 
 3547   4F7B                    bd11:
 3548   4F7B   00 00 00 14 85   .db $00,$00,$00,$14,$85,$16,$01,$01
        4F80   16 01 01 
 3549   4F83   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4F88   00 00 00 
 3550   4F8B   55 AA 55 55 54   .db $55,$AA,$55,$55,$54,$04,$10,$40
        4F90   04 10 40 
 3551   4F93   00 00 00 00 55   .db $00,$00,$00,$00,$55,$80,$00,$00
        4F98   80 00 00 
 3552   4F9B   00 00 00 00      .db $00,$00,$00,$00
 3553   4F9F                    bd12:
 3554   4F9F   00 00 00 16      .db $00,$00,$00,$16
 3555   4FA3   85 15 01 01 00   .db $85,$15,$01,$01,$00,$00,$00,$00
        4FA8   00 00 00 
 3556   4FAB   28 28 AA AA 55   .db $28,$28,$AA,$AA,$55,$55,$55,$55
        4FB0   55 55 55 
 3557   4FB3   54 04 10 40 00   .db $54,$04,$10,$40,$00,$00,$00,$80
        4FB8   00 00 80 
 3558   4FBB   55 40 00 00 00   .db $55,$40,$00,$00,$00,$00,$00,$00
        4FC0   00 00 00 
 3559   4FC3                    bd13:
 3560   4FC3   00 00 00 14 85   .db $00,$00,$00,$14,$85,$15,$02,$01
        4FC8   15 02 01 
 3561   4FCB   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        4FD0   00 00 00 
 3562   4FD3   55 55 AA AA 68   .db $55,$55,$AA,$AA,$68,$28,$10,$40
        4FD8   28 10 40 
 3563   4FDB   00 00 00 00 55   .db $00,$00,$00,$00,$55,$40,$80,$00
        4FE0   40 80 00 
 3564   4FE3   00 00 00 00      .db $00,$00,$00,$00
 3565   4FE7                    bd21:
 3566   4FE7   00 00 00 00      .db $00,$00,$00,$00
 3567   4FEB   55 02 00 00 00   .db $55,$02,$00,$00,$00,$00,$00,$00
        4FF0   00 00 00 
 3568   4FF3   00 00 00 00 55   .db $00,$00,$00,$00,$55,$AA,$55,$55
        4FF8   AA 55 55 
 3569   4FFB   15 10 04 01 00   .db $15,$10,$04,$01,$00,$00,$00,$14
        5000   00 00 14 
 3570   5003   52 94 40 40 00   .db $52,$94,$40,$40,$00,$00,$00,$00
        5008   00 00 00 
 3571   500B                    bd22:
 3572   500B   00 00 00 02 55   .db $00,$00,$00,$02,$55,$01,$00,$00
        5010   01 00 00 
 3573   5013   00 00 00 00 28   .db $00,$00,$00,$00,$28,$28,$AA,$AA
        5018   28 AA AA 
 3574   501B   55 55 55 55 15   .db $55,$55,$55,$55,$15,$10,$04,$01
        5020   10 04 01 
 3575   5023   00 00 00 94 52   .db $00,$00,$00,$94,$52,$54,$40,$40
        5028   54 40 40 
 3576   502B   00 00 00 00      .db $00,$00,$00,$00
 3577   502F                    bd23:
 3578   502F   00 00 00 00      .db $00,$00,$00,$00
 3579   5033   55 01 02 00 00   .db $55,$01,$02,$00,$00,$00,$00,$00
        5038   00 00 00 
 3580   503B   00 00 00 00 55   .db $00,$00,$00,$00,$55,$55,$AA,$AA
        5040   55 AA AA 
 3581   5043   29 28 04 01 00   .db $29,$28,$04,$01,$00,$00,$00,$14
        5048   00 00 14 
 3582   504B   52 54 80 40 00   .db $52,$54,$80,$40,$00,$00,$00,$00
        5050   00 00 00 
 3583   5053                    sp1:
 3584   5053   08 20 20 08 02   .db $08,$20,$20,$08,$02,$02,$02,$02
        5058   02 02 02 
 3585   505B   02 02 02 02 08   .db $02,$02,$02,$02,$08,$20,$20,$08
        5060   20 20 08 
 3586   5063   20 08 08 20 80   .db $20,$08,$08,$20,$80,$80,$80,$80
        5068   80 80 80 
 3587   506B   80 80 80 80 20   .db $80,$80,$80,$80,$20,$08,$08,$20
        5070   08 08 20 
 3588   5073                    sp2:
 3589   5073   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$02
        5078   00 00 02 
 3590   507B   02 0A 0A 2A 88   .db $02,$0A,$0A,$2A,$88,$88,$08,$20
        5080   88 08 20 
 3591   5083   08 20 22 22 28   .db $08,$20,$22,$22,$28,$A0,$A0,$A0
        5088   A0 A0 A0 
 3592   508B   80 80 00 00 00   .db $80,$80,$00,$00,$00,$00,$00,$00
        5090   00 00 00 
 3593   5093                    sp3:
 3594   5093   00 00 20 20 88   .db $00,$00,$20,$20,$88,$88,$0A,$0A
        5098   88 0A 0A 
 3595   509B   0A 0A 88 88 20   .db $0A,$0A,$88,$88,$20,$20,$00,$00
        50A0   20 00 00 
 3596   50A3   00 00 08 08 22   .db $00,$00,$08,$08,$22,$22,$A0,$A0
        50A8   22 A0 A0 
 3597   50AB   A0 A0 22 22 08   .db $A0,$A0,$22,$22,$08,$08,$00,$00
        50B0   08 00 00 
 3598   50B3                    sp4:
 3599   50B3   20 08 88 88 28   .db $20,$08,$88,$88,$28,$0A,$0A,$0A
        50B8   0A 0A 0A 
 3600   50BB   02 02 00 00 00   .db $02,$02,$00,$00,$00,$00,$00,$00
        50C0   00 00 00 
 3601   50C3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$80
        50C8   00 00 80 
 3602   50CB   80 A0 A0 A8 22   .db $80,$A0,$A0,$A8,$22,$22,$20,$08
        50D0   22 20 08 
 3603   50D3                    pn1:
 3604   50D3   0C 0F 0E 0A 0B   .db $0C,$0F,$0E,$0A,$0B,$0A,$0A,$0A
        50D8   0A 0A 0A 
 3605   50DB   0A 02 00 02 3F   .db $0A,$02,$00,$02,$3F,$FF,$FF,$FF
        50E0   FF FF FF 
 3606   50E3   FF FF FE FE FE   .db $FF,$FF,$FE,$FE,$FE,$FE,$FE,$BA
        50E8   FE FE BA 
 3607   50EB   AA AA AA AF BF   .db $AA,$AA,$AA,$AF,$BF,$BF,$3F,$3F
        50F0   BF 3F 3F 
 3608   50F3   00 AA AA EB EB   .db $00,$AA,$AA,$EB,$EB,$AA,$BE,$AA
        50F8   AA BE AA 
 3609   50FB   AA AA AA AA FF   .db $AA,$AA,$AA,$AA,$FF,$FF,$FF,$FF
        5100   FF FF FF 
 3610   5103   FF FF A6 A9 96   .db $FF,$FF,$A6,$A9,$96,$95,$AA,$AA
        5108   95 AA AA 
 3611   510B   AA AA AA EB EB   .db $AA,$AA,$AA,$EB,$EB,$EB,$EB,$EB
        5110   EB EB EB 
 3612   5113   30 F0 B0 A0 E0   .db $30,$F0,$B0,$A0,$E0,$A0,$A0,$A0
        5118   A0 A0 A0 
 3613   511B   A0 80 00 80 FC   .db $A0,$80,$00,$80,$FC,$FF,$FF,$FF
        5120   FF FF FF 
 3614   5123   FF FF BF BF 7F   .db $FF,$FF,$BF,$BF,$7F,$7F,$BF,$AE
        5128   7F BF AE 
 3615   512B   AA AA AA FA FE   .db $AA,$AA,$AA,$FA,$FE,$FE,$FC,$FC
        5130   FE FC FC 
 3616                           
 3617                           ;gr1   equ sprites+$5A0
 3618                           ;gr2   equ sprites+$600
 3619                           ;haylp equ sprites+$660
 3620                           ;br1   equ sprites+$6A8
 3621                           ;mn1   equ sprites+$6D8
 3622                           ;mn2   equ sprites+$6F8
 3623                           ;bd11  equ sprites+$718
 3624                           ;bd12  equ sprites+$73C
 3625                           ;bd13  equ sprites+$760
 3626                           ;bd21  equ sprites+$784
 3627                           ;bd22  equ sprites+$7A8
 3628                           ;bd23  equ sprites+$7CC
 3629                           ;sp1   equ sprites+$7F0
 3630                           ;sp2   equ sprites+$810
 3631                           ;sp3   equ sprites+$830
 3632                           ;sp4   equ sprites+$850
 3633                           ;pn1   equ sprites+$870
 3634                           
 3635                           
 3636   5133                                   include tiles.inc
 3637   5133                    tiles:
 3638                           sprite0:                              ;Air
 3639   5133   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        5138   00 00 00 
 3640   513B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        5140   00 00 00 
 3641   5143   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        5148   00 00 00 
 3642   514B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        5150   00 00 00 
 3643                           sprite1:                              ;Construction small
 3644   5153   55 60 18 06 01   .db $55,$60,$18,$06,$01,$09,$24,$90
        5158   09 24 90 
 3645   515B   55 09 24 90 40   .db $55,$09,$24,$90,$40,$60,$18,$06
        5160   60 18 06 
 3646   5163   6A 55 00 00 00   .db $6A,$55,$00,$00,$00,$00,$00,$00
        5168   00 00 00 
 3647   516B   A9 55 00 00 00   .db $A9,$55,$00,$00,$00,$00,$00,$00
        5170   00 00 00 
 3648                           sprite2:                              ;Construction big
 3649   5173   55 6A 90 10 24   .db $55,$6A,$90,$10,$24,$04,$09,$01
        5178   04 09 01 
 3650   517B   55 A9 06 04 18   .db $55,$A9,$06,$04,$18,$10,$60,$40
        5180   10 60 40 
 3651   5183   01 01 06 04 18   .db $01,$01,$06,$04,$18,$10,$60,$40
        5188   10 60 40 
 3652   518B   40 40 90 10 24   .db $40,$40,$90,$10,$24,$04,$09,$01
        5190   04 09 01 
 3653                           sprite3:                              ;Ladder
 3654   5193   C0 C0 EA FF C0   .db $C0,$C0,$EA,$FF,$C0,$C0,$EA,$FF
        5198   C0 EA FF 
 3655   519B   03 03 AB FF 03   .db $03,$03,$AB,$FF,$03,$03,$AB,$FF
        51A0   03 AB FF 
 3656   51A3   C0 C0 EA FF C0   .db $C0,$C0,$EA,$FF,$C0,$C0,$EA,$FF
        51A8   C0 EA FF 
 3657   51AB   03 03 AB FF 03   .db $03,$03,$AB,$FF,$03,$03,$AB,$FF
        51B0   03 AB FF 
 3658                           sprite4:                              ;Conveyor right left
 3659   51B3   55 7F 7F 7F 7F   .db $55,$7F,$7F,$7F,$7F,$6A,$7F,$7F
        51B8   6A 7F 7F 
 3660   51BB   55 BF EF FB FE   .db $55,$BF,$EF,$FB,$FE,$AA,$FE,$FB
        51C0   AA FE FB 
 3661   51C3   7F 7F 55 00 00   .db $7F,$7F,$55,$00,$00,$00,$00,$00
        51C8   00 00 00 
 3662   51CB   EF BF 55 00 00   .db $EF,$BF,$55,$00,$00,$00,$00,$00
        51D0   00 00 00 
 3663                           sprite5:                              ;Conveyor right middle
 3664   51D3   55 FF FF FF FF   .db $55,$FF,$FF,$FF,$FF,$AA,$FF,$FF
        51D8   AA FF FF 
 3665   51DB   55 BF EF FB FE   .db $55,$BF,$EF,$FB,$FE,$AA,$FE,$FB
        51E0   AA FE FB 
 3666   51E3   FF FF 55 00 00   .db $FF,$FF,$55,$00,$00,$00,$00,$00
        51E8   00 00 00 
 3667   51EB   EF BF 55 00 00   .db $EF,$BF,$55,$00,$00,$00,$00,$00
        51F0   00 00 00 
 3668                           sprite6:                              ;Conveyor right right
 3669   51F3   55 FE FF FF FF   .db $55,$FE,$FF,$FF,$FF,$AA,$FF,$FF
        51F8   AA FF FF 
 3670   51FB   55 FD BD ED F9   .db $55,$FD,$BD,$ED,$F9,$A9,$F9,$ED
        5200   A9 F9 ED 
 3671   5203   FF FE 55 00 00   .db $FF,$FE,$55,$00,$00,$00,$00,$00
        5208   00 00 00 
 3672   520B   BD FD 55 00 00   .db $BD,$FD,$55,$00,$00,$00,$00,$00
        5210   00 00 00 
 3673                           sprite7:                              ;Conveyor left left
 3674   5213   55 7F 7E 7B 6F   .db $55,$7F,$7E,$7B,$6F,$6A,$6F,$7B
        5218   6A 6F 7B 
 3675   521B   55 BF FF FF FF   .db $55,$BF,$FF,$FF,$FF,$AA,$FF,$FF
        5220   AA FF FF 
 3676   5223   7E 7F 55 00 00   .db $7E,$7F,$55,$00,$00,$00,$00,$00
        5228   00 00 00 
 3677   522B   FF BF 55 00 00   .db $FF,$BF,$55,$00,$00,$00,$00,$00
        5230   00 00 00 
 3678                           sprite8:                              ;Conveyor left middle
 3679   5233   55 FE FB EF BF   .db $55,$FE,$FB,$EF,$BF,$AA,$BF,$EF
        5238   AA BF EF 
 3680   523B   55 FF FF FF FF   .db $55,$FF,$FF,$FF,$FF,$AA,$FF,$FF
        5240   AA FF FF 
 3681   5243   FB FE 55 00 00   .db $FB,$FE,$55,$00,$00,$00,$00,$00
        5248   00 00 00 
 3682   524B   FF FF 55 00 00   .db $FF,$FF,$55,$00,$00,$00,$00,$00
        5250   00 00 00 
 3683                           sprite9:                              ;Conveyor left right
 3684   5253   55 FE FB EF BF   .db $55,$FE,$FB,$EF,$BF,$AA,$BF,$EF
        5258   AA BF EF 
 3685   525B   55 FD FD FD FD   .db $55,$FD,$FD,$FD,$FD,$A9,$FD,$FD
        5260   A9 FD FD 
 3686   5263   FB FE 55 00 00   .db $FB,$FE,$55,$00,$00,$00,$00,$00
        5268   00 00 00 
 3687   526B   FD FD 55 00 00   .db $FD,$FD,$55,$00,$00,$00,$00,$00
        5270   00 00 00 
 3688                           sprite10:                            ;Lunch
 3689   5273   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        5278   00 00 00 
 3690   527B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00
        5280   00 00 00 
 3691   5283   00 05 05 05 05   .db $00,$05,$05,$05,$05,$05,$05,$05
        5288   05 05 05 
 3692   528B   00 50 7C 5C 5C   .db $00,$50,$7C,$5C,$5C,$5C,$7C,$50
        5290   5C 7C 50 
 3693                           
 3694   5293                                   include font.inc
 3695                           ;Font file for ASCII chars 32-128
 3696                           
 3697   5293                    font:
 3698                           ;special chars
 3699   5293   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5298   00 00 00 00 00 
        529D   00 00 00 00 00 
        52A2   00 
 3700   52A3   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        52A8   00 00 00 00 00 
        52AD   00 00 00 00 00 
        52B2   00 
 3701   52B3   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        52B8   00 00 00 00 00 
        52BD   00 00 00 00 00 
        52C2   00 
 3702   52C3   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        52C8   00 00 00 00 00 
        52CD   00 00 00 00 00 
        52D2   00 
 3703   52D3   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        52D8   00 00 00 00 00 
        52DD   00 00 00 00 00 
        52E2   00 
 3704   52E3   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        52E8   00 00 00 00 00 
        52ED   00 00 00 00 00 
        52F2   00 
 3705   52F3   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        52F8   00 00 00 00 00 
        52FD   00 00 00 00 00 
        5302   00 
 3706   5303   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5308   00 00 00 00 00 
        530D   00 00 00 00 00 
        5312   00 
 3707   5313   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5318   00 00 00 00 00 
        531D   00 00 00 00 00 
        5322   00 
 3708   5323   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5328   00 00 00 00 00 
        532D   00 00 00 00 00 
        5332   00 
 3709   5333   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5338   00 00 00 00 00 
        533D   00 00 00 00 00 
        5342   00 
 3710   5343   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5348   00 00 00 00 00 
        534D   00 00 00 00 00 
        5352   00 
 3711   5353   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5358   00 00 00 00 00 
        535D   00 00 00 00 00 
        5362   00 
 3712   5363   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5368   00 00 00 00 00 
        536D   00 00 00 00 00 
        5372   00 
 3713   5373   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5378   00 00 00 00 00 
        537D   00 00 00 00 00 
        5382   00 
 3714   5383   00 00 00 00 00   .db 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        5388   00 00 00 00 00 
        538D   00 00 00 00 00 
        5392   00 
 3715                           
 3716                           ;ascii chars
 3717   5393   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00 ; space 
        5398   00 00 00 
 3718   539B   0C 0C 0C 0C 0C   .db $0c,$0c,$0c,$0c,$0c,$00,$0c,$00 ; !
        53A0   00 0C 00 
 3719   53A3   6C 6C 6C 00 00   .db $6C,$6C,$6C,$00,$00,$00,$00,$00 ; "
        53A8   00 00 00 
 3720   53AB   6C 6C FE 6C FE   .db $6C,$6C,$FE,$6C,$FE,$6C,$6C,$00 ; #
        53B0   6C 6C 00 
 3721   53B3   30 7C C0 78 0C   .db $30,$7C,$C0,$78,$0C,$F8,$30,$00 ; $
        53B8   F8 30 00 
 3722   53BB   00 C6 CC 18 30   .db $00,$C6,$CC,$18,$30,$66,$C6,$00 ; %
        53C0   66 C6 00 
 3723   53C3   38 6C 38 76 DC   .db $38,$6C,$38,$76,$DC,$CC,$76,$00 ; &
        53C8   CC 76 00 
 3724   53CB   60 60 00 00 00   .db $60,$60,$00,$00,$00,$00,$00,$00 ; '
        53D0   00 00 00 
 3725   53D3   18 30 60 60 60   .db $18,$30,$60,$60,$60,$30,$18,$00 ; (
        53D8   30 18 00 
 3726   53DB   30 0C 0C 0C 0C   .db $30,$0c,$0c,$0c,$0c,$0c,$30,$00 ; )
        53E0   0C 30 00 
 3727   53E3   00 CC 30 FC 30   .db $00,$cc,$30,$fc,$30,$cc,$00,$00 ; *
        53E8   CC 00 00 
 3728   53EB   00 30 30 FC 30   .db $00,$30,$30,$FC,$30,$30,$00,$00 ; +
        53F0   30 00 00 
 3729   53F3   00 00 00 00 00   .db $00,$00,$00,$00,$00,$30,$30,$60 ; ,
        53F8   30 30 60 
 3730   53FB   00 00 00 FC 00   .db $00,$00,$00,$FC,$00,$00,$00,$00 ; -
        5400   00 00 00 
 3731   5403   00 00 00 00 00   .db $00,$00,$00,$00,$00,$30,$30,$00 ; .
        5408   30 30 00 
 3732   540B   0C 0C 0C 30 30   .db $0c,$0C,$0c,$30,$30,$C0,$c0,$00 ; /
        5410   C0 C0 00 
 3733                           
 3734   5413                    livenum:
 3735   5413   30 CC CC CC CC   .db $30,$cc,$cc,$cc,$cc,$cc,$30,$00 ; 0
        5418   CC 30 00 
 3736   541B   0C 3C 0C 0C 0C   .db $0c,$3C,$0C,$0C,$0C,$0C,$0C,$00 ; 1
        5420   0C 0C 00 
 3737   5423   30 CC 0C 0C 30   .db $30,$cc,$0c,$0c,$30,$c0,$Fc,$00 ; 2
        5428   C0 FC 00 
 3738   542B   30 CC 0C 30 0C   .db $30,$cc,$0c,$30,$0c,$cc,$30,$00 ; 3
        5430   CC 30 00 
 3739   5433   0C 3C CC CC CC   .db $0c,$3c,$cc,$cc,$cc,$Fc,$0c,$00 ; 4
        5438   FC 0C 00 
 3740   543B   FC C0 C0 F0 0C   .db $fc,$c0,$c0,$f0,$0c,$cc,$30,$00 ; 5
        5440   CC 30 00 
 3741   5443   0C 30 C0 F0 CC   .db $0c,$30,$c0,$f0,$cc,$cc,$30,$00 ; 6
        5448   CC 30 00 
 3742   544B   FC 0C 0C 30 C0   .db $fc,$0c,$0c,$30,$C0,$c0,$c0,$00 ; 7
        5450   C0 C0 00 
 3743   5453   30 CC CC 30 CC   .db $30,$cc,$cc,$30,$cc,$cc,$30,$00 ; 8
        5458   CC 30 00 
 3744   545B   30 CC CC 3C 0C   .db $30,$cc,$cc,$3c,$0c,$30,$c0,$00 ; 9
        5460   30 C0 00 
 3745   5463   00 30 30 00 30   .db $00,$30,$30,$00,$30,$30,$00,$00 ; :
        5468   30 00 00 
 3746   546B   00 30 30 00 30   .db $00,$30,$30,$00,$30,$30,$c0,$00 ; ;
        5470   30 C0 00 
 3747   5473   18 30 60 C0 60   .db $18,$30,$60,$C0,$60,$30,$18,$00 ; <
        5478   30 18 00 
 3748   547B   00 00 FC 00 00   .db $00,$00,$FC,$00,$00,$FC,$00,$00 ; =
        5480   FC 00 00 
 3749   5483   60 30 18 0C 18   .db $60,$30,$18,$0C,$18,$30,$60,$00 ; >
        5488   30 60 00 
 3750   548B   78 CC 0C 18 30   .db $78,$CC,$0C,$18,$30,$00,$30,$00 ; ?
        5490   00 30 00 
 3751   5493   7C C6 DE DE DE   .db $7C,$C6,$DE,$DE,$DE,$C0,$78,$00 ; @
        5498   C0 78 00 
 3752   549B   30 CC CC FC CC   .db $30,$cc,$cc,$fc,$cc,$cc,$cc,$00 ; A
        54A0   CC CC 00 
 3753   54A3   F0 CC CC F0 CC   .db $f0,$cc,$cc,$f0,$cc,$cc,$f0,$00 ; B
        54A8   CC F0 00 
 3754   54AB   30 CC C0 C0 C0   .db $30,$cc,$c0,$c0,$c0,$cc,$30,$00 ; C
        54B0   CC 30 00 
 3755   54B3   F0 CC CC CC CC   .db $f0,$cc,$cc,$cc,$cc,$cc,$f0,$00 ; D
        54B8   CC F0 00 
 3756   54BB   FC C0 C0 FC C0   .db $fc,$c0,$c0,$fc,$c0,$c0,$Fc,$00 ; E
        54C0   C0 FC 00 
 3757   54C3   FC C0 C0 F0 C0   .db $fc,$c0,$c0,$f0,$c0,$c0,$c0,$00 ; F
        54C8   C0 C0 00 
 3758   54CB   30 CC C0 C0 CC   .db $30,$cc,$c0,$c0,$cc,$cc,$3c,$00 ; G
        54D0   CC 3C 00 
 3759   54D3   CC CC CC FC CC   .db $cc,$cc,$cc,$fc,$cc,$cc,$cc,$00 ; H
        54D8   CC CC 00 
 3760   54DB   30 30 30 30 30   .db $30,$30,$30,$30,$30,$30,$30,$00 ; I
        54E0   30 30 00 
 3761   54E3   0C 0C 0C 0C 0C   .db $0c,$0C,$0C,$0C,$0C,$cC,$30,$00 ; J
        54E8   CC 30 00 
 3762   54EB   CC CC CC F0 CC   .db $cc,$cc,$cc,$f0,$cc,$cc,$cc,$00 ; K
        54F0   CC CC 00 
 3763   54F3   C0 C0 C0 C0 C0   .db $c0,$c0,$c0,$c0,$c0,$c0,$fc,$00 ; L
        54F8   C0 FC 00 
 3764   54FB   CC CC FC CC CC   .db $cc,$cc,$fc,$cc,$cc,$cc,$cc,$00 ; M
        5500   CC CC 00 
 3765   5503   F0 CC CC CC CC   .db $f0,$cc,$cc,$cc,$cc,$cc,$cc,$00 ; N
        5508   CC CC 00 
 3766   550B   30 CC CC CC CC   .db $30,$cc,$cc,$cc,$cc,$cc,$30,$00 ; O
        5510   CC 30 00 
 3767   5513   F0 CC CC F0 C0   .db $f0,$cc,$cc,$f0,$c0,$c0,$c0,$00 ; P
        5518   C0 C0 00 
 3768   551B   30 CC CC CC FC   .db $30,$cc,$cc,$cc,$fc,$cc,$3c,$00 ; Q
        5520   CC 3C 00 
 3769   5523   F0 CC CC F0 CC   .db $f0,$cc,$cc,$f0,$cc,$cc,$cc,$00 ; R
        5528   CC CC 00 
 3770   552B   30 CC C0 30 0C   .db $30,$cc,$c0,$30,$0c,$cc,$30,$00 ; S
        5530   CC 30 00 
 3771   5533   FC 30 30 30 30   .db $fc,$30,$30,$30,$30,$30,$30,$00 ; T
        5538   30 30 00 
 3772   553B   CC CC CC CC CC   .db $cc,$cc,$cc,$cc,$cc,$cc,$3c,$00 ; U
        5540   CC 3C 00 
 3773   5543   CC CC CC CC CC   .db $cc,$cc,$cc,$cc,$cc,$cc,$30,$00 ; V
        5548   CC 30 00 
 3774   554B   CC CC CC CC FC   .db $cc,$cc,$cc,$cc,$fc,$cc,$cc,$00 ; W
        5550   CC CC 00 
 3775   5553   CC CC CC 30 CC   .db $cc,$cc,$cc,$30,$cc,$cc,$cc,$00 ; X
        5558   CC CC 00 
 3776   555B   CC CC CC FC 30   .db $cc,$cc,$cc,$fc,$30,$30,$30,$00 ; Y
        5560   30 30 00 
 3777   5563   FC 0C 0C 30 C0   .db $fc,$0c,$0c,$30,$c0,$c0,$fc,$00 ; Z
        5568   C0 FC 00 
 3778   556B   78 60 60 60 60   .db $78,$60,$60,$60,$60,$60,$78,$00 ; [
        5570   60 78 00 
 3779   5573   C0 60 30 18 0C   .db $C0,$60,$30,$18,$0C,$06,$02,$00 ; \
        5578   06 02 00 
 3780   557B   78 18 18 18 18   .db $78,$18,$18,$18,$18,$18,$78,$00 ; ]
        5580   18 78 00 
 3781   5583   10 38 6C C6 00   .db $10,$38,$6C,$C6,$00,$00,$00,$00 ; ^
        5588   00 00 00 
 3782   558B   18 18 18 18 18   .db $18,$18,$18,$18,$18,$18,$18,$18 ; _=|
        5590   18 18 18 
 3783   5593   30 30 18 00 00   .db $30,$30,$18,$00,$00,$00,$00,$00 ; `
        5598   00 00 00 
 3784   559B   00 00 3E 06 3E   .db $00,$00,$3E,$06,$3E,$26,$3E,$00 ; a
        55A0   26 3E 00 
 3785   55A3   30 30 3E 26 26   .db $30,$30,$3E,$26,$26,$26,$3E,$00 ; b
        55A8   26 3E 00 
 3786   55AB   00 00 3E 30 30   .db $00,$00,$3E,$30,$30,$30,$3E,$00 ; c
        55B0   30 3E 00 
 3787   55B3   06 06 3E 26 26   .db $06,$06,$3E,$26,$26,$26,$3E,$00 ; d
        55B8   26 3E 00 
 3788   55BB   00 00 3E 26 3E   .db $00,$00,$3E,$26,$3E,$20,$3E,$00 ; e
        55C0   20 3E 00 
 3789   55C3   1C 10 3E 18 18   .db $1C,$10,$3E,$18,$18,$18,$18,$00 ; f
        55C8   18 18 00 
 3790   55CB   00 00 3E 34 34   .db $00,$00,$3E,$34,$34,$1E,$26,$3E ; g
        55D0   1E 26 3E 
 3791   55D3   30 30 3E 26 26   .db $30,$30,$3E,$26,$26,$26,$26,$00 ; h
        55D8   26 26 00 
 3792   55DB   0C 00 0C 0C 0C   .db $0C,$00,$0C,$0C,$0C,$0C,$0C,$00 ; i
        55E0   0C 0C 00 
 3793   55E3   0C 00 0C 0C 0C   .db $0C,$00,$0C,$0C,$0C,$0C,$04,$1C ; j
        55E8   0C 04 1C 
 3794   55EB   30 30 32 34 3C   .db $30,$30,$32,$34,$3C,$26,$26,$00 ; k
        55F0   26 26 00 
 3795   55F3   0C 0C 0C 0C 0C   .db $0C,$0C,$0C,$0C,$0C,$0C,$0C,$00 ; l
        55F8   0C 0C 00 
 3796   55FB   00 00 7F 5B 5B   .db $00,$00,$7F,$5B,$5B,$5B,$5B,$00 ; m
        5600   5B 5B 00 
 3797   5603   00 00 3E 26 26   .db $00,$00,$3E,$26,$26,$26,$26,$00 ; n
        5608   26 26 00 
 3798   560B   00 00 3E 26 26   .db $00,$00,$3E,$26,$26,$26,$3E,$00 ; o
        5610   26 3E 00 
 3799   5613   00 00 3E 32 32   .db $00,$00,$3E,$32,$32,$32,$3E,$30 ; p
        5618   32 3E 30 
 3800   561B   00 00 3E 32 32   .db $00,$00,$3E,$32,$32,$32,$3E,$06 ; q
        5620   32 3E 06 
 3801   5623   00 00 34 38 30   .db $00,$00,$34,$38,$30,$30,$30,$00 ; r
        5628   30 30 00 
 3802   562B   00 00 3E 30 3E   .db $00,$00,$3E,$30,$3E,$06,$3E,$00 ; s
        5630   06 3E 00 
 3803   5633   04 04 3E 0C 0C   .db $04,$04,$3E,$0C,$0C,$0C,$0C,$00 ; t
        5638   0C 0C 00 
 3804   563B   00 00 32 32 32   .db $00,$00,$32,$32,$32,$32,$3E,$00 ; u
        5640   32 3E 00 
 3805   5643   00 00 32 32 32   .db $00,$00,$32,$32,$32,$1C,$08,$00 ; v
        5648   1C 08 00 
 3806   564B   00 00 6D 6D 6D   .db $00,$00,$6D,$6D,$6D,$6D,$7F,$00 ; w
        5650   6D 7F 00 
 3807   5653   00 00 32 34 1C   .db $00,$00,$32,$34,$1C,$16,$26,$00 ; x
        5658   16 26 00 
 3808   565B   00 00 32 32 32   .db $00,$00,$32,$32,$32,$32,$3E,$06 ; y
        5660   32 3E 06 
 3809   5663   00 00 3E 0E 1C   .db $00,$00,$3E,$0E,$1C,$38,$3E,$00 ; z
        5668   38 3E 00 
 3810   566B   1C 30 30 E0 30   .db $1C,$30,$30,$E0,$30,$30,$1C,$00 ; {
        5670   30 1C 00 
 3811   5673   18 18 18 18 18   .db $18,$18,$18,$18,$18,$18,$18,$18 ; |
        5678   18 18 18 
 3812   567B   E0 30 30 1C 30   .db $E0,$30,$30,$1C,$30,$30,$E0,$00 ; }
        5680   30 E0 00 
 3813   5683   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00 ; ~
        5688   00 00 00 
 3814   568B   00 00 00 00 00   .db $00,$00,$00,$00,$00,$00,$00,$00 ; 
        5690   00 00 00 
 3815                           
 3816                           ;======================================================================
 3817                           ;FONT ROUTINES:
 3818                           ;======================================================================
 3819                           ;PUTSTRING
 3820                           ; - x,y,string,0
 3821                           ; - x,y,string,0
 3822                           ; - $ea
 3823                           ;
 3824                           ;PUTCHAR x,y,a
 3825                           ;======================================================================
 3826          0070             XPOS     equ $70
 3827          0071             YPOS     equ $71
 3828          0072             COLOR    equ $72
 3829          0078             COLORTMP equ $78
 3830                           
 3831   5693                    PUTSTRING:
 3832   5693   86 E8                stx $e8
 3833   5695   84 E9                sty $e9
 3834                           
 3835                           
 3836   5697   A0 00                ldy #0
 3837   5699                    P_S_0:
 3838   5699   B1 E8                lda ($e8),y    ; Check end of printing
 3839   569B   C9 FF                cmp #$ff
 3840   569D   F0 21                beq P_S_4
 3841                           
 3842   569F                    P_S_1:
 3843   569F   85 70                sta XPOS       ; Save x,y,attribute
 3844   56A1   20 C8 56             jsr setcolor
 3845   56A4   20 C1 56             jsr PTR_INC
 3846   56A7   B1 E8                lda ($e8),y
 3847   56A9   85 71                sta YPOS
 3848                           
 3849   56AB                    P_S_2:
 3850   56AB   20 C1 56             jsr PTR_INC    ; Print character until 0
 3851   56AE   B1 E8                lda ($e8),y
 3852   56B0   F0 08                beq P_S_5
 3853   56B2   20 E2 56             jsr PRINTCHAR
 3854   56B5   E6 70                inc XPOS
 3855   56B7   4C AB 56             jmp P_S_2
 3856   56BA                    P_S_5:
 3857   56BA   20 C1 56             jsr PTR_INC
 3858   56BD   4C 99 56             jmp P_S_0
 3859                           
 3860   56C0                    P_S_4:
 3861   56C0   60                   rts            ; Return to program
 3862                           
 3863                           PTR_INC:           ; Increment textpointer
 3864   56C1   E6 E8                inc $e8
 3865   56C3   D0 02                bne PTR_1
 3866   56C5   E6 E9                inc $e9
 3867   56C7                    PTR_1:
 3868   56C7   60                   rts
 3869                           
 3870   56C8                    setcolor:
 3871   56C8   85 78                sta COLORTMP
 3872   56CA   A5 70                lda XPOS
 3873   56CC   29 1F                and #31
 3874   56CE   85 70                sta XPOS
 3875                           
 3876   56D0   A2 04                ldx #4
 3877   56D2                    nshift:
 3878   56D2   A5 78                lda COLORTMP
 3879   56D4   0A                   asl a
 3880   56D5   26 72                rol COLOR
 3881   56D7   0A                   asl a
 3882   56D8   26 72                rol COLOR
 3883   56DA   CA                   dex
 3884   56DB   D0 F5                bne nshift
 3885   56DD   60                   rts
 3886                           
 3887                           ;----------------------------------------------------------------------
 3888          0073             SCR      equ $73
 3889          0075             CHR      equ $75
 3890          0077             TMP_Y    equ $77
 3891          0078             TMP_A    equ $78
 3892                           
 3893   56DE                    PUTCHAR:
 3894   56DE   86 70                stx XPOS
 3895   56E0   84 71                sty YPOS
 3896                           
 3897   56E2                    PRINTCHAR:
 3898   56E2   85 78                sta TMP_A
 3899   56E4   85 75                sta CHR        ; Calculate characterspritedata address
 3900   56E6   A9 00                lda #0         ; = A * 8 + charsprite data address
 3901   56E8   85 76                sta CHR+1
 3902   56EA   06 75                asl CHR
 3903   56EC   26 76                rol CHR+1
 3904   56EE   06 75                asl CHR
 3905   56F0   26 76                rol CHR+1
 3906   56F2   06 75                asl CHR
 3907   56F4   26 76                rol CHR+1
 3908   56F6   A5 75                lda CHR
 3909   56F8   18                   clc
 3910   56F9   69 93                adc #<font
 3911   56FB   85 75                sta CHR
 3912   56FD   A5 76                lda CHR+1
 3913   56FF   69 52                adc #>font
 3914   5701   85 76                sta CHR+1
 3915   5703                        
 3916   5703   A5 70                lda XPOS       ; Calculate screenaddress
 3917   5705   85 73                sta SCR
 3918   5707   A5 71                lda YPOS
 3919   5709   18                   clc
 3920   570A   69 80                adc #$80
 3921   570C   85 74                sta SCR+1
 3922   570E                     
 3923   570E   84 77                sty TMP_Y
 3924   5710   A2 00                ldx #0
 3925   5712   A0 00                ldy #0         ; Put character on screen
 3926   5714                    P_C_1:
 3927   5714   B1 75                lda (CHR),y
 3928   5716   25 72                and COLOR
 3929   5718   91 73                sta (SCR),y
 3930   571A   E6 75                inc CHR
 3931   571C   D0 02                bne P_C_2
 3932   571E   E6 76                inc CHR+1
 3933   5720                    P_C_2:
 3934   5720   A5 73                lda SCR
 3935   5722   18                   clc
 3936   5723   69 20                adc #$20
 3937   5725   85 73                sta SCR
 3938   5727   A5 74                lda SCR+1
 3939   5729   69 00                adc #0
 3940   572B   85 74                sta SCR+1
 3941   572D   E8                   inx
 3942   572E   E0 08                cpx #8
 3943   5730   D0 E2                bne P_C_1
 3944                           
 3945   5732   A4 77                ldy TMP_Y
 3946   5734   A5 78                lda TMP_A
 3947   5736   60                   rts
 3948   5737                     
 3949   5737                    INV_CURSOR:
 3950   5737   86 73                stx SCR
 3951   5739   98                   tya
 3952   573A   18                   clc
 3953   573B   69 80                adc #$80
 3954   573D   85 74                sta SCR+1
 3955   573F                     
 3956   573F   A0 00                ldy #0         ; Put character on screen
 3957   5741                    IC1:
 3958   5741   B1 73                lda (SCR),y
 3959   5743   49 FF                eor #$ff
 3960   5745   91 73                sta (SCR),y
 3961   5747   98                   tya
 3962   5748   18                   clc
 3963   5749   69 20                adc #$20
 3964   574B   A8                   tay
 3965   574C   D0 F3                bne IC1
 3966   574E   60                   rts    
 3967                           
 3968                           
 3969   574F                    eind_asm



           Lines Assembled :  3969             Assembly Errors :  0



